{"version":3,"sources":["../../web-element/node_modules/@stencil/core/internal/client lazy /^/.//.*$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../../src/api/model.ts","context/app-context.tsx","utils/createContext.tsx","../../src/api/api.ts","../../src/constants.ts","../../src/store-manager/storage-manager.ts","../../src/store-manager/local-storage.ts","../../src/tokenService.ts","../../src/UrlBuilder.ts","services/identifo.ts","../../src/IdentifoAuth.ts","components/demo/demo.tsx","components/header/header.tsx","pages/App.tsx","../../web-element/dist/custom-elements/index.js","pages/Callback.tsx","pages/Root.tsx","utils/hooks/ensureAuthentication.tsx","reportWebVitals.ts","register-identifo.ts","index.tsx"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","APIErrorCodes","TFAType","reducer","actions","initialState","Context","React","createContext","state","Provider","children","useReducer","dispatch","cachedActions","useMemo","key","boundActions","value","action","type","isAuthenticated","payload","status","setIsAuth","error","message","detailedMessage","detailed_message","APP_ID_HEADER_KEY","AUTHORIZATION_HEADER_KEY","config","tokenService","defaultHeaders","catchNetworkErrorHandler","indexOf","console","NetworkError","window","location","protocol","host","checkStatusCodeAndGetJSON","r","__async","ok","json","this","baseUrl","url","replace","appId","path","options","send","__spreadValues","method","data","body","JSON","stringify","init","headers","fetch","catch","getToken","token","get","post","scopes","storeToken","user","put","email","password","deviceToken","device_token","provider","redirectUrl","callbackUrl","opts","width","height","popUp","dataForm","document","createElement","style","display","target","params","URLSearchParams","set","join","toString","appendChild","left","screenX","outerWidth","top","screenY","outerHeight","open","submit","assign","tfa_code","refresh_token","response","access_token","saveToken","jwtRegex","INVALID_TOKEN_ERROR","storageType","accessKey","refreshKey","preffix","access","refresh","isAccessible","tokenType","setItem","getItem","removeItem","tokenManager","audience","issuer","validateToken","removeToken","reject","jwtPayload","parseJWT","isJwtExpired","isJWTExpired","aud","includes","iss","base64Url","split","exp","base64","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","slice","parse","now","Date","getTime","deleteToken","flow","redirectUri","encodeURIComponent","href","baseParams","urlParams","postLogoutRedirectUri","urls","signup","signin","logout","renew","default","getUrl","identifo","isAuth","autoRenew","urlBuilder","api","handleToken","createSignupUrl","createSigninUrl","resetAuthValues","createLogoutUrl","getTokenFromUrl","handleVerification","hash","search","tokens","accessToken","refreshToken","test","renewSession","renewSessionWithToken","renewToken","l","Demo","useState","result","setResult","useContext","AppContext","className","onClick","undefined","t","log","to","Header","memo","App","Callback","useEffect","a","handleAuthentication","Root","useEnsureAuthentication","exact","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","APIErrorCodes2","TFAType2","ApiError","__defProp$1","Object","defineProperty","__getOwnPropSymbols$1","getOwnPropertySymbols","__hasOwnProp$1","prototype","hasOwnProperty","__propIsEnum$1","propertyIsEnumerable","__defNormalProp$1","obj","enumerable","configurable","writable","__spreadValues$1","b","prop","call","__async$2","__this","__arguments","generator","fulfilled","step","next","rejected","throw","x","done","apply","Api","_a","_b","_0","_1","_2","_3","arguments","_c","LocalStorage","__async$1","TokenService","UrlBuilder","__defProp","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","IdentifoAuth","emailRegex","IdentifoForm$1","__registerHost","attachShadow","complete","createEvent","route","theme","afterLoginRedirect","phone","lastResponse","require_2fa","enabled_2fa","loginCatchRedirect","PleaseEnableTFA","lastError","emit","auth","login","openRoute","processError","federatedRedirectUrl","origin","pathname","federatedLogin","validateEmail","register","verifyTFA","tfaCode","tfaType","TFATypeSMS","updateUser","new_phone","enableTFA","provisioning_uri","provisioningURI","provisioningQR","provisioning_qr","requestResetPassword","success","resetPassword","event","username","name","_d","_e","_f","h","class","placeholder","onInput","emailChange","onKeyPress","signIn","passwordChange","role","disabled","federatedProviders","length","loginWith","src","getAssetPath","alt","signUp","phoneChange","TFATypeApp","setupTFA","TFATypeEmail","tfaCodeChange","restorePassword","setNewPassword","debug","getAppSettings","settings","registrationForbidden","URL","searchParams","u","sp","history","replaceState","title","federatedLoginComplete","Host","renderRoute","HTMLElement","IdentifoForm","proxyCustomElement","setAssetPath","customElements","forEach","cmp","is","define","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7f9b6d13.chunk.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 50;","/* eslint-disable camelcase */\nexport enum APIErrorCodes {\n  PleaseEnableTFA = 'error.api.request.2fa.please_enable',\n  NetworkError = 'error.network',\n}\n\nexport enum TFAType {\n  TFATypeApp = 'app',\n  TFATypeSMS = 'sms',\n  TFATypeEmail = 'email',\n}\nexport interface ApiRequestError {\n  error: {\n    detailed_message?: string;\n    id?: APIErrorCodes;\n    message?: string;\n    status?: number;\n  };\n}\nexport class ApiError extends Error {\n  detailedMessage?: string;\n\n  id?: APIErrorCodes;\n\n  status?: number;\n\n  constructor(error?: ApiRequestError['error']) {\n    super(error?.message || 'Unknown API error');\n    this.detailedMessage = error?.detailed_message;\n    this.id = error?.id;\n    this.status = error?.status;\n  }\n}\nexport interface LoginResponse {\n  access_token?: string;\n  refresh_token?: string;\n  require_2fa: boolean;\n  enabled_2fa: boolean;\n  user: {\n    active: boolean;\n    email?: string;\n    id: string;\n    latest_login_time: number;\n    num_of_logins: number;\n    username?: string;\n    tfa_info: { hotp_expired_at: string };\n    phone?: string;\n  };\n  scopes?: string[];\n  callbackUrl?: string;\n}\nexport interface EnableTFAResponse {\n  provisioning_uri?: string;\n  provisioning_qr?: string;\n  access_token?: string;\n}\nexport interface AppSettingsResponse {\n  anonymousResitrationAllowed: boolean;\n  active: boolean;\n  description: string;\n  id: string;\n  newUserDefaultRole: string;\n  offline: boolean;\n  registrationForbidden: boolean;\n  tfaType: TFAType;\n  federatedProviders: string[];\n}\n\nexport interface User {\n  id: string;\n  username: string;\n  email: string;\n  phone: string;\n  active: boolean;\n  tfa_info: {\n    is_enabled: boolean;\n  };\n  num_of_logins: number;\n  latest_login_time: number;\n  access_role: string;\n  anonymous: boolean;\n  federated_ids: string[];\n}\nexport interface UpdateUser {\n  new_email?: string;\n  new_phone?: string;\n}\nexport interface SuccessResponse {\n  result: 'ok';\n}\n\nexport type FederatedLoginProvider = 'apple' | 'google' | 'facebook';\n","import { ActionType } from \"../types/type\"\nimport { createContext } from '../utils/createContext'\nexport type InitialState = typeof initialState;\nexport type AppReducer = typeof reducer;\n\nconst initialState = {\n    isAuthenticated: false\n}\n\nconst reducer = (state: InitialState, action: ActionType): InitialState => {\n    switch (action.type) {\n        case 'SET_IS_AUTHENTICATED':\n            return { ...state, isAuthenticated: action.payload.status }\n        default:\n            return state\n    }\n}\n\nconst actions = {\n    setIsAuth: (dispatch: any) => (status: boolean): void => {\n        dispatch({ type: 'SET_IS_AUTHENTICATED', payload: { status } })\n    },\n};\n\nexport type UnboundedActions = typeof actions;\nexport type getActions<T extends { [key: string]: (dispatch: any) => (...args: any[]) => any }> = {\n    [key in keyof T]: ReturnType<T[key]>;\n  };\nexport type BoundedActions = getActions<typeof actions>;\n\nexport const { Context, Provider } = createContext(reducer,  actions, initialState)\n","import React, { FC, useMemo, useReducer } from 'react';\nimport { BoundedActions, AppReducer, InitialState, UnboundedActions } from '../context/app-context';\ntype AppContextType = {\n    state: InitialState;\n    actions: BoundedActions;\n};\nexport const createContext = (reducer: AppReducer, actions: UnboundedActions, initialState: InitialState) => {\n\n    const Context = React.createContext<AppContextType>({ state: initialState, actions });\n\n    const Provider: FC = ({ children }) => {\n        const [state, dispatch] = useReducer(reducer, initialState);\n        const cachedActions:BoundedActions = useMemo(() => {\n            let boundActions: BoundedActions = {} as BoundedActions;\n            let key: keyof UnboundedActions;\n            for (key in actions) {\n                boundActions[key] = actions[key](dispatch) as any;\n            };\n            return boundActions\n        }, [])\n\n        return (\n            <Context.Provider value={{ state, actions: cachedActions } as any}>\n                {children}\n            </Context.Provider>\n        )\n    }\n    return { Context, Provider };\n}","import TokenService from '../tokenService';\nimport { IdentifoConfig } from '../types/types';\nimport {\n  AppSettingsResponse,\n  EnableTFAResponse,\n  LoginResponse,\n  SuccessResponse,\n  UpdateUser,\n  User,\n  ApiRequestError,\n  ApiError,\n  APIErrorCodes,\n  FederatedLoginProvider,\n} from './model';\n\nconst APP_ID_HEADER_KEY = 'X-Identifo-Clientid';\nconst AUTHORIZATION_HEADER_KEY = 'Authorization';\n\nexport class Api {\n  baseUrl: string;\n\n  appId: string;\n\n  defaultHeaders = {\n    [APP_ID_HEADER_KEY]: '',\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  };\n\n  catchNetworkErrorHandler = (e: TypeError): never => {\n    if (\n      e.message === 'Network Error' ||\n      e.message === 'Failed to fetch' ||\n      e.message === 'Preflight response is not successful' ||\n      e.message.indexOf('is not allowed by Access-Control-Allow-Origin') > -1\n    ) {\n      // eslint-disable-next-line no-console\n      console.error(e.message);\n      throw new ApiError({\n        id: APIErrorCodes.NetworkError,\n        status: 0,\n        message: 'Configuration error',\n        detailed_message:\n          'Please check Identifo URL and add \"' +\n          `${window.location.protocol}//${window.location.host}\" ` +\n          'to \"REDIRECT URLS\" in Identifo app settings.',\n      });\n    }\n    throw e;\n  };\n\n  checkStatusCodeAndGetJSON = async (r: Response): Promise<any> => {\n    if (!r.ok) {\n      const error = (await r.json()) as ApiRequestError;\n      throw new ApiError(error?.error);\n    }\n    return r.json();\n  };\n\n  constructor(private config: IdentifoConfig, private tokenService: TokenService) {\n    // remove trailing slash if exist\n    this.baseUrl = config.url.replace(/\\/$/, '');\n    this.defaultHeaders[APP_ID_HEADER_KEY] = config.appId;\n    this.appId = config.appId;\n  }\n\n  get<T>(path: string, options?: RequestInit): Promise<T> {\n    return this.send(path, { method: 'GET', ...options });\n  }\n\n  put<T>(path: string, data: unknown, options?: RequestInit): Promise<T> {\n    return this.send(path, { method: 'PUT', body: JSON.stringify(data), ...options });\n  }\n\n  post<T>(path: string, data: unknown, options?: RequestInit): Promise<T> {\n    return this.send(path, { method: 'POST', body: JSON.stringify(data), ...options });\n  }\n\n  send<T>(path: string, options?: RequestInit): Promise<T> {\n    const init = { ...options };\n    init.headers = {\n      ...init.headers,\n      ...this.defaultHeaders,\n    };\n    return fetch(`${this.baseUrl}${path}`, init)\n      .catch(this.catchNetworkErrorHandler)\n      .then(this.checkStatusCodeAndGetJSON)\n      .then((value) => value as T);\n  }\n\n  async getUser(): Promise<User> {\n    if (!this.tokenService.getToken()?.token) {\n      throw new Error('No token in token service.');\n    }\n    return this.get<User>('/me', {\n      headers: {\n        [AUTHORIZATION_HEADER_KEY]: `Bearer ${this.tokenService.getToken()?.token}`,\n      },\n    });\n  }\n\n  async renewToken(): Promise<LoginResponse> {\n    if (!this.tokenService.getToken('refresh')?.token) {\n      throw new Error('No token in token service.');\n    }\n    return this.post<LoginResponse>(\n      '/auth/token',\n      { scopes: this.config.scopes },\n      {\n        headers: {\n          [AUTHORIZATION_HEADER_KEY]: `Bearer ${this.tokenService.getToken('refresh')?.token}`,\n        },\n      },\n    ).then((r) => this.storeToken(r));\n  }\n\n  async updateUser(user: UpdateUser): Promise<User> {\n    if (!this.tokenService.getToken()?.token) {\n      throw new Error('No token in token service.');\n    }\n    return this.put<User>('/me', user, {\n      headers: {\n        [AUTHORIZATION_HEADER_KEY]: `Bearer ${this.tokenService.getToken('access')?.token}`,\n      },\n    });\n  }\n\n  async login(email: string, password: string, deviceToken: string, scopes: string[]): Promise<LoginResponse> {\n    const data = {\n      email,\n      password,\n      device_token: deviceToken,\n      scopes,\n    };\n\n    return this.post<LoginResponse>('/auth/login', data).then((r) => this.storeToken(r));\n  }\n  // After complete login on provider browser will be redirected to redirectUrl\n  // callbackUrl will be stored in sesson and returned after successfull login complete\n  async federatedLogin(\n    provider: FederatedLoginProvider,\n    scopes: string[],\n    redirectUrl: string,\n    callbackUrl?: string,\n    opts: { width?: number; height?: number; popUp?: boolean } = { width: 600, height: 800, popUp: false },\n  ) {\n    var dataForm = document.createElement('form');\n    dataForm.style.display = 'none';\n    if (opts.popUp) {\n      dataForm.target = 'TargetWindow'; //Make sure the window name is same as this value\n    }\n    dataForm.method = 'POST';\n    const params = new URLSearchParams();\n    params.set('appId', this.config.appId);\n    params.set('provider', provider);\n    params.set('scopes', scopes.join(','));\n    params.set('redirectUrl', redirectUrl);\n    if (callbackUrl) {\n      params.set('callbackUrl', callbackUrl);\n    }\n    dataForm.action = `${this.baseUrl}/auth/federated?${params.toString()}`;\n\n    document.body.appendChild(dataForm);\n\n    if (opts.popUp) {\n      const left = window.screenX + window.outerWidth / 2 - (opts.width || 600) / 2;\n      const top = window.screenY + window.outerHeight / 2 - (opts.height || 800) / 2;\n      var postWindow = window.open(\n        '',\n        'TargetWindow',\n        `status=0,title=0,height=${opts.height},width=${opts.width},top=${top},left=${left},scrollbars=1`,\n      );\n      if (postWindow) {\n        dataForm.submit();\n      }\n    } else {\n      window.location.assign(`${this.baseUrl}/auth/federated?${params.toString()}`);\n      // dataForm.submit();\n    }\n  }\n\n  async federatedLoginComplete(params: URLSearchParams): Promise<LoginResponse> {\n    return this.get<LoginResponse>(`/auth/federated/complete?${params.toString()}`).then((r) => this.storeToken(r));\n  }\n\n  async register(email: string, password: string, scopes: string[]): Promise<LoginResponse> {\n    const data = {\n      email,\n      password,\n      scopes,\n    };\n\n    return this.post<LoginResponse>('/auth/register', data).then((r) => this.storeToken(r));\n  }\n\n  async requestResetPassword(email: string): Promise<SuccessResponse> {\n    const data = {\n      email,\n    };\n\n    return this.post<SuccessResponse>('/auth/request_reset_password', data);\n  }\n\n  async resetPassword(password: string): Promise<SuccessResponse> {\n    if (!this.tokenService.getToken()?.token) {\n      throw new Error('No token in token service.');\n    }\n    const data = {\n      password,\n    };\n\n    return this.post<SuccessResponse>('/auth/reset_password', data, {\n      headers: {\n        [AUTHORIZATION_HEADER_KEY]: `Bearer ${this.tokenService.getToken()?.token}`,\n      },\n    });\n  }\n\n  async getAppSettings(): Promise<AppSettingsResponse> {\n    return this.get<AppSettingsResponse>('/auth/app_settings');\n  }\n\n  async enableTFA(): Promise<EnableTFAResponse> {\n    if (!this.tokenService.getToken()?.token) {\n      throw new Error('No token in token service.');\n    }\n    return this.put<EnableTFAResponse>(\n      '/auth/tfa/enable',\n      {},\n      {\n        headers: { [AUTHORIZATION_HEADER_KEY]: `BEARER ${this.tokenService.getToken()?.token}` },\n      },\n    );\n  }\n\n  async verifyTFA(code: string, scopes: string[]): Promise<LoginResponse> {\n    if (!this.tokenService.getToken()?.token) {\n      throw new Error('No token in token service.');\n    }\n    return this.post<LoginResponse>(\n      '/auth/tfa/login',\n      { tfa_code: code, scopes },\n      { headers: { [AUTHORIZATION_HEADER_KEY]: `BEARER ${this.tokenService.getToken()?.token}` } },\n    ).then((r) => this.storeToken(r));\n  }\n\n  async logout(): Promise<SuccessResponse> {\n    if (!this.tokenService.getToken()?.token) {\n      throw new Error('No token in token service.');\n    }\n    return this.post<SuccessResponse>(\n      '/me/logout',\n      {\n        refresh_token: this.tokenService.getToken('refresh')?.token,\n      },\n      {\n        headers: {\n          [AUTHORIZATION_HEADER_KEY]: `Bearer ${this.tokenService.getToken()?.token}`,\n        },\n      },\n    );\n  }\n\n  storeToken(response: LoginResponse): LoginResponse {\n    if (response.access_token) {\n      this.tokenService.saveToken(response.access_token, 'access');\n    }\n    if (response.refresh_token) {\n      this.tokenService.saveToken(response.refresh_token, 'refresh');\n    }\n    return response;\n  }\n}\n","export const jwtRegex = /^([a-zA-Z0-9_=]+)\\.([a-zA-Z0-9_=]+)\\.([a-zA-Z0-9_\\-=]*$)/;\n\n// Error messages\n\nexport const INVALID_TOKEN_ERROR = 'Empty or invalid token';\n\n// url query params keys\nexport const TOKEN_QUERY_KEY = 'token';\nexport const REFRESH_TOKEN_QUERY_KEY = 'refresh_token';\n","import { TokenManager, TokenType } from '../types/types';\n\nclass StorageManager implements TokenManager {\n  preffix = 'identifo_';\n\n  storageType: 'localStorage' | 'sessionStorage' = 'localStorage';\n\n  access = `${this.preffix}access_token`;\n\n  refresh = `${this.preffix}refresh_token`;\n\n  isAccessible = true;\n\n  constructor(storageType: 'localStorage' | 'sessionStorage', accessKey?: string, refreshKey?: string) {\n    this.access = accessKey ? this.preffix + accessKey : this.access;\n    this.refresh = refreshKey ? this.preffix + refreshKey : this.refresh;\n    this.storageType = storageType;\n  }\n\n  saveToken(token: string, tokenType: TokenType): boolean {\n    if (token) {\n      window[this.storageType].setItem(this[tokenType], token);\n      return true;\n    }\n    return false;\n  }\n\n  getToken(tokenType: TokenType): string {\n    return window[this.storageType].getItem(this[tokenType]) ?? '';\n  }\n\n  deleteToken(tokenType: TokenType): void {\n    window[this.storageType].removeItem(this[tokenType]);\n  }\n}\n\nexport default StorageManager;\n","import StorageManager from './storage-manager';\n\nclass LocalStorage extends StorageManager {\n  constructor(accessKey?: string, refreshKey?: string) {\n    super('localStorage', accessKey, refreshKey);\n  }\n}\n\nexport default LocalStorage;\n","import { INVALID_TOKEN_ERROR } from './constants';\nimport { LocalStorageManager } from './store-manager';\nimport {\n  ClientToken, JWTPayload, TokenManager, TokenType,\n} from './types/types';\n\nclass TokenService {\n  private tokenManager: TokenManager;\n\n  constructor(tokenManager?: TokenManager) {\n    this.tokenManager = tokenManager || new LocalStorageManager();\n    // TODO: implement cookie as default\n    // this.tokenManager = tokenManager || new CoockieStorage();\n  }\n\n  async handleVerification(token: string, audience: string, issuer?: string): Promise<boolean> {\n    if (!this.tokenManager.isAccessible) return true;\n    try {\n      await this.validateToken(token, audience, issuer);\n      this.saveToken(token);\n      return true;\n    } catch (err) {\n      this.removeToken();\n      return Promise.reject(err);\n    }\n  }\n\n  async validateToken(token: string, audience: string, issuer?: string): Promise<boolean> {\n    if (!token) throw new Error(INVALID_TOKEN_ERROR);\n    const jwtPayload = this.parseJWT(token);\n    const isJwtExpired = this.isJWTExpired(jwtPayload);\n    if (jwtPayload.aud?.includes(audience) && (!issuer || jwtPayload.iss === issuer) && !isJwtExpired) {\n      return Promise.resolve(true);\n    }\n    throw new Error(INVALID_TOKEN_ERROR);\n  }\n\n  parseJWT(token: string): JWTPayload {\n    const base64Url = token.split('.')[1];\n    if (!base64Url) return { aud: [], iss: '', exp: 10 };\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    const jsonPayload = decodeURIComponent(\n      atob(base64)\n        .split('')\n        .map((c) => `%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`)\n        .join(''),\n    );\n    return JSON.parse(jsonPayload) as JWTPayload;\n  }\n\n  isJWTExpired(token: JWTPayload): boolean {\n    const now = new Date().getTime() / 1000;\n    if (token.exp && now > token.exp) {\n      return true;\n    }\n    return false;\n  }\n\n  isAuthenticated(audience: string, issuer?: string): Promise<boolean> {\n    if (!this.tokenManager.isAccessible) return Promise.resolve(true);\n    const token = this.tokenManager.getToken('access');\n    // TODO: may be change to handleAuth instead validateToken\n    return this.validateToken(token, audience, issuer);\n  }\n\n  saveToken(token: string, type: TokenType = 'access'): boolean {\n    return this.tokenManager.saveToken(token, type);\n  }\n\n  removeToken(type: TokenType = 'access'): void {\n    this.tokenManager.deleteToken(type);\n  }\n\n  getToken(type: TokenType = 'access'): ClientToken | null {\n    const token = this.tokenManager.getToken(type);\n    if (!token) return null;\n    const jwtPayload = this.parseJWT(token);\n    return { token, payload: jwtPayload };\n  }\n}\n\nexport default TokenService;\n","import { IdentifoConfig, UrlFlows } from './types/types';\n\nexport class UrlBuilder {\n  constructor(private config: IdentifoConfig) { }\n\n  getUrl(flow: UrlFlows): string {\n    const scopes = this.config.scopes?.join() || '';\n    const redirectUri = encodeURIComponent(this.config.redirectUri ?? window.location.href);\n    const baseParams = `appId=${this.config.appId}&scopes=${scopes}`;\n    const urlParams = `${baseParams}&callbackUrl=${redirectUri}`;\n    // if postLogoutRedirectUri is empty, login url will be instead\n    const postLogoutRedirectUri = this.config.postLogoutRedirectUri ?\n      `&callbackUrl=${encodeURIComponent(this.config.postLogoutRedirectUri)}` :\n      `&callbackUrl=${redirectUri}&redirectUri=${this.config.url}/web/login?${encodeURIComponent(baseParams)}`;\n\n    const urls = {\n      signup: `${this.config.url}/web/register?${urlParams}`,\n      signin: `${this.config.url}/web/login?${urlParams}`,\n      logout: `${this.config.url}/web/logout?${baseParams}${postLogoutRedirectUri}`,\n      renew: `${this.config.url}/web/token/renew?${baseParams}&redirectUri=${redirectUri}`,\n      default: 'default',\n    };\n\n    return urls[flow] || urls.default;\n  }\n\n  createSignupUrl(): string {\n    return this.getUrl('signup');\n  }\n\n  createSigninUrl(): string {\n    return this.getUrl('signin');\n  }\n\n  createLogoutUrl(): string {\n    return this.getUrl('logout');\n  }\n\n  createRenewSessionUrl(): string {\n    return this.getUrl('renew');\n  }\n}\n","// @ts-ignore\nimport { IdentifoAuth } from \"@identifo/identifo-auth-js\";\n\nexport const identifo = new IdentifoAuth({\n  // issuer: 'http://localhost:8081',\n  appId: \"c3qn2t0em84rn76pap2g\",\n  url: \"http://localhost:8081\",\n  scopes: [\"offline\"],\n  autoRenew: true,\n  redirectUri: \"http://localhost:5000/callback\",\n  // postLogoutRedirectUri:'http://localhost:5000'\n});\n","import { Api } from './api/api';\nimport { jwtRegex, REFRESH_TOKEN_QUERY_KEY, TOKEN_QUERY_KEY } from './constants';\nimport TokenService from './tokenService';\nimport { ClientToken, IdentifoConfig, UrlBuilderInit } from './types/types';\nimport { UrlBuilder } from './UrlBuilder';\n\nclass IdentifoAuth {\n  public api: Api;\n\n  public tokenService: TokenService;\n\n  public config: IdentifoConfig;\n\n  public urlBuilder: UrlBuilderInit;\n\n  private token: ClientToken | null = null;\n\n  isAuth = false;\n\n  constructor(config: IdentifoConfig) {\n    this.config = { ...config, autoRenew: config.autoRenew ?? true };\n    this.tokenService = new TokenService(config.tokenManager);\n    this.urlBuilder = new UrlBuilder(this.config);\n    this.api = new Api(config, this.tokenService);\n    this.handleToken(this.tokenService.getToken()?.token || '', 'access');\n  }\n\n  private handleToken(token: string, tokenType: 'access' | 'refresh') {\n    if (token) {\n      if (tokenType === 'access') {\n        const payload = this.tokenService.parseJWT(token);\n        this.token = { token, payload };\n        this.isAuth = true;\n        this.tokenService.saveToken(token);\n      } else {\n        this.tokenService.saveToken(token, 'refresh');\n      }\n    }\n  }\n\n  private resetAuthValues() {\n    this.token = null;\n    this.isAuth = false;\n    this.tokenService.removeToken();\n    this.tokenService.removeToken('refresh');\n  }\n\n  signup(): void {\n    window.location.href = this.urlBuilder.createSignupUrl();\n  }\n\n  signin(): void {\n    window.location.href = this.urlBuilder.createSigninUrl();\n  }\n\n  logout(): void {\n    this.resetAuthValues();\n    window.location.href = this.urlBuilder.createLogoutUrl();\n  }\n\n  async handleAuthentication(): Promise<boolean> {\n    const { access, refresh } = this.getTokenFromUrl();\n    if (!access) {\n      this.resetAuthValues();\n      return Promise.reject();\n    }\n    try {\n      await this.tokenService.handleVerification(access, this.config.appId, this.config.issuer);\n      this.handleToken(access, 'access');\n      if (refresh) {\n        this.handleToken(refresh, 'refresh');\n      }\n      return await Promise.resolve(true);\n    } catch (err) {\n      this.resetAuthValues();\n      return await Promise.reject();\n    } finally {\n      // TODO: Nikita K cahnge correct window key\n      window.location.hash = '';\n    }\n  }\n\n  private getTokenFromUrl(): { access: string; refresh: string } {\n    const urlParams = new URLSearchParams(window.location.search);\n    const tokens = { access: '', refresh: '' };\n    const accessToken = urlParams.get(TOKEN_QUERY_KEY);\n    const refreshToken = urlParams.get(REFRESH_TOKEN_QUERY_KEY);\n    if (refreshToken && jwtRegex.test(refreshToken)) {\n      tokens.refresh = refreshToken;\n    }\n    if (accessToken && jwtRegex.test(accessToken)) {\n      tokens.access = accessToken;\n    }\n    return tokens;\n  }\n\n  async getToken(): Promise<ClientToken | null> {\n    const token = this.tokenService.getToken();\n    const refreshToken = this.tokenService.getToken('refresh');\n    if (token) {\n      const isExpired = this.tokenService.isJWTExpired(token.payload);\n      if (isExpired && refreshToken) {\n        try {\n          await this.renewSession();\n          return await Promise.resolve(this.token);\n        } catch (err) {\n          this.resetAuthValues();\n          throw new Error('No token');\n        }\n      }\n      return Promise.resolve(token);\n    }\n    return Promise.resolve(null);\n  }\n\n  async renewSession(): Promise<string> {\n    try {\n      const { access, refresh } = await this.renewSessionWithToken();\n      this.handleToken(access, 'access');\n      this.handleToken(refresh, 'refresh');\n      return await Promise.resolve(access);\n    } catch (err) {\n      return Promise.reject();\n    }\n  }\n\n  private async renewSessionWithToken(): Promise<{ access: string, refresh: string }> {\n    try {\n      const tokens = await this.api.renewToken()\n        .then((l) => ({ access: l.access_token || '', refresh: l.refresh_token || '' }));\n      return tokens;\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  }\n}\nexport default IdentifoAuth;\n","import { FC, useContext, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { Header } from '../index';\nimport { Context as AppContext } from '../../context/app-context';\nimport { identifo } from \"../../services/identifo\";\n\n\nconst Demo: FC = () => {\n    const [result, setResult] = useState<any>(null);\n    const { state } = useContext(AppContext)\n    const renewSession = () => {\n        identifo.renewSession()\n            .then((t) => console.log(t))\n            .catch((e) => console.log(e))\n    }\n\n    const getToken = () => {\n        const token = identifo.getToken();\n        setResult(JSON.stringify(token, undefined, 4));\n    }\n    const getAuth = () => {\n        setResult(JSON.stringify(identifo.isAuth, undefined, 4));\n    }\n\n    if (!state.isAuthenticated) return <Redirect to='/' />\n    return (\n        <>\n            <Header />\n            <div className='demo'>\n                <div className=\"demo_buttons\">\n                    <button className='primary-btn' onClick={getAuth}>Get Authenticated</button>\n                    <button className='primary-btn' onClick={getToken}>Get Token</button>\n                    <button className='primary-btn' onClick={renewSession}>Renew Session</button>\n                </div>\n                <div className=\"demo_result\">\n                    {result && <pre>{result}</pre>}\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Demo;","import React, { FC, useContext } from 'react';\nimport { Context as AppContext } from '../../context/app-context';\nimport { identifo } from '../../services/identifo';\n\nconst Header: FC = React.memo(() => {\n    const { state } = useContext(AppContext)\n    const login = () => {\n        identifo.signin()\n    }\n    const signUp = () => {\n        identifo.signup()\n    }\n    const logout = () => {\n        identifo.logout()\n    }\n\n    return (\n        <header className='header'>\n            <div className=\"container\">\n                <div className=\"header_in\">\n                    <div className=\"header_logo\">\n                        <span>identifo.js</span>\n                        <span>Example</span>\n                    </div>\n                    <div className=\"header_buttons\">\n                        {\n                            !state.isAuthenticated ?\n                                <>\n                                    <button className=\"outlined-btn\" onClick={login}>Login</button>\n                                    <button className=\"primary-btn\" onClick={signUp}>Sign up</button>\n                                </>\n                                :\n                                <>\n                                    <button className=\"primary-btn\" onClick={logout}>Logout</button>\n                                </>\n                        }\n                    </div>\n                </div>\n            </div>\n        </header>\n    );\n})\n\nexport default Header;","import React, { useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { Header, Main } from \"../components\";\nimport { Context as AppContext } from \"../context/app-context\";\n\nfunction App() {\n  const { state } = useContext(AppContext);\n  if (state.isAuthenticated) return <Redirect to=\"/demo\" />;\n  return (\n    <div className=\"App\">\n      <Header />\n      <identifo-form\n        url=\"http://localhost:8081\"\n        app-id=\"c3vqvhea0brnc4dvdnvg\"\n      ></identifo-form>\n    </div>\n  );\n}\n\nexport default App;\n","import { attachShadow, createEvent, h, getAssetPath, Host, proxyCustomElement } from '@stencil/core/internal/client';\nexport { setAssetPath, setPlatformOptions } from '@stencil/core/internal/client';\n\nvar APIErrorCodes;\n(function(APIErrorCodes2) {\n  APIErrorCodes2[\"PleaseEnableTFA\"] = \"error.api.request.2fa.please_enable\";\n  APIErrorCodes2[\"NetworkError\"] = \"error.network\";\n})(APIErrorCodes || (APIErrorCodes = {}));\nvar TFAType;\n(function(TFAType2) {\n  TFAType2[\"TFATypeApp\"] = \"app\";\n  TFAType2[\"TFATypeSMS\"] = \"sms\";\n  TFAType2[\"TFATypeEmail\"] = \"email\";\n})(TFAType || (TFAType = {}));\nclass ApiError extends Error {\n  constructor(error) {\n    super((error == null ? void 0 : error.message) || \"Unknown API error\");\n    this.detailedMessage = error == null ? void 0 : error.detailed_message;\n    this.id = error == null ? void 0 : error.id;\n    this.status = error == null ? void 0 : error.status;\n  }\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$1 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$1.call(b, prop))\n      __defNormalProp$1(a, prop, b[prop]);\n  if (__getOwnPropSymbols$1)\n    for (var prop of __getOwnPropSymbols$1(b)) {\n      if (__propIsEnum$1.call(b, prop))\n        __defNormalProp$1(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __async$2 = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nconst APP_ID_HEADER_KEY = \"X-Identifo-Clientid\";\nconst AUTHORIZATION_HEADER_KEY = \"Authorization\";\nclass Api {\n  constructor(config, tokenService) {\n    this.config = config;\n    this.tokenService = tokenService;\n    this.defaultHeaders = {\n      [APP_ID_HEADER_KEY]: \"\",\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    };\n    this.catchNetworkErrorHandler = (e) => {\n      if (e.message === \"Network Error\" || e.message === \"Failed to fetch\" || e.message === \"Preflight response is not successful\" || e.message.indexOf(\"is not allowed by Access-Control-Allow-Origin\") > -1) {\n        console.error(e.message);\n        throw new ApiError({\n          id: APIErrorCodes.NetworkError,\n          status: 0,\n          message: \"Configuration error\",\n          detailed_message: `Please check Identifo URL and add \"${window.location.protocol}//${window.location.host}\" to \"REDIRECT URLS\" in Identifo app settings.`\n        });\n      }\n      throw e;\n    };\n    this.checkStatusCodeAndGetJSON = (r) => __async$2(this, null, function* () {\n      if (!r.ok) {\n        const error = yield r.json();\n        throw new ApiError(error == null ? void 0 : error.error);\n      }\n      return r.json();\n    });\n    this.baseUrl = config.url.replace(/\\/$/, \"\");\n    this.defaultHeaders[APP_ID_HEADER_KEY] = config.appId;\n    this.appId = config.appId;\n  }\n  get(path, options) {\n    return this.send(path, __spreadValues$1({ method: \"GET\" }, options));\n  }\n  put(path, data, options) {\n    return this.send(path, __spreadValues$1({ method: \"PUT\", body: JSON.stringify(data) }, options));\n  }\n  post(path, data, options) {\n    return this.send(path, __spreadValues$1({ method: \"POST\", body: JSON.stringify(data) }, options));\n  }\n  send(path, options) {\n    const init = __spreadValues$1({}, options);\n    init.headers = __spreadValues$1(__spreadValues$1({}, init.headers), this.defaultHeaders);\n    return fetch(`${this.baseUrl}${path}`, init).catch(this.catchNetworkErrorHandler).then(this.checkStatusCodeAndGetJSON).then((value) => value);\n  }\n  getUser() {\n    return __async$2(this, null, function* () {\n      var _a, _b;\n      if (!((_a = this.tokenService.getToken()) == null ? void 0 : _a.token)) {\n        throw new Error(\"No token in token service.\");\n      }\n      return this.get(\"/me\", {\n        headers: {\n          [AUTHORIZATION_HEADER_KEY]: `Bearer ${(_b = this.tokenService.getToken()) == null ? void 0 : _b.token}`\n        }\n      });\n    });\n  }\n  renewToken() {\n    return __async$2(this, null, function* () {\n      var _a, _b;\n      if (!((_a = this.tokenService.getToken(\"refresh\")) == null ? void 0 : _a.token)) {\n        throw new Error(\"No token in token service.\");\n      }\n      return this.post(\"/auth/token\", { scopes: this.config.scopes }, {\n        headers: {\n          [AUTHORIZATION_HEADER_KEY]: `Bearer ${(_b = this.tokenService.getToken(\"refresh\")) == null ? void 0 : _b.token}`\n        }\n      }).then((r) => this.storeToken(r));\n    });\n  }\n  updateUser(user) {\n    return __async$2(this, null, function* () {\n      var _a, _b;\n      if (!((_a = this.tokenService.getToken()) == null ? void 0 : _a.token)) {\n        throw new Error(\"No token in token service.\");\n      }\n      return this.put(\"/me\", user, {\n        headers: {\n          [AUTHORIZATION_HEADER_KEY]: `Bearer ${(_b = this.tokenService.getToken(\"access\")) == null ? void 0 : _b.token}`\n        }\n      });\n    });\n  }\n  login(email, password, deviceToken, scopes) {\n    return __async$2(this, null, function* () {\n      const data = {\n        email,\n        password,\n        device_token: deviceToken,\n        scopes\n      };\n      return this.post(\"/auth/login\", data).then((r) => this.storeToken(r));\n    });\n  }\n  federatedLogin(_0, _1, _2, _3) {\n    return __async$2(this, arguments, function* (provider, scopes, redirectUrl, callbackUrl, opts = { width: 600, height: 800, popUp: false }) {\n      var dataForm = document.createElement(\"form\");\n      dataForm.style.display = \"none\";\n      if (opts.popUp) {\n        dataForm.target = \"TargetWindow\";\n      }\n      dataForm.method = \"POST\";\n      const params = new URLSearchParams();\n      params.set(\"appId\", this.config.appId);\n      params.set(\"provider\", provider);\n      params.set(\"scopes\", scopes.join(\",\"));\n      params.set(\"redirectUrl\", redirectUrl);\n      if (callbackUrl) {\n        params.set(\"callbackUrl\", callbackUrl);\n      }\n      dataForm.action = `${this.baseUrl}/auth/federated?${params.toString()}`;\n      document.body.appendChild(dataForm);\n      if (opts.popUp) {\n        const left = window.screenX + window.outerWidth / 2 - (opts.width || 600) / 2;\n        const top = window.screenY + window.outerHeight / 2 - (opts.height || 800) / 2;\n        var postWindow = window.open(\"\", \"TargetWindow\", `status=0,title=0,height=${opts.height},width=${opts.width},top=${top},left=${left},scrollbars=1`);\n        if (postWindow) {\n          dataForm.submit();\n        }\n      } else {\n        dataForm.submit();\n      }\n    });\n  }\n  federatedLoginComplete(params) {\n    return __async$2(this, null, function* () {\n      return this.get(`/auth/federated/complete?${params.toString()}`).then((r) => this.storeToken(r));\n    });\n  }\n  register(email, password, scopes) {\n    return __async$2(this, null, function* () {\n      const data = {\n        email,\n        password,\n        scopes\n      };\n      return this.post(\"/auth/register\", data).then((r) => this.storeToken(r));\n    });\n  }\n  requestResetPassword(email) {\n    return __async$2(this, null, function* () {\n      const data = {\n        email\n      };\n      return this.post(\"/auth/request_reset_password\", data);\n    });\n  }\n  resetPassword(password) {\n    return __async$2(this, null, function* () {\n      var _a, _b;\n      if (!((_a = this.tokenService.getToken()) == null ? void 0 : _a.token)) {\n        throw new Error(\"No token in token service.\");\n      }\n      const data = {\n        password\n      };\n      return this.post(\"/auth/reset_password\", data, {\n        headers: {\n          [AUTHORIZATION_HEADER_KEY]: `Bearer ${(_b = this.tokenService.getToken()) == null ? void 0 : _b.token}`\n        }\n      });\n    });\n  }\n  getAppSettings() {\n    return __async$2(this, null, function* () {\n      return this.get(\"/auth/app_settings\");\n    });\n  }\n  enableTFA() {\n    return __async$2(this, null, function* () {\n      var _a, _b;\n      if (!((_a = this.tokenService.getToken()) == null ? void 0 : _a.token)) {\n        throw new Error(\"No token in token service.\");\n      }\n      return this.put(\"/auth/tfa/enable\", {}, {\n        headers: { [AUTHORIZATION_HEADER_KEY]: `BEARER ${(_b = this.tokenService.getToken()) == null ? void 0 : _b.token}` }\n      });\n    });\n  }\n  verifyTFA(code, scopes) {\n    return __async$2(this, null, function* () {\n      var _a, _b;\n      if (!((_a = this.tokenService.getToken()) == null ? void 0 : _a.token)) {\n        throw new Error(\"No token in token service.\");\n      }\n      return this.post(\"/auth/tfa/login\", { tfa_code: code, scopes }, { headers: { [AUTHORIZATION_HEADER_KEY]: `BEARER ${(_b = this.tokenService.getToken()) == null ? void 0 : _b.token}` } }).then((r) => this.storeToken(r));\n    });\n  }\n  logout() {\n    return __async$2(this, null, function* () {\n      var _a, _b, _c;\n      if (!((_a = this.tokenService.getToken()) == null ? void 0 : _a.token)) {\n        throw new Error(\"No token in token service.\");\n      }\n      return this.post(\"/me/logout\", {\n        refresh_token: (_b = this.tokenService.getToken(\"refresh\")) == null ? void 0 : _b.token\n      }, {\n        headers: {\n          [AUTHORIZATION_HEADER_KEY]: `Bearer ${(_c = this.tokenService.getToken()) == null ? void 0 : _c.token}`\n        }\n      });\n    });\n  }\n  storeToken(response) {\n    if (response.access_token) {\n      this.tokenService.saveToken(response.access_token, \"access\");\n    }\n    if (response.refresh_token) {\n      this.tokenService.saveToken(response.refresh_token, \"refresh\");\n    }\n    return response;\n  }\n}\n\nconst jwtRegex = /^([a-zA-Z0-9_=]+)\\.([a-zA-Z0-9_=]+)\\.([a-zA-Z0-9_\\-=]*$)/;\nconst INVALID_TOKEN_ERROR = \"Empty or invalid token\";\nconst TOKEN_QUERY_KEY = \"token\";\nconst REFRESH_TOKEN_QUERY_KEY = \"refresh_token\";\n\nclass StorageManager {\n  constructor(storageType, accessKey, refreshKey) {\n    this.preffix = \"identifo_\";\n    this.storageType = \"localStorage\";\n    this.access = `${this.preffix}access_token`;\n    this.refresh = `${this.preffix}refresh_token`;\n    this.isAccessible = true;\n    this.access = accessKey ? this.preffix + accessKey : this.access;\n    this.refresh = refreshKey ? this.preffix + refreshKey : this.refresh;\n    this.storageType = storageType;\n  }\n  saveToken(token, tokenType) {\n    if (token) {\n      window[this.storageType].setItem(this[tokenType], token);\n      return true;\n    }\n    return false;\n  }\n  getToken(tokenType) {\n    var _a;\n    return (_a = window[this.storageType].getItem(this[tokenType])) != null ? _a : \"\";\n  }\n  deleteToken(tokenType) {\n    window[this.storageType].removeItem(this[tokenType]);\n  }\n}\n\nclass LocalStorage extends StorageManager {\n  constructor(accessKey, refreshKey) {\n    super(\"localStorage\", accessKey, refreshKey);\n  }\n}\n\nvar __async$1 = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nclass TokenService {\n  constructor(tokenManager) {\n    this.tokenManager = tokenManager || new LocalStorage();\n  }\n  handleVerification(token, audience, issuer) {\n    return __async$1(this, null, function* () {\n      if (!this.tokenManager.isAccessible)\n        return true;\n      try {\n        yield this.validateToken(token, audience, issuer);\n        this.saveToken(token);\n        return true;\n      } catch (err) {\n        this.removeToken();\n        return Promise.reject(err);\n      }\n    });\n  }\n  validateToken(token, audience, issuer) {\n    return __async$1(this, null, function* () {\n      var _a;\n      if (!token)\n        throw new Error(INVALID_TOKEN_ERROR);\n      const jwtPayload = this.parseJWT(token);\n      const isJwtExpired = this.isJWTExpired(jwtPayload);\n      if (((_a = jwtPayload.aud) == null ? void 0 : _a.includes(audience)) && (!issuer || jwtPayload.iss === issuer) && !isJwtExpired) {\n        return Promise.resolve(true);\n      }\n      throw new Error(INVALID_TOKEN_ERROR);\n    });\n  }\n  parseJWT(token) {\n    const base64Url = token.split(\".\")[1];\n    if (!base64Url)\n      return { aud: [], iss: \"\", exp: 10 };\n    const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const jsonPayload = decodeURIComponent(atob(base64).split(\"\").map((c) => `%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`).join(\"\"));\n    return JSON.parse(jsonPayload);\n  }\n  isJWTExpired(token) {\n    const now = new Date().getTime() / 1e3;\n    if (token.exp && now > token.exp) {\n      return true;\n    }\n    return false;\n  }\n  isAuthenticated(audience, issuer) {\n    if (!this.tokenManager.isAccessible)\n      return Promise.resolve(true);\n    const token = this.tokenManager.getToken(\"access\");\n    return this.validateToken(token, audience, issuer);\n  }\n  saveToken(token, type = \"access\") {\n    return this.tokenManager.saveToken(token, type);\n  }\n  removeToken(type = \"access\") {\n    this.tokenManager.deleteToken(type);\n  }\n  getToken(type = \"access\") {\n    const token = this.tokenManager.getToken(type);\n    if (!token)\n      return null;\n    const jwtPayload = this.parseJWT(token);\n    return { token, payload: jwtPayload };\n  }\n}\n\nclass UrlBuilder {\n  constructor(config) {\n    this.config = config;\n  }\n  getUrl(flow) {\n    var _a, _b;\n    const scopes = ((_a = this.config.scopes) == null ? void 0 : _a.join()) || \"\";\n    const redirectUri = encodeURIComponent((_b = this.config.redirectUri) != null ? _b : window.location.href);\n    const baseParams = `appId=${this.config.appId}&scopes=${scopes}`;\n    const urlParams = `${baseParams}&callbackUrl=${redirectUri}`;\n    const postLogoutRedirectUri = this.config.postLogoutRedirectUri ? `&callbackUrl=${encodeURIComponent(this.config.postLogoutRedirectUri)}` : `&callbackUrl=${redirectUri}&redirectUri=${this.config.url}/web/login?${encodeURIComponent(baseParams)}`;\n    const urls = {\n      signup: `${this.config.url}/web/register?${urlParams}`,\n      signin: `${this.config.url}/web/login?${urlParams}`,\n      logout: `${this.config.url}/web/logout?${baseParams}${postLogoutRedirectUri}`,\n      renew: `${this.config.url}/web/token/renew?${baseParams}&redirectUri=${redirectUri}`,\n      default: \"default\"\n    };\n    return urls[flow] || urls.default;\n  }\n  createSignupUrl() {\n    return this.getUrl(\"signup\");\n  }\n  createSigninUrl() {\n    return this.getUrl(\"signin\");\n  }\n  createLogoutUrl() {\n    return this.getUrl(\"logout\");\n  }\n  createRenewSessionUrl() {\n    return this.getUrl(\"renew\");\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nclass IdentifoAuth {\n  constructor(config) {\n    this.token = null;\n    this.isAuth = false;\n    var _a, _b;\n    this.config = __spreadProps(__spreadValues({}, config), { autoRenew: (_a = config.autoRenew) != null ? _a : true });\n    this.tokenService = new TokenService(config.tokenManager);\n    this.urlBuilder = new UrlBuilder(this.config);\n    this.api = new Api(config, this.tokenService);\n    this.handleToken(((_b = this.tokenService.getToken()) == null ? void 0 : _b.token) || \"\", \"access\");\n  }\n  handleToken(token, tokenType) {\n    if (token) {\n      if (tokenType === \"access\") {\n        const payload = this.tokenService.parseJWT(token);\n        this.token = { token, payload };\n        this.isAuth = true;\n        this.tokenService.saveToken(token);\n      } else {\n        this.tokenService.saveToken(token, \"refresh\");\n      }\n    }\n  }\n  resetAuthValues() {\n    this.token = null;\n    this.isAuth = false;\n    this.tokenService.removeToken();\n    this.tokenService.removeToken(\"refresh\");\n  }\n  signup() {\n    window.location.href = this.urlBuilder.createSignupUrl();\n  }\n  signin() {\n    window.location.href = this.urlBuilder.createSigninUrl();\n  }\n  logout() {\n    this.resetAuthValues();\n    window.location.href = this.urlBuilder.createLogoutUrl();\n  }\n  handleAuthentication() {\n    return __async(this, null, function* () {\n      const { access, refresh } = this.getTokenFromUrl();\n      if (!access) {\n        this.resetAuthValues();\n        return Promise.reject();\n      }\n      try {\n        yield this.tokenService.handleVerification(access, this.config.appId, this.config.issuer);\n        this.handleToken(access, \"access\");\n        if (refresh) {\n          this.handleToken(refresh, \"refresh\");\n        }\n        return yield Promise.resolve(true);\n      } catch (err) {\n        this.resetAuthValues();\n        return yield Promise.reject();\n      } finally {\n        window.location.hash = \"\";\n      }\n    });\n  }\n  getTokenFromUrl() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const tokens = { access: \"\", refresh: \"\" };\n    const accessToken = urlParams.get(TOKEN_QUERY_KEY);\n    const refreshToken = urlParams.get(REFRESH_TOKEN_QUERY_KEY);\n    if (refreshToken && jwtRegex.test(refreshToken)) {\n      tokens.refresh = refreshToken;\n    }\n    if (accessToken && jwtRegex.test(accessToken)) {\n      tokens.access = accessToken;\n    }\n    return tokens;\n  }\n  getToken() {\n    return __async(this, null, function* () {\n      const token = this.tokenService.getToken();\n      const refreshToken = this.tokenService.getToken(\"refresh\");\n      if (token) {\n        const isExpired = this.tokenService.isJWTExpired(token.payload);\n        if (isExpired && refreshToken) {\n          try {\n            yield this.renewSession();\n            return yield Promise.resolve(this.token);\n          } catch (err) {\n            this.resetAuthValues();\n            throw new Error(\"No token\");\n          }\n        }\n        return Promise.resolve(token);\n      }\n      return Promise.resolve(null);\n    });\n  }\n  renewSession() {\n    return __async(this, null, function* () {\n      try {\n        const { access, refresh } = yield this.renewSessionWithToken();\n        this.handleToken(access, \"access\");\n        this.handleToken(refresh, \"refresh\");\n        return yield Promise.resolve(access);\n      } catch (err) {\n        return Promise.reject();\n      }\n    });\n  }\n  renewSessionWithToken() {\n    return __async(this, null, function* () {\n      try {\n        const tokens = yield this.api.renewToken().then((l) => ({ access: l.access_token || \"\", refresh: l.refresh_token || \"\" }));\n        return tokens;\n      } catch (err) {\n        return Promise.reject(err);\n      }\n    });\n  }\n}\n\nconst mainCss = \".wrapper,.wrapper-dark{--content-width:416px}.wrapper{--main-background:#f7f7f7;--blue-text:#6163f6;--field-background:#fff;--gray-line:#e0e0e0;--social-button:#1b1b1b;--text:#1b1b1b;--upload-photo:#e0e0e0;--content-width:416px}.wrapper-dark{--main-background:#1b1b1b;--blue-text:#8b8dfa;--field-background:#423f3f;--gray-line:#423f3f;--social-button:#423f3f;--text:#fff;--upload-photo:#423f3f;--content-width:416px}*{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;font-family:inherit}.wrapper,.wrapper-dark{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.social-buttons{width:100%;position:relative}.social-buttons__text{font-size:14px;line-height:21px;color:#828282;padding:4px 8px;margin-bottom:39px;text-align:center;position:static}.social-buttons__text::before{content:\\\"\\\";position:absolute;height:1px;width:36%;left:0;top:14px;background-color:var(--gray-line)}.social-buttons__text::after{content:\\\"\\\";position:absolute;height:1px;width:36%;right:0;top:14px;background-color:var(--gray-line)}.social-buttons__social-medias{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.social-buttons__media{width:56px;height:56px;border-radius:50%;background-color:var(--social-button);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.social-buttons__media:not(:last-of-type){margin-right:24px}@media (max-width: 599px){.social-buttons__media{width:44px;height:44px}.social-buttons__text{margin-bottom:36px}.social-buttons__text::before{width:26%}.social-buttons__text::after{width:26%}.social-buttons__image{width:16px;height:16px}}.primary-button{background-color:#6163f6;border:none;outline:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:192px;height:64px;border-radius:8px;cursor:pointer;color:#fff;font-size:18px;line-height:26px;-webkit-transition:all 0.4s;transition:all 0.4s}.primary-button:active{-webkit-transform:translateY(-4px);transform:translateY(-4px)}.primary-button:hover{opacity:0.8}.primary-button:disabled{cursor:initial;opacity:0.3}@media (max-width: 599px){.primary-button{width:100%}}.info-card{border:1px solid var(--gray-line);border-radius:8px;padding:24px}.info-card__controls{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.info-card__title{color:var(--text);font-size:18px;line-height:26px;font-weight:700}.info-card__button{color:var(--blue-text);background:none;border:none;cursor:pointer;font-size:18px;line-height:26px}.info-card__text{color:#828282;font-size:16px;line-height:24px;margin-top:8px}.info-card__subtitle{color:var(--text);font-size:16px;line-height:24px;margin:4px 0 12px}@media (max-width: 599px){.info-card__text{font-size:14px;line-height:21px}}.form-control{width:100%;max-width:var(--content-width);height:72px;background-color:var(--field-background);-webkit-box-shadow:0px 11px 15px rgba(0, 0, 0, 0.04);box-shadow:0px 11px 15px rgba(0, 0, 0, 0.04);border-radius:8px;border:none;outline:none;font-size:18px;line-height:26px;color:var(--text);padding:23px 24px}.form-control::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.form-control::-webkit-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::-moz-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control:-ms-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::-ms-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::placeholder{font-size:18px;line-height:26px;color:#828282}.form-control-danger{border:1px solid #F66161}@media (max-width: 599px){.form-control{height:64px}}.upload-photo{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;margin-bottom:48px}.upload-photo__field{display:none}.upload-photo__label{cursor:pointer;color:var(--blue-text);font-size:16px;line-height:24px}.upload-photo__label:first-of-type{margin-right:16px}.upload-photo__avatar{height:64px;width:64px;border-radius:50%;background-color:var(--upload-photo)}@media (max-width: 599px){.upload-photo{margin-bottom:32px}}.error{min-height:21px;width:100%;font-size:14px;line-height:21px;color:#FF5160}.login-form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:var(--content-width)}.login-form__register-text{margin-bottom:32px;font-weight:400;font-size:14px;line-height:24px;color:#828282}.login-form__register-link{color:var(--blue-text);cursor:pointer}.login-form .form-control:first-of-type{margin-bottom:32px}.login-form__buttons{margin-top:48px;display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;margin-bottom:36px}.login-form__buttons_mt-32{margin-top:32px}.login-form__forgot-pass{color:var(--blue-text);font-size:16px;line-height:24px;cursor:pointer}.login-form .primary-button{margin-right:32px}.login-form .error{margin-top:12px}@media (max-width: 599px){.login-form{width:100%;max-width:var(--content-width);padding:0 24px}.login-form__register-text{font-size:16px}.login-form .form-control:first-of-type{margin-bottom:24px}.login-form__buttons{margin-top:32px;-ms-flex-direction:column;flex-direction:column}.login-form .primary-button{margin-right:0;margin-bottom:36px}}.register-form{width:var(--content-width);padding:64px 0 44px}.register-form .form-control:not(:last-of-type){margin-bottom:32px}.register-form__buttons{display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;margin-top:48px}.register-form__buttons_mt-32{margin-top:32px}.register-form__log-in{color:var(--blue-text);font-size:16px;line-height:24px;cursor:pointer}.register-form .primary-button{margin-right:32px}.register-form .error{margin-top:12px}@media (max-width: 599px){.register-form{width:100%;max-width:var(--content-width);padding:48px 24px 32px}.register-form .form-control{margin-bottom:24px}.register-form .primary-button{margin-right:0;margin-bottom:36px}.register-form__buttons{-ms-flex-direction:column;flex-direction:column;margin-top:32px}}.tfa-setup{padding:48px 0 80px;width:var(--content-width);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-setup__text{font-size:24px;line-height:32px;color:var(--text);text-align:center;max-width:260px;width:100%}.tfa-setup .error{margin-top:12px}.tfa-setup__form{width:100%}.tfa-setup__form .primary-button{margin:48px auto 0}.tfa-setup__form .primary-button-mt-32{margin-top:32px}.tfa-setup__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:270px;text-align:center;margin:16px auto 48px}.tfa-setup .info-card{margin-top:48px}@media (max-width: 599px){.tfa-setup{width:100%;max-width:var(--content-width);padding:38px 24px 36px}}.tfa-verify{padding:48px 0 52px;width:var(--content-width);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-verify .error{margin-top:12px}.tfa-verify__title-wrapper{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-verify__title,.tfa-verify__title_mb-40{color:var(--text);font-size:24px;line-height:32px;max-width:280px;text-align:center;font-weight:400;margin-bottom:16px}.tfa-verify__title_mb-40{margin-bottom:40px}.tfa-verify__app-button{font-size:18px;line-height:26px;background:none;border:none;color:var(--blue-text);margin-bottom:40px}.tfa-verify .primary-button{margin-top:48px}.tfa-verify .primary-button-mt-32{margin-top:32px}.tfa-verify__back{font-size:16px;line-height:24px;color:var(--blue-text)}.tfa-verify__subtitle{font-size:16px;line-height:24px;margin-bottom:48px;color:#828282;max-width:189px;text-align:center}.tfa-verify__qr-code{width:160px;height:160px;margin-bottom:64px}@media (max-width: 599px){.tfa-verify{padding:102px 24px 41px;width:100%;max-width:var(--content-width)}.tfa-verify .primary-button{margin-top:32px}.tfa-verify__qr-code{margin-bottom:48px}}.otp-login{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:44px 24px 102px;width:100%;max-width:var(--content-width)}.otp-login__register-text{margin-bottom:32px;font-weight:400;font-size:14px;line-height:24px;color:#828282}.otp-login .form-control{margin-bottom:48px}.otp-login .primary-button{margin-bottom:36px}.error-view{width:100%;max-width:var(--content-width);padding:0 24px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;word-break:break-all}.error-view__message{color:var(--text);font-size:24px;line-height:32px;text-align:center;margin-bottom:16px}.error-view__details{color:#828282;font-size:16px;line-height:24px;text-align:center}.error-view .primary-button{margin-top:64px}.forgot-password{width:var(--content-width)}.forgot-password__title{text-align:center;margin-bottom:16px;font-size:24px;line-height:32px;font-weight:400;color:var(--text)}.forgot-password__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:189px;text-align:center;margin:0 auto 48px}.forgot-password .error{margin-top:12px}.forgot-password .primary-button{margin:48px auto 0}.forgot-password .primary-button-mt-32{margin-top:32px}@media (max-width: 599px){.forgot-password{width:100%;max-width:var(--content-width);padding:0 24px}.forgot-password .primary-button{margin-top:32px}}.forgot-password-success{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;padding:0 16px}.forgot-password-success__text{width:100%;max-width:367px;font-size:24px;line-height:32px;text-align:center;color:var(--text)}.forgot-password-success__image{margin-bottom:56px}.reset-password{width:var(--content-width)}.reset-password__title{text-align:center;font-size:24px;line-height:32px;font-weight:400;color:var(--text);max-width:270px;margin:0 auto 16px}.reset-password__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:189px;text-align:center;margin:0 auto 48px}.reset-password .error{margin-top:12px}.reset-password .primary-button{margin:48px auto 0}.reset-password .primary-button-mt-32{margin-top:32px}@media (max-width: 599px){.reset-password{width:100%;max-width:var(--content-width);padding:0 24px}.reset-password .primary-button{margin-top:32px}}\";\n\nconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nconst IdentifoForm$1 = class extends HTMLElement {\n  constructor() {\n    super();\n    this.__registerHost();\n    attachShadow(this);\n    this.complete = createEvent(this, \"complete\", 7);\n    this.error = createEvent(this, \"error\", 7);\n    this.route = 'login';\n    this.theme = 'light';\n    this.scopes = '';\n    this.afterLoginRedirect = (e) => {\n      this.phone = e.user.phone || '';\n      this.email = e.user.email || '';\n      this.lastResponse = e;\n      if (e.require_2fa) {\n        if (!e.enabled_2fa) {\n          return 'tfa/setup';\n        }\n        if (e.enabled_2fa) {\n          return 'tfa/verify';\n        }\n      }\n      if (e.access_token && e.refresh_token) {\n        return 'callback';\n      }\n      if (e.access_token && !e.refresh_token) {\n        return 'callback';\n      }\n    };\n    this.loginCatchRedirect = (data) => {\n      if (data.id === APIErrorCodes.PleaseEnableTFA) {\n        return 'tfa/setup';\n      }\n      throw data;\n    };\n  }\n  // /**\n  //  * The last name\n  //  */\n  // @Prop() last: string;\n  // private getText(): string {\n  //   return format(this.first, this.middle, this.last);\n  // }\n  processError(e) {\n    this.lastError = e;\n    this.error.emit(e);\n  }\n  async signIn() {\n    await this.auth.api\n      .login(this.email, this.password, '', this.scopes.split(','))\n      .then(this.afterLoginRedirect)\n      .catch(this.loginCatchRedirect)\n      .then(route => this.openRoute(route))\n      .catch(e => this.processError(e));\n  }\n  async loginWith(provider) {\n    this.route = 'loading';\n    const federatedRedirectUrl = this.federatedRedirectUrl || window.location.origin + window.location.pathname;\n    this.auth.api.federatedLogin(provider, this.scopes.split(','), federatedRedirectUrl, this.callbackUrl);\n  }\n  async signUp() {\n    if (!this.validateEmail(this.email)) {\n      return;\n    }\n    await this.auth.api\n      .register(this.email, this.password, this.scopes.split(','))\n      .then(this.afterLoginRedirect)\n      .catch(this.loginCatchRedirect)\n      .then(route => this.openRoute(route))\n      .catch(e => this.processError(e));\n  }\n  async verifyTFA() {\n    this.auth.api\n      .verifyTFA(this.tfaCode, [])\n      .then(() => this.openRoute('callback'))\n      .catch(e => this.processError(e));\n  }\n  async setupTFA() {\n    if (this.tfaType == TFAType.TFATypeSMS) {\n      try {\n        await this.auth.api.updateUser({ new_phone: this.phone });\n      }\n      catch (e) {\n        this.processError(e);\n        return;\n      }\n    }\n    await this.auth.api.enableTFA().then(r => {\n      if (!r.provisioning_uri) {\n        this.openRoute('tfa/verify');\n      }\n      if (r.provisioning_uri) {\n        this.provisioningURI = r.provisioning_uri;\n        this.provisioningQR = r.provisioning_qr;\n        this.openRoute('tfa/verify');\n      }\n    });\n  }\n  restorePassword() {\n    this.auth.api\n      .requestResetPassword(this.email)\n      .then(() => {\n      this.success = true;\n      this.openRoute('password/forgot/success');\n    })\n      .catch(e => this.processError(e));\n  }\n  setNewPassword() {\n    if (this.token) {\n      this.auth.tokenService.saveToken(this.token, 'access');\n    }\n    this.auth.api\n      .resetPassword(this.password)\n      .then(() => {\n      this.success = true;\n      this.openRoute('login');\n      this.password = '';\n    })\n      .catch(e => this.processError(e));\n  }\n  openRoute(route) {\n    this.lastError = undefined;\n    this.route = route;\n  }\n  usernameChange(event) {\n    this.username = event.target.value;\n  }\n  passwordChange(event) {\n    this.password = event.target.value;\n  }\n  emailChange(event) {\n    this.email = event.target.value;\n  }\n  phoneChange(event) {\n    this.phone = event.target.value;\n  }\n  tfaCodeChange(event) {\n    this.tfaCode = event.target.value;\n  }\n  validateEmail(email) {\n    if (!emailRegex.test(email)) {\n      this.processError({ detailedMessage: 'Email address is not valid', name: 'Validation error', message: 'Email address is not valid' });\n      return false;\n    }\n    return true;\n  }\n  renderRoute(route) {\n    var _a, _b, _c, _d, _e, _f;\n    switch (route) {\n      case 'login':\n        return (h(\"div\", { class: \"login-form\" }, h(\"p\", { class: \"login-form__register-text\" }, \"Don't have an account?\", h(\"a\", { onClick: () => this.openRoute('register'), class: \"login-form__register-link\" }, ' ', \"Sign Up\")), h(\"input\", { type: \"text\", class: `form-control ${this.lastError && 'form-control-danger'}`, id: \"floatingInput\", value: this.email, placeholder: \"Email\", onInput: event => this.emailChange(event), onKeyPress: e => !!(e.key === 'Enter' && this.email && this.password) && this.signIn() }), h(\"input\", { type: \"password\", class: `form-control ${this.lastError && 'form-control-danger'}`, id: \"floatingPassword\", value: this.password, placeholder: \"Password\", onInput: event => this.passwordChange(event), onKeyPress: e => !!(e.key === 'Enter' && this.email && this.password) && this.signIn() }), !!this.lastError && (h(\"div\", { class: \"error\", role: \"alert\" }, (_a = this.lastError) === null || _a === void 0 ? void 0 : _a.detailedMessage)), h(\"div\", { class: `login-form__buttons ${!!this.lastError ? 'login-form__buttons_mt-32' : ''}` }, h(\"button\", { onClick: () => this.signIn(), class: \"primary-button\", disabled: !this.email || !this.password }, \"Login\"), h(\"a\", { onClick: () => this.openRoute('password/forgot'), class: \"login-form__forgot-pass\" }, \"Forgot password\")), this.federatedProviders.length > 0 && (h(\"div\", { class: \"social-buttons\" }, h(\"p\", { class: \"social-buttons__text\" }, \"or continue with\"), h(\"div\", { class: \"social-buttons__social-medias\" }, this.federatedProviders.indexOf('apple') > -1 && (h(\"div\", { class: \"social-buttons__media\", onClick: () => this.loginWith('apple') }, h(\"img\", { src: getAssetPath(`assets/images/${'apple.svg'}`), class: \"social-buttons__image\", alt: \"login via apple\" }))), this.federatedProviders.indexOf('google') > -1 && (h(\"div\", { class: \"social-buttons__media\", onClick: () => this.loginWith('google') }, h(\"img\", { src: getAssetPath(`assets/images/${'google.svg'}`), class: \"social-buttons__image\", alt: \"login via google\" }))), this.federatedProviders.indexOf('facebook') > -1 && (h(\"div\", { class: \"social-buttons__media\", onClick: () => this.loginWith('facebook') }, h(\"img\", { src: getAssetPath(`assets/images/${'fb.svg'}`), class: \"social-buttons__image\", alt: \"login via facebook\" }))))))));\n      case 'register':\n        return (h(\"div\", { class: \"register-form\" }, h(\"input\", { type: \"text\", class: `form-control ${this.lastError && 'form-control-danger'}`, id: \"floatingInput\", value: this.email, placeholder: \"Email\", onInput: event => this.emailChange(event), onKeyPress: e => !!(e.key === 'Enter' && this.password && this.email) && this.signUp() }), h(\"input\", { type: \"password\", class: `form-control ${this.lastError && 'form-control-danger'}`, id: \"floatingPassword\", value: this.password, placeholder: \"Password\", onInput: event => this.passwordChange(event), onKeyPress: e => !!(e.key === 'Enter' && this.password && this.email) && this.signUp() }), !!this.lastError && (h(\"div\", { class: \"error\", role: \"alert\" }, (_b = this.lastError) === null || _b === void 0 ? void 0 : _b.detailedMessage)), h(\"div\", { class: `register-form__buttons ${!!this.lastError ? 'register-form__buttons_mt-32' : ''}` }, h(\"button\", { onClick: () => this.signUp(), class: \"primary-button\", disabled: !this.email || !this.password }, \"Continue\"), h(\"a\", { onClick: () => this.openRoute('login'), class: \"register-form__log-in\" }, \"Go back to login\"))));\n      case 'otp/login':\n        return (h(\"div\", { class: \"otp-login\" }, h(\"p\", { class: \"otp-login__register-text\" }, \"Don't have an account?\", h(\"a\", { onClick: () => this.openRoute('register'), class: \"login-form__register-link\" }, ' ', \"Sign Up\")), h(\"input\", { type: \"phone\", class: \"form-control\", id: \"floatingInput\", value: this.phone, placeholder: \"Phone number\", onInput: event => this.phoneChange(event) }), h(\"button\", { onClick: () => this.openRoute('tfa/verify'), class: \"primary-button\", disabled: !this.phone }, \"Continue\"), this.federatedProviders.length > 0 && (h(\"div\", { class: \"social-buttons\" }, h(\"p\", { class: \"social-buttons__text\" }, \"or continue with\"), h(\"div\", { class: \"social-buttons__social-medias\" }, this.federatedProviders.indexOf('apple') > -1 && (h(\"div\", { class: \"social-buttons__media\", onClick: () => this.loginWith('apple') }, h(\"img\", { src: getAssetPath(`assets/images/${'apple.svg'}`), class: \"social-buttons__image\", alt: \"login via apple\" }))), this.federatedProviders.indexOf('google') > -1 && (h(\"div\", { class: \"social-buttons__media\", onClick: () => this.loginWith('google') }, h(\"img\", { src: getAssetPath(`assets/images/${'google.svg'}`), class: \"social-buttons__image\", alt: \"login via google\" }))), this.federatedProviders.indexOf('facebook') > -1 && (h(\"div\", { class: \"social-buttons__media\", onClick: () => this.loginWith('facebook') }, h(\"img\", { src: getAssetPath(`assets/images/${'fb.svg'}`), class: \"social-buttons__image\", alt: \"login via facebook\" }))))))));\n      case 'tfa/setup':\n        return (h(\"div\", { class: \"tfa-setup\" }, h(\"p\", { class: \"tfa-setup__text\" }, \"Protect your account with 2-step verification\"), this.tfaType === TFAType.TFATypeApp && (h(\"div\", { class: \"info-card\" }, h(\"div\", { class: \"info-card__controls\" }, h(\"p\", { class: \"info-card__title\" }, \"Authenticator app\"), h(\"button\", { type: \"button\", class: \"info-card__button\", onClick: () => this.setupTFA() }, \"Setup\")), h(\"p\", { class: \"info-card__text\" }, \"Use the Authenticator app to get free verification codes, even when your phone is offline. Available for Android and iPhone.\"))), this.tfaType === TFAType.TFATypeEmail && (h(\"div\", { class: \"info-card\" }, h(\"div\", { class: \"info-card__controls\" }, h(\"p\", { class: \"info-card__title\" }, \"Email\"), h(\"button\", { type: \"button\", class: \"info-card__button\", onClick: () => this.setupTFA() }, \"Setup\")), h(\"p\", { class: \"info-card__subtitle\" }, this.email), h(\"p\", { class: \"info-card__text\" }, \" Use email as 2fa, please check your email, we will send confirmation code to this email.\"))), this.tfaType === TFAType.TFATypeSMS && (h(\"div\", { class: \"tfa-setup__form\" }, h(\"p\", { class: \"tfa-setup__subtitle\" }, \" Use phone as 2fa, please check your phone bellow, we will send confirmation code to this phone\"), h(\"input\", { type: \"phone\", class: `form-control ${this.lastError && 'form-control-danger'}`, id: \"floatingInput\", value: this.phone, placeholder: \"Phone\", onInput: event => this.phoneChange(event), onKeyPress: e => !!(e.key === 'Enter' && this.phone) && this.setupTFA() }), !!this.lastError && (h(\"div\", { class: \"error\", role: \"alert\" }, (_c = this.lastError) === null || _c === void 0 ? void 0 : _c.detailedMessage)), h(\"button\", { onClick: () => this.setupTFA(), class: `primary-button ${this.lastError && 'primary-button-mt-32'}`, disabled: !this.phone }, \"Setup phone\")))));\n      case 'tfa/verify':\n        return (h(\"div\", { class: \"tfa-verify\" }, !!(this.tfaType === TFAType.TFATypeApp) && (h(\"div\", { class: \"tfa-verify__title-wrapper\" }, h(\"h2\", { class: this.provisioningURI ? 'tfa-verify__title' : 'tfa-verify__title_mb-40' }, !!this.provisioningURI ? 'Please scan QR-code with the app' : 'Use GoogleAuth as 2fa'), !!this.provisioningURI && h(\"img\", { src: `data:image/png;base64, ${this.provisioningQR}`, alt: this.provisioningURI, class: \"tfa-verify__qr-code\" }))), !!(this.tfaType === TFAType.TFATypeSMS) && (h(\"div\", { class: \"tfa-verify__title-wrapper\" }, h(\"h2\", { class: \"tfa-verify__title\" }, \"Enter the code sent to your phone number\"), h(\"p\", { class: \"tfa-verify__subtitle\" }, \"The code has been sent to \", this.phone))), !!(this.tfaType === TFAType.TFATypeEmail) && (h(\"div\", { class: \"tfa-verify__title-wrapper\" }, h(\"h2\", { class: \"tfa-verify__title\" }, \"Enter the code sent to your email address\"), h(\"p\", { class: \"tfa-verify__subtitle\" }, \"The email has been sent to \", this.email))), h(\"input\", { type: \"text\", class: `form-control ${this.lastError && 'form-control-danger'}`, id: \"floatingCode\", value: this.tfaCode, placeholder: \"Verify code\", onInput: event => this.tfaCodeChange(event), onKeyPress: e => !!(e.key === 'Enter' && this.tfaCode) && this.verifyTFA() }), !!this.lastError && (h(\"div\", { class: \"error\", role: \"alert\" }, (_d = this.lastError) === null || _d === void 0 ? void 0 : _d.detailedMessage)), h(\"button\", { type: \"button\", class: `primary-button ${this.lastError && 'primary-button-mt-32'}`, disabled: !this.tfaCode, onClick: () => this.verifyTFA() }, \"Confirm\")));\n      case 'password/forgot':\n        return (h(\"div\", { class: \"forgot-password\" }, h(\"h2\", { class: \"forgot-password__title\" }, \"Enter the email you gave when you registered\"), h(\"p\", { class: \"forgot-password__subtitle\" }, \"We will send you a link to create a new password on email\"), h(\"input\", { type: \"email\", class: `form-control ${this.lastError && 'form-control-danger'}`, id: \"floatingEmail\", value: this.email, placeholder: \"Email\", onInput: event => this.emailChange(event), onKeyPress: e => !!(e.key === 'Enter' && this.email) && this.restorePassword() }), !!this.lastError && (h(\"div\", { class: \"error\", role: \"alert\" }, (_e = this.lastError) === null || _e === void 0 ? void 0 : _e.detailedMessage)), h(\"button\", { type: \"button\", class: `primary-button ${this.lastError && 'primary-button-mt-32'}`, disabled: !this.email, onClick: () => this.restorePassword() }, \"Send the link\")));\n      case 'password/forgot/success':\n        return (h(\"div\", { class: \"forgot-password-success\" }, this.theme === 'dark' && h(\"img\", { src: getAssetPath(`./assets/images/${'email-dark.svg'}`), alt: \"email\", class: \"forgot-password-success__image\" }), this.theme === 'light' && h(\"img\", { src: getAssetPath(`./assets/images/${'email.svg'}`), alt: \"email\", class: \"forgot-password-success__image\" }), h(\"p\", { class: \"forgot-password-success__text\" }, \"We sent you an email with a link to create a new password\")));\n      case 'password/reset':\n        return (h(\"div\", { class: \"reset-password\" }, h(\"h2\", { class: \"reset-password__title\" }, \"Set up a new password to log in to the website\"), h(\"p\", { class: \"reset-password__subtitle\" }, \"Memorize your password and do not give it to anyone.\"), h(\"input\", { type: \"password\", class: `form-control ${this.lastError && 'form-control-danger'}`, id: \"floatingPassword\", value: this.password, placeholder: \"Password\", onInput: event => this.passwordChange(event), onKeyPress: e => !!(e.key === 'Enter' && this.password) && this.setNewPassword() }), !!this.lastError && (h(\"div\", { class: \"error\", role: \"alert\" }, (_f = this.lastError) === null || _f === void 0 ? void 0 : _f.detailedMessage)), h(\"button\", { type: \"button\", class: `primary-button ${this.lastError && 'primary-button-mt-32'}`, disabled: !this.password, onClick: () => this.setNewPassword() }, \"Save password\")));\n      case 'error':\n        return (h(\"div\", { class: \"error-view\" }, h(\"div\", { class: \"error-view__message\" }, this.lastError.message), h(\"div\", { class: \"error-view__details\" }, this.lastError.detailedMessage)));\n      case 'callback':\n        return (h(\"div\", { class: \"error-view\" }, h(\"div\", null, \"Success\"), this.debug && (h(\"div\", null, h(\"div\", null, \"Access token: \", this.lastResponse.access_token), h(\"div\", null, \"Refresh token: \", this.lastResponse.refresh_token), h(\"div\", null, \"User: \", JSON.stringify(this.lastResponse.user))))));\n      case 'loading':\n        return (h(\"div\", { class: \"error-view\" }, h(\"div\", null, \"Loading ...\")));\n    }\n  }\n  async componentWillLoad() {\n    this.auth = new IdentifoAuth({ appId: this.appId, url: this.url });\n    try {\n      const settings = await this.auth.api.getAppSettings();\n      this.registrationForbidden = settings.registrationForbidden;\n      this.tfaType = settings.tfaType;\n      this.federatedProviders = settings.federatedProviders;\n    }\n    catch (err) {\n      this.route = 'error';\n      this.lastError = err;\n    }\n    // If we have provider and state then we need to complete federated login\n    const href = new URL(window.location.href);\n    if (!!href.searchParams.get('provider') && !!href.searchParams.get('state')) {\n      // Also we clear all url params after parsing\n      const u = new URL(window.location.href);\n      const sp = new URLSearchParams();\n      const appId = href.searchParams.get('appId');\n      sp.set('appId', appId);\n      window.history.replaceState({}, document.title, `${u.pathname}?${sp.toString()}`);\n      this.route = 'loading';\n      this.auth.api\n        .federatedLoginComplete(u.searchParams)\n        .then(this.afterLoginRedirect)\n        .catch(this.loginCatchRedirect)\n        .then(route => this.openRoute(route))\n        .catch(e => this.processError(e));\n    }\n  }\n  componentWillRender() {\n    if (this.route === 'callback') {\n      const u = new URL(window.location.href);\n      u.searchParams.set('callbackUrl', this.lastResponse.callbackUrl);\n      window.history.replaceState({}, document.title, `${u.pathname}?${u.searchParams.toString()}`);\n      this.complete.emit(this.lastResponse);\n    }\n    if (this.route === 'logout') {\n      this.auth.api.logout().then(() => this.complete.emit());\n    }\n    if (this.route === 'logout') {\n      this.auth.api.logout().then(() => this.complete.emit());\n    }\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { class: { 'wrapper': this.theme === 'light', 'wrapper-dark': this.theme === 'dark' } }, this.renderRoute(this.route)), h(\"div\", { class: \"error-view\" }, this.debug && (h(\"div\", null, h(\"br\", null), this.appId)))));\n  }\n  static get assetsDirs() { return [\"assets\"]; }\n  static get style() { return mainCss; }\n};\n\nconst IdentifoForm = /*@__PURE__*/proxyCustomElement(IdentifoForm$1, [1,\"identifo-form\",{\"route\":[1537],\"token\":[1],\"appId\":[513,\"app-id\"],\"url\":[513],\"theme\":[1],\"scopes\":[1],\"callbackUrl\":[1,\"callback-url\"],\"federatedRedirectUrl\":[1,\"federated-redirect-url\"],\"debug\":[4],\"auth\":[32],\"username\":[32],\"password\":[32],\"phone\":[32],\"email\":[32],\"registrationForbidden\":[32],\"tfaCode\":[32],\"tfaType\":[32],\"federatedProviders\":[32],\"tfaMandatory\":[32],\"provisioningURI\":[32],\"provisioningQR\":[32],\"success\":[32],\"lastError\":[32],\"lastResponse\":[32]}]);\nconst defineCustomElements = (opts) => {\n  if (typeof customElements !== 'undefined') {\n    [\n      IdentifoForm\n    ].forEach(cmp => {\n      if (!customElements.get(cmp.is)) {\n        customElements.define(cmp.is, cmp, opts);\n      }\n    });\n  }\n};\n\nexport { IdentifoForm, defineCustomElements };\n","import { FC, useContext, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { Context as AppContext } from \"../context/app-context\";\nimport { identifo } from \"../services/identifo\";\n\nconst Callback: FC = () => {\n  const { state, actions } = useContext(AppContext);\n  useEffect(() => {\n    (async function () {\n      await identifo.handleAuthentication();\n      actions.setIsAuth(identifo.isAuth);\n    })();\n  }, [actions]);\n  if (state.isAuthenticated) {\n    return <Redirect to=\"/demo\" />;\n  }\n  return null;\n};\n\nexport default Callback;\n","import { FC } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { Demo } from \"../components\";\nimport { useEnsureAuthentication } from \"../utils/hooks/ensureAuthentication\";\nimport App from \"./App\";\nimport Callback from './Callback';\n\nconst Root: FC = () => {\n    useEnsureAuthentication()\n    return (\n        <Switch>\n            <Route exact path='/' component={App} />\n            <Route exact path='/callback' component={Callback} />\n            <Route exact path='/demo' component={Demo} />\n        </Switch>\n    );\n}\n\nexport default Root;","import { useContext, useEffect } from \"react\";\nimport { Context as AppContext } from \"../../context/app-context\";\nimport { identifo } from \"../../services/identifo\";\n\nexport const useEnsureAuthentication = () => {\n  const { actions } = useContext(AppContext);\n\n  useEffect(() => {\n    const status = identifo.isAuth;\n    actions.setIsAuth(status);\n  }, [actions]);\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  setAssetPath,\n  defineCustomElements,\n  JSX as LocalJSX,\n} from \"@identifo/web-element\";\nimport { HTMLAttributes } from \"react\";\n\ntype StencilToReact<T> = {\n  [P in keyof T]?: T[P] &\n    Omit<HTMLAttributes<Element>, \"className\"> & {\n      class?: string;\n    };\n};\n\ndeclare global {\n  export namespace JSX {\n    interface IntrinsicElements\n      extends StencilToReact<LocalJSX.IntrinsicElements> {}\n  }\n}\n\n// You need to copy node_modules/@identifo/web-element/assets to public folder and setAssetPath\nsetAssetPath(window.location.href + \"/public/\");\ndefineCustomElements(window);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider as AppProvider } from \"./context/app-context\";\nimport Root from \"./pages/Root\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"./scss/main.scss\";\n\nimport \"./register-identifo\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <AppProvider>\n        <Root />\n      </AppProvider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}