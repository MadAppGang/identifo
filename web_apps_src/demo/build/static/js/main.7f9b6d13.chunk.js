(this.webpackJsonpidentifo_project=this.webpackJsonpidentifo_project||[]).push([[0],{49:function(e,t,r){},50:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=50},51:function(e,t,r){"use strict";r.r(t);var n,o,i,s,a=r(3),c=r.n(a),u=r(33),l=r.n(u),h=r(19),p=r(30),f=r(9),d=r(2),g=function(e,t,r){var n=c.a.createContext({state:r,actions:t});return{Context:n,Provider:function(o){var i=o.children,s=Object(a.useReducer)(e,r),c=Object(f.a)(s,2),u=c[0],l=c[1],h=Object(a.useMemo)((function(){var e,r={};for(e in t)r[e]=t[e](l);return r}),[]);return Object(d.jsx)(n.Provider,{value:{state:u,actions:h},children:i})}}}((function(e,t){switch(t.type){case"SET_IS_AUTHENTICATED":return Object(p.a)(Object(p.a)({},e),{},{isAuthenticated:t.payload.status});default:return e}}),{setIsAuth:function(e){return function(t){e({type:"SET_IS_AUTHENTICATED",payload:{status:t}})}}},{isAuthenticated:!1}),v=g.Context,m=g.Provider,b=r(6),k=r(1),x=r.n(k),w=r(4),y=r(8),j=r(22),_=r(5),O=r(14),T=r(15),S=r(17);(o=n||(n={})).PleaseEnableTFA="error.api.request.2fa.please_enable",o.NetworkError="error.network",(s=i||(i={})).TFATypeApp="app",s.TFATypeSMS="sms",s.TFATypeEmail="email";var E=function(e){Object(O.a)(r,e);var t=Object(T.a)(r);function r(e){var n;return Object(_.a)(this,r),(n=t.call(this,(null==e?void 0:e.message)||"Unknown API error")).detailedMessage=null==e?void 0:e.detailed_message,n.id=null==e?void 0:e.id,n.status=null==e?void 0:e.status,n}return r}(Object(S.a)(Error)),P=Object.defineProperty,U=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,R=function(e,t,r){return t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},I=function(e,t){for(var r in t||(t={}))A.call(t,r)&&R(e,r,t[r]);if(U){var n,o=Object(j.a)(U(t));try{for(o.s();!(n=o.n()).done;){r=n.value;C.call(t,r)&&R(e,r,t[r])}}catch(i){o.e(i)}finally{o.f()}}return e},N=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{a(r.next(e))}catch(t){o(t)}},s=function(e){try{a(r.throw(e))}catch(t){o(t)}},a=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};a((r=r.apply(e,t)).next())}))},F="X-Identifo-Clientid",z="Authorization",L=function(){function e(t,r){var o,i=this;Object(_.a)(this,e),this.config=t,this.tokenService=r,this.defaultHeaders=(o={},Object(w.a)(o,F,""),Object(w.a)(o,"Accept","application/json"),Object(w.a)(o,"Content-Type","application/json"),o),this.catchNetworkErrorHandler=function(e){if("Network Error"===e.message||"Failed to fetch"===e.message||"Preflight response is not successful"===e.message||e.message.indexOf("is not allowed by Access-Control-Allow-Origin")>-1)throw console.error(e.message),new E({id:n.NetworkError,status:0,message:"Configuration error",detailed_message:'Please check Identifo URL and add "'.concat(window.location.protocol,"//").concat(window.location.host,'" to "REDIRECT URLS" in Identifo app settings.')});throw e},this.checkStatusCodeAndGetJSON=function(e){return N(i,null,k.mark((function t(){var r;return k.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,e.json();case 3:throw r=t.sent,new E(null==r?void 0:r.error);case 5:return t.abrupt("return",e.json());case 6:case"end":return t.stop()}}),t)})))},this.baseUrl=t.url.replace(/\/$/,""),this.defaultHeaders[F]=t.appId,this.appId=t.appId}return Object(y.a)(e,[{key:"get",value:function(e,t){return this.send(e,I({method:"GET"},t))}},{key:"put",value:function(e,t,r){return this.send(e,I({method:"PUT",body:JSON.stringify(t)},r))}},{key:"post",value:function(e,t,r){return this.send(e,I({method:"POST",body:JSON.stringify(t)},r))}},{key:"send",value:function(e,t){var r=I({},t);return r.headers=I(I({},r.headers),this.defaultHeaders),fetch("".concat(this.baseUrl).concat(e),r).catch(this.catchNetworkErrorHandler).then(this.checkStatusCodeAndGetJSON).then((function(e){return e}))}},{key:"getUser",value:function(){return N(this,null,k.mark((function e(){var t,r;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.tokenService.getToken())?void 0:t.token){e.next=2;break}throw new Error("No token in token service.");case 2:return e.abrupt("return",this.get("/me",{headers:Object(w.a)({},z,"Bearer ".concat(null==(r=this.tokenService.getToken())?void 0:r.token))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"renewToken",value:function(){return N(this,null,k.mark((function e(){var t,r,n=this;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.tokenService.getToken("refresh"))?void 0:t.token){e.next=2;break}throw new Error("No token in token service.");case 2:return e.abrupt("return",this.post("/auth/token",{scopes:this.config.scopes},{headers:Object(w.a)({},z,"Bearer ".concat(null==(r=this.tokenService.getToken("refresh"))?void 0:r.token))}).then((function(e){return n.storeToken(e)})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"updateUser",value:function(e){return N(this,null,k.mark((function t(){var r,n;return k.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(r=this.tokenService.getToken())?void 0:r.token){t.next=2;break}throw new Error("No token in token service.");case 2:return t.abrupt("return",this.put("/me",e,{headers:Object(w.a)({},z,"Bearer ".concat(null==(n=this.tokenService.getToken("access"))?void 0:n.token))}));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"login",value:function(e,t,r,n){return N(this,null,k.mark((function o(){var i,s=this;return k.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i={email:e,password:t,device_token:r,scopes:n},o.abrupt("return",this.post("/auth/login",i).then((function(e){return s.storeToken(e)})));case 2:case"end":return o.stop()}}),o,this)})))}},{key:"federatedLogin",value:function(e,t,r,n){return N(this,arguments,k.mark((function e(t,r,n,o){var i,s,a,c,u,l=arguments;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=l.length>4&&void 0!==l[4]?l[4]:{width:600,height:800,popUp:!1},(s=document.createElement("form")).style.display="none",i.popUp&&(s.target="TargetWindow"),s.method="POST",(a=new URLSearchParams).set("appId",this.config.appId),a.set("provider",t),a.set("scopes",r.join(",")),a.set("redirectUrl",n),o&&a.set("callbackUrl",o),s.action="".concat(this.baseUrl,"/auth/federated?").concat(a.toString()),document.body.appendChild(s),i.popUp?(c=window.screenX+window.outerWidth/2-(i.width||600)/2,u=window.screenY+window.outerHeight/2-(i.height||800)/2,window.open("","TargetWindow","status=0,title=0,height=".concat(i.height,",width=").concat(i.width,",top=").concat(u,",left=").concat(c,",scrollbars=1"))&&s.submit()):window.location.assign("".concat(this.baseUrl,"/auth/federated?").concat(a.toString()));case 14:case"end":return e.stop()}}),e,this)})))}},{key:"federatedLoginComplete",value:function(e){return N(this,null,k.mark((function t(){var r=this;return k.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.get("/auth/federated/complete?".concat(e.toString())).then((function(e){return r.storeToken(e)})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"register",value:function(e,t,r){return N(this,null,k.mark((function n(){var o,i=this;return k.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={email:e,password:t,scopes:r},n.abrupt("return",this.post("/auth/register",o).then((function(e){return i.storeToken(e)})));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"requestResetPassword",value:function(e){return N(this,null,k.mark((function t(){var r;return k.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={email:e},t.abrupt("return",this.post("/auth/request_reset_password",r));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"resetPassword",value:function(e){return N(this,null,k.mark((function t(){var r,n,o;return k.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(r=this.tokenService.getToken())?void 0:r.token){t.next=2;break}throw new Error("No token in token service.");case 2:return o={password:e},t.abrupt("return",this.post("/auth/reset_password",o,{headers:Object(w.a)({},z,"Bearer ".concat(null==(n=this.tokenService.getToken())?void 0:n.token))}));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getAppSettings",value:function(){return N(this,null,k.mark((function e(){return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get("/auth/app_settings"));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"enableTFA",value:function(){return N(this,null,k.mark((function e(){var t,r;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.tokenService.getToken())?void 0:t.token){e.next=2;break}throw new Error("No token in token service.");case 2:return e.abrupt("return",this.put("/auth/tfa/enable",{},{headers:Object(w.a)({},z,"BEARER ".concat(null==(r=this.tokenService.getToken())?void 0:r.token))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"verifyTFA",value:function(e,t){return N(this,null,k.mark((function r(){var n,o,i=this;return k.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null==(n=this.tokenService.getToken())?void 0:n.token){r.next=2;break}throw new Error("No token in token service.");case 2:return r.abrupt("return",this.post("/auth/tfa/login",{tfa_code:e,scopes:t},{headers:Object(w.a)({},z,"BEARER ".concat(null==(o=this.tokenService.getToken())?void 0:o.token))}).then((function(e){return i.storeToken(e)})));case 3:case"end":return r.stop()}}),r,this)})))}},{key:"logout",value:function(){return N(this,null,k.mark((function e(){var t,r,n;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.tokenService.getToken())?void 0:t.token){e.next=2;break}throw new Error("No token in token service.");case 2:return e.abrupt("return",this.post("/me/logout",{refresh_token:null==(r=this.tokenService.getToken("refresh"))?void 0:r.token},{headers:Object(w.a)({},z,"Bearer ".concat(null==(n=this.tokenService.getToken())?void 0:n.token))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"storeToken",value:function(e){return e.access_token&&this.tokenService.saveToken(e.access_token,"access"),e.refresh_token&&this.tokenService.saveToken(e.refresh_token,"refresh"),e}}]),e}(),M=/^([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_\-=]*$)/,W="Empty or invalid token",J=function(){function e(t,r,n){Object(_.a)(this,e),this.preffix="identifo_",this.storageType="localStorage",this.access="".concat(this.preffix,"access_token"),this.refresh="".concat(this.preffix,"refresh_token"),this.isAccessible=!0,this.access=r?this.preffix+r:this.access,this.refresh=n?this.preffix+n:this.refresh,this.storageType=t}return Object(y.a)(e,[{key:"saveToken",value:function(e,t){return!!e&&(window[this.storageType].setItem(this[t],e),!0)}},{key:"getToken",value:function(e){var t;return null!=(t=window[this.storageType].getItem(this[e]))?t:""}},{key:"deleteToken",value:function(e){window[this.storageType].removeItem(this[e])}}]),e}(),B=function(e){Object(O.a)(r,e);var t=Object(T.a)(r);function r(e,n){return Object(_.a)(this,r),t.call(this,"localStorage",e,n)}return r}(J),H=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{a(r.next(e))}catch(t){o(t)}},s=function(e){try{a(r.throw(e))}catch(t){o(t)}},a=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};a((r=r.apply(e,t)).next())}))},V=function(){function e(t){Object(_.a)(this,e),this.tokenManager=t||new B}return Object(y.a)(e,[{key:"handleVerification",value:function(e,t,r){return H(this,null,k.mark((function n(){return k.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.tokenManager.isAccessible){n.next=2;break}return n.abrupt("return",!0);case 2:return n.prev=2,n.next=5,this.validateToken(e,t,r);case 5:return this.saveToken(e),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(2),this.removeToken(),n.abrupt("return",Promise.reject(n.t0));case 13:case"end":return n.stop()}}),n,this,[[2,9]])})))}},{key:"validateToken",value:function(e,t,r){return H(this,null,k.mark((function n(){var o,i,s;return k.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}throw new Error(W);case 2:if(i=this.parseJWT(e),s=this.isJWTExpired(i),!(null==(o=i.aud)?void 0:o.includes(t))||r&&i.iss!==r||s){n.next=6;break}return n.abrupt("return",Promise.resolve(!0));case 6:throw new Error(W);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"parseJWT",value:function(e){var t=e.split(".")[1];if(!t)return{aud:[],iss:"",exp:10};var r=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map((function(e){return"%".concat("00".concat(e.charCodeAt(0).toString(16)).slice(-2))})).join(""));return JSON.parse(n)}},{key:"isJWTExpired",value:function(e){var t=(new Date).getTime()/1e3;return!!(e.exp&&t>e.exp)}},{key:"isAuthenticated",value:function(e,t){if(!this.tokenManager.isAccessible)return Promise.resolve(!0);var r=this.tokenManager.getToken("access");return this.validateToken(r,e,t)}},{key:"saveToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"access";return this.tokenManager.saveToken(e,t)}},{key:"removeToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"access";this.tokenManager.deleteToken(e)}},{key:"getToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"access",t=this.tokenManager.getToken(e);if(!t)return null;var r=this.parseJWT(t);return{token:t,payload:r}}}]),e}(),q=function(){function e(t){Object(_.a)(this,e),this.config=t}return Object(y.a)(e,[{key:"getUrl",value:function(e){var t,r,n=(null==(t=this.config.scopes)?void 0:t.join())||"",o=encodeURIComponent(null!=(r=this.config.redirectUri)?r:window.location.href),i="appId=".concat(this.config.appId,"&scopes=").concat(n),s="".concat(i,"&callbackUrl=").concat(o),a=this.config.postLogoutRedirectUri?"&callbackUrl=".concat(encodeURIComponent(this.config.postLogoutRedirectUri)):"&callbackUrl=".concat(o,"&redirectUri=").concat(this.config.url,"/web/login?").concat(encodeURIComponent(i)),c={signup:"".concat(this.config.url,"/web/register?").concat(s),signin:"".concat(this.config.url,"/web/login?").concat(s),logout:"".concat(this.config.url,"/web/logout?").concat(i).concat(a),renew:"".concat(this.config.url,"/web/token/renew?").concat(i,"&redirectUri=").concat(o),default:"default"};return c[e]||c.default}},{key:"createSignupUrl",value:function(){return this.getUrl("signup")}},{key:"createSigninUrl",value:function(){return this.getUrl("signin")}},{key:"createLogoutUrl",value:function(){return this.getUrl("logout")}},{key:"createRenewSessionUrl",value:function(){return this.getUrl("renew")}}]),e}(),D=Object.defineProperty,G=Object.defineProperties,K=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,Q=function(e,t,r){return t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Y=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{a(r.next(e))}catch(t){o(t)}},s=function(e){try{a(r.throw(e))}catch(t){o(t)}},a=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};a((r=r.apply(e,t)).next())}))},ee=new(function(){function e(t){var r,n,o,i;Object(_.a)(this,e),this.token=null,this.isAuth=!1,this.config=(o=function(e,t){for(var r in t||(t={}))X.call(t,r)&&Q(e,r,t[r]);if(Z){var n,o=Object(j.a)(Z(t));try{for(o.s();!(n=o.n()).done;)r=n.value,$.call(t,r)&&Q(e,r,t[r])}catch(i){o.e(i)}finally{o.f()}}return e}({},t),i={autoRenew:null==(r=t.autoRenew)||r},G(o,K(i))),this.tokenService=new V(t.tokenManager),this.urlBuilder=new q(this.config),this.api=new L(t,this.tokenService),this.handleToken((null==(n=this.tokenService.getToken())?void 0:n.token)||"","access")}return Object(y.a)(e,[{key:"handleToken",value:function(e,t){if(e)if("access"===t){var r=this.tokenService.parseJWT(e);this.token={token:e,payload:r},this.isAuth=!0,this.tokenService.saveToken(e)}else this.tokenService.saveToken(e,"refresh")}},{key:"resetAuthValues",value:function(){this.token=null,this.isAuth=!1,this.tokenService.removeToken(),this.tokenService.removeToken("refresh")}},{key:"signup",value:function(){window.location.href=this.urlBuilder.createSignupUrl()}},{key:"signin",value:function(){window.location.href=this.urlBuilder.createSigninUrl()}},{key:"logout",value:function(){this.resetAuthValues(),window.location.href=this.urlBuilder.createLogoutUrl()}},{key:"handleAuthentication",value:function(){return Y(this,null,k.mark((function e(){var t,r,n;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getTokenFromUrl(),r=t.access,n=t.refresh,r){e.next=4;break}return this.resetAuthValues(),e.abrupt("return",Promise.reject());case 4:return e.prev=4,e.next=7,this.tokenService.handleVerification(r,this.config.appId,this.config.issuer);case 7:return this.handleToken(r,"access"),n&&this.handleToken(n,"refresh"),e.next=11,Promise.resolve(!0);case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(4),this.resetAuthValues(),e.next=19,Promise.reject();case 19:return e.abrupt("return",e.sent);case 20:return e.prev=20,window.location.hash="",e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[4,14,20,23]])})))}},{key:"getTokenFromUrl",value:function(){var e=new URLSearchParams(window.location.search),t={access:"",refresh:""},r=e.get("token"),n=e.get("refresh_token");return n&&M.test(n)&&(t.refresh=n),r&&M.test(r)&&(t.access=r),t}},{key:"getToken",value:function(){return Y(this,null,k.mark((function e(){var t,r;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.tokenService.getToken(),r=this.tokenService.getToken("refresh"),!t){e.next=18;break}if(!this.tokenService.isJWTExpired(t.payload)||!r){e.next=17;break}return e.prev=5,e.next=8,this.renewSession();case 8:return e.next=10,Promise.resolve(this.token);case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(5),this.resetAuthValues(),new Error("No token");case 17:return e.abrupt("return",Promise.resolve(t));case 18:return e.abrupt("return",Promise.resolve(null));case 19:case"end":return e.stop()}}),e,this,[[5,13]])})))}},{key:"renewSession",value:function(){return Y(this,null,k.mark((function e(){var t,r,n;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.renewSessionWithToken();case 3:return t=e.sent,r=t.access,n=t.refresh,this.handleToken(r,"access"),this.handleToken(n,"refresh"),e.next=10,Promise.resolve(r);case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject());case 16:case"end":return e.stop()}}),e,this,[[0,13]])})))}},{key:"renewSessionWithToken",value:function(){return Y(this,null,k.mark((function e(){var t;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.renewToken().then((function(e){return{access:e.access_token||"",refresh:e.refresh_token||""}}));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}}]),e}())({appId:"c3qn2t0em84rn76pap2g",url:"http://localhost:8081",scopes:["offline"],autoRenew:!0,redirectUri:"http://localhost:5000/callback"}),te=function(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),r=t[0],n=t[1];return Object(a.useContext)(v).state.isAuthenticated?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(re,{}),Object(d.jsxs)("div",{className:"demo",children:[Object(d.jsxs)("div",{className:"demo_buttons",children:[Object(d.jsx)("button",{className:"primary-btn",onClick:function(){n(JSON.stringify(ee.isAuth,void 0,4))},children:"Get Authenticated"}),Object(d.jsx)("button",{className:"primary-btn",onClick:function(){var e=ee.getToken();n(JSON.stringify(e,void 0,4))},children:"Get Token"}),Object(d.jsx)("button",{className:"primary-btn",onClick:function(){ee.renewSession().then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},children:"Renew Session"})]}),Object(d.jsx)("div",{className:"demo_result",children:r&&Object(d.jsx)("pre",{children:r})})]})]}):Object(d.jsx)(b.a,{to:"/"})},re=c.a.memo((function(){var e=Object(a.useContext)(v).state;return Object(d.jsx)("header",{className:"header",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"header_in",children:[Object(d.jsxs)("div",{className:"header_logo",children:[Object(d.jsx)("span",{children:"identifo.js"}),Object(d.jsx)("span",{children:"Example"})]}),Object(d.jsx)("div",{className:"header_buttons",children:e.isAuthenticated?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{className:"primary-btn",onClick:function(){ee.logout()},children:"Logout"})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"outlined-btn",onClick:function(){ee.signin()},children:"Login"}),Object(d.jsx)("button",{className:"primary-btn",onClick:function(){ee.signup()},children:"Sign up"})]})})]})})})}));var ne,oe,ie=function(){return Object(a.useContext)(v).state.isAuthenticated?Object(d.jsx)(b.a,{to:"/demo"}):Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(re,{}),Object(d.jsx)("identifo-form",{url:"http://localhost:8081","app-id":"c3vqvhea0brnc4dvdnvg"})]})},se=r(12),ae=function(){var e=Object(a.useContext)(v),t=e.state,r=e.actions;return Object(a.useEffect)((function(){Object(se.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.handleAuthentication();case 2:r.setIsAuth(ee.isAuth);case 3:case"end":return e.stop()}}),e)})))()}),[r]),t.isAuthenticated?Object(d.jsx)(b.a,{to:"/demo"}):null},ce=function(){return function(){var e=Object(a.useContext)(v).actions;Object(a.useEffect)((function(){var t=ee.isAuth;e.setIsAuth(t)}),[e])}(),Object(d.jsxs)(b.d,{children:[Object(d.jsx)(b.b,{exact:!0,path:"/",component:ie}),Object(d.jsx)(b.b,{exact:!0,path:"/callback",component:ae}),Object(d.jsx)(b.b,{exact:!0,path:"/demo",component:te})]})},ue=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,52)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),n(e),o(e),i(e),s(e)}))},le=(r(49),r(16)),he=r(0);!function(e){e.PleaseEnableTFA="error.api.request.2fa.please_enable",e.NetworkError="error.network"}(ne||(ne={})),function(e){e.TFATypeApp="app",e.TFATypeSMS="sms",e.TFATypeEmail="email"}(oe||(oe={}));var pe,fe=function(e){Object(O.a)(r,e);var t=Object(T.a)(r);function r(e){var n;return Object(_.a)(this,r),(n=t.call(this,(null==e?void 0:e.message)||"Unknown API error")).detailedMessage=null==e?void 0:e.detailed_message,n.id=null==e?void 0:e.id,n.status=null==e?void 0:e.status,n}return r}(Object(S.a)(Error)),de=Object.defineProperty,ge=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,be=function(e,t,r){return t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ke=function(e,t){for(var r in t||(t={}))ve.call(t,r)&&be(e,r,t[r]);if(ge){var n,o=Object(j.a)(ge(t));try{for(o.s();!(n=o.n()).done;){r=n.value;me.call(t,r)&&be(e,r,t[r])}}catch(i){o.e(i)}finally{o.f()}}return e},xe=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{a(r.next(e))}catch(t){o(t)}},s=function(e){try{a(r.throw(e))}catch(t){o(t)}},a=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};a((r=r.apply(e,t)).next())}))},we="X-Identifo-Clientid",ye="Authorization",je=function(){function e(t,r){var n,o=this;Object(_.a)(this,e),this.config=t,this.tokenService=r,this.defaultHeaders=(n={},Object(w.a)(n,we,""),Object(w.a)(n,"Accept","application/json"),Object(w.a)(n,"Content-Type","application/json"),n),this.catchNetworkErrorHandler=function(e){if("Network Error"===e.message||"Failed to fetch"===e.message||"Preflight response is not successful"===e.message||e.message.indexOf("is not allowed by Access-Control-Allow-Origin")>-1)throw console.error(e.message),new fe({id:ne.NetworkError,status:0,message:"Configuration error",detailed_message:'Please check Identifo URL and add "'.concat(window.location.protocol,"//").concat(window.location.host,'" to "REDIRECT URLS" in Identifo app settings.')});throw e},this.checkStatusCodeAndGetJSON=function(e){return xe(o,null,x.a.mark((function t(){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=5;break}return t.next=3,e.json();case 3:throw r=t.sent,new fe(null==r?void 0:r.error);case 5:return t.abrupt("return",e.json());case 6:case"end":return t.stop()}}),t)})))},this.baseUrl=t.url.replace(/\/$/,""),this.defaultHeaders["X-Identifo-Clientid"]=t.appId,this.appId=t.appId}return Object(y.a)(e,[{key:"get",value:function(e,t){return this.send(e,ke({method:"GET"},t))}},{key:"put",value:function(e,t,r){return this.send(e,ke({method:"PUT",body:JSON.stringify(t)},r))}},{key:"post",value:function(e,t,r){return this.send(e,ke({method:"POST",body:JSON.stringify(t)},r))}},{key:"send",value:function(e,t){var r=ke({},t);return r.headers=ke(ke({},r.headers),this.defaultHeaders),fetch("".concat(this.baseUrl).concat(e),r).catch(this.catchNetworkErrorHandler).then(this.checkStatusCodeAndGetJSON).then((function(e){return e}))}},{key:"getUser",value:function(){return xe(this,null,x.a.mark((function e(){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.tokenService.getToken())?void 0:t.token){e.next=2;break}throw new Error("No token in token service.");case 2:return e.abrupt("return",this.get("/me",{headers:Object(w.a)({},ye,"Bearer ".concat(null==(r=this.tokenService.getToken())?void 0:r.token))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"renewToken",value:function(){return xe(this,null,x.a.mark((function e(){var t,r,n=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.tokenService.getToken("refresh"))?void 0:t.token){e.next=2;break}throw new Error("No token in token service.");case 2:return e.abrupt("return",this.post("/auth/token",{scopes:this.config.scopes},{headers:Object(w.a)({},ye,"Bearer ".concat(null==(r=this.tokenService.getToken("refresh"))?void 0:r.token))}).then((function(e){return n.storeToken(e)})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"updateUser",value:function(e){return xe(this,null,x.a.mark((function t(){var r,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(r=this.tokenService.getToken())?void 0:r.token){t.next=2;break}throw new Error("No token in token service.");case 2:return t.abrupt("return",this.put("/me",e,{headers:Object(w.a)({},ye,"Bearer ".concat(null==(n=this.tokenService.getToken("access"))?void 0:n.token))}));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"login",value:function(e,t,r,n){return xe(this,null,x.a.mark((function o(){var i,s=this;return x.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i={email:e,password:t,device_token:r,scopes:n},o.abrupt("return",this.post("/auth/login",i).then((function(e){return s.storeToken(e)})));case 2:case"end":return o.stop()}}),o,this)})))}},{key:"federatedLogin",value:function(e,t,r,n){return xe(this,arguments,x.a.mark((function e(t,r,n,o){var i,s,a,c,u,l=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=l.length>4&&void 0!==l[4]?l[4]:{width:600,height:800,popUp:!1},(s=document.createElement("form")).style.display="none",i.popUp&&(s.target="TargetWindow"),s.method="POST",(a=new URLSearchParams).set("appId",this.config.appId),a.set("provider",t),a.set("scopes",r.join(",")),a.set("redirectUrl",n),o&&a.set("callbackUrl",o),s.action="".concat(this.baseUrl,"/auth/federated?").concat(a.toString()),document.body.appendChild(s),i.popUp?(c=window.screenX+window.outerWidth/2-(i.width||600)/2,u=window.screenY+window.outerHeight/2-(i.height||800)/2,window.open("","TargetWindow","status=0,title=0,height=".concat(i.height,",width=").concat(i.width,",top=").concat(u,",left=").concat(c,",scrollbars=1"))&&s.submit()):s.submit();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"federatedLoginComplete",value:function(e){return xe(this,null,x.a.mark((function t(){var r=this;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.get("/auth/federated/complete?".concat(e.toString())).then((function(e){return r.storeToken(e)})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"register",value:function(e,t,r){return xe(this,null,x.a.mark((function n(){var o,i=this;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={email:e,password:t,scopes:r},n.abrupt("return",this.post("/auth/register",o).then((function(e){return i.storeToken(e)})));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"requestResetPassword",value:function(e){return xe(this,null,x.a.mark((function t(){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={email:e},t.abrupt("return",this.post("/auth/request_reset_password",r));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"resetPassword",value:function(e){return xe(this,null,x.a.mark((function t(){var r,n,o;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(r=this.tokenService.getToken())?void 0:r.token){t.next=2;break}throw new Error("No token in token service.");case 2:return o={password:e},t.abrupt("return",this.post("/auth/reset_password",o,{headers:Object(w.a)({},ye,"Bearer ".concat(null==(n=this.tokenService.getToken())?void 0:n.token))}));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getAppSettings",value:function(){return xe(this,null,x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.get("/auth/app_settings"));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"enableTFA",value:function(){return xe(this,null,x.a.mark((function e(){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.tokenService.getToken())?void 0:t.token){e.next=2;break}throw new Error("No token in token service.");case 2:return e.abrupt("return",this.put("/auth/tfa/enable",{},{headers:Object(w.a)({},ye,"BEARER ".concat(null==(r=this.tokenService.getToken())?void 0:r.token))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"verifyTFA",value:function(e,t){return xe(this,null,x.a.mark((function r(){var n,o,i=this;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null==(n=this.tokenService.getToken())?void 0:n.token){r.next=2;break}throw new Error("No token in token service.");case 2:return r.abrupt("return",this.post("/auth/tfa/login",{tfa_code:e,scopes:t},{headers:Object(w.a)({},ye,"BEARER ".concat(null==(o=this.tokenService.getToken())?void 0:o.token))}).then((function(e){return i.storeToken(e)})));case 3:case"end":return r.stop()}}),r,this)})))}},{key:"logout",value:function(){return xe(this,null,x.a.mark((function e(){var t,r,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.tokenService.getToken())?void 0:t.token){e.next=2;break}throw new Error("No token in token service.");case 2:return e.abrupt("return",this.post("/me/logout",{refresh_token:null==(r=this.tokenService.getToken("refresh"))?void 0:r.token},{headers:Object(w.a)({},ye,"Bearer ".concat(null==(n=this.tokenService.getToken())?void 0:n.token))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"storeToken",value:function(e){return e.access_token&&this.tokenService.saveToken(e.access_token,"access"),e.refresh_token&&this.tokenService.saveToken(e.refresh_token,"refresh"),e}}]),e}(),_e=/^([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_\-=]*$)/,Oe="Empty or invalid token",Te=function(e){Object(O.a)(r,e);var t=Object(T.a)(r);function r(e,n){return Object(_.a)(this,r),t.call(this,"localStorage",e,n)}return r}(function(){function e(t,r,n){Object(_.a)(this,e),this.preffix="identifo_",this.storageType="localStorage",this.access="".concat(this.preffix,"access_token"),this.refresh="".concat(this.preffix,"refresh_token"),this.isAccessible=!0,this.access=r?this.preffix+r:this.access,this.refresh=n?this.preffix+n:this.refresh,this.storageType=t}return Object(y.a)(e,[{key:"saveToken",value:function(e,t){return!!e&&(window[this.storageType].setItem(this[t],e),!0)}},{key:"getToken",value:function(e){var t;return null!=(t=window[this.storageType].getItem(this[e]))?t:""}},{key:"deleteToken",value:function(e){window[this.storageType].removeItem(this[e])}}]),e}()),Se=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{a(r.next(e))}catch(t){o(t)}},s=function(e){try{a(r.throw(e))}catch(t){o(t)}},a=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};a((r=r.apply(e,t)).next())}))},Ee=function(){function e(t){Object(_.a)(this,e),this.tokenManager=t||new Te}return Object(y.a)(e,[{key:"handleVerification",value:function(e,t,r){return Se(this,null,x.a.mark((function n(){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.tokenManager.isAccessible){n.next=2;break}return n.abrupt("return",!0);case 2:return n.prev=2,n.next=5,this.validateToken(e,t,r);case 5:return this.saveToken(e),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(2),this.removeToken(),n.abrupt("return",Promise.reject(n.t0));case 13:case"end":return n.stop()}}),n,this,[[2,9]])})))}},{key:"validateToken",value:function(e,t,r){return Se(this,null,x.a.mark((function n(){var o,i,s;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}throw new Error(Oe);case 2:if(i=this.parseJWT(e),s=this.isJWTExpired(i),!(null==(o=i.aud)?void 0:o.includes(t))||r&&i.iss!==r||s){n.next=6;break}return n.abrupt("return",Promise.resolve(!0));case 6:throw new Error(Oe);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"parseJWT",value:function(e){var t=e.split(".")[1];if(!t)return{aud:[],iss:"",exp:10};var r=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map((function(e){return"%".concat("00".concat(e.charCodeAt(0).toString(16)).slice(-2))})).join(""));return JSON.parse(n)}},{key:"isJWTExpired",value:function(e){var t=(new Date).getTime()/1e3;return!!(e.exp&&t>e.exp)}},{key:"isAuthenticated",value:function(e,t){if(!this.tokenManager.isAccessible)return Promise.resolve(!0);var r=this.tokenManager.getToken("access");return this.validateToken(r,e,t)}},{key:"saveToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"access";return this.tokenManager.saveToken(e,t)}},{key:"removeToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"access";this.tokenManager.deleteToken(e)}},{key:"getToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"access",t=this.tokenManager.getToken(e);if(!t)return null;var r=this.parseJWT(t);return{token:t,payload:r}}}]),e}(),Pe=function(){function e(t){Object(_.a)(this,e),this.config=t}return Object(y.a)(e,[{key:"getUrl",value:function(e){var t,r,n=(null==(t=this.config.scopes)?void 0:t.join())||"",o=encodeURIComponent(null!=(r=this.config.redirectUri)?r:window.location.href),i="appId=".concat(this.config.appId,"&scopes=").concat(n),s="".concat(i,"&callbackUrl=").concat(o),a=this.config.postLogoutRedirectUri?"&callbackUrl=".concat(encodeURIComponent(this.config.postLogoutRedirectUri)):"&callbackUrl=".concat(o,"&redirectUri=").concat(this.config.url,"/web/login?").concat(encodeURIComponent(i)),c={signup:"".concat(this.config.url,"/web/register?").concat(s),signin:"".concat(this.config.url,"/web/login?").concat(s),logout:"".concat(this.config.url,"/web/logout?").concat(i).concat(a),renew:"".concat(this.config.url,"/web/token/renew?").concat(i,"&redirectUri=").concat(o),default:"default"};return c[e]||c.default}},{key:"createSignupUrl",value:function(){return this.getUrl("signup")}},{key:"createSigninUrl",value:function(){return this.getUrl("signin")}},{key:"createLogoutUrl",value:function(){return this.getUrl("logout")}},{key:"createRenewSessionUrl",value:function(){return this.getUrl("renew")}}]),e}(),Ue=Object.defineProperty,Ae=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Re=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Fe=function(e,t,r){return t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ze=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{a(r.next(e))}catch(t){o(t)}},s=function(e){try{a(r.throw(e))}catch(t){o(t)}},a=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};a((r=r.apply(e,t)).next())}))},Le=function(){function e(t){var r,n,o,i;Object(_.a)(this,e),this.token=null,this.isAuth=!1,this.config=(o=function(e,t){for(var r in t||(t={}))Ie.call(t,r)&&Fe(e,r,t[r]);if(Re){var n,o=Object(j.a)(Re(t));try{for(o.s();!(n=o.n()).done;)r=n.value,Ne.call(t,r)&&Fe(e,r,t[r])}catch(i){o.e(i)}finally{o.f()}}return e}({},t),i={autoRenew:null==(r=t.autoRenew)||r},Ae(o,Ce(i))),this.tokenService=new Ee(t.tokenManager),this.urlBuilder=new Pe(this.config),this.api=new je(t,this.tokenService),this.handleToken((null==(n=this.tokenService.getToken())?void 0:n.token)||"","access")}return Object(y.a)(e,[{key:"handleToken",value:function(e,t){if(e)if("access"===t){var r=this.tokenService.parseJWT(e);this.token={token:e,payload:r},this.isAuth=!0,this.tokenService.saveToken(e)}else this.tokenService.saveToken(e,"refresh")}},{key:"resetAuthValues",value:function(){this.token=null,this.isAuth=!1,this.tokenService.removeToken(),this.tokenService.removeToken("refresh")}},{key:"signup",value:function(){window.location.href=this.urlBuilder.createSignupUrl()}},{key:"signin",value:function(){window.location.href=this.urlBuilder.createSigninUrl()}},{key:"logout",value:function(){this.resetAuthValues(),window.location.href=this.urlBuilder.createLogoutUrl()}},{key:"handleAuthentication",value:function(){return ze(this,null,x.a.mark((function e(){var t,r,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getTokenFromUrl(),r=t.access,n=t.refresh,r){e.next=4;break}return this.resetAuthValues(),e.abrupt("return",Promise.reject());case 4:return e.prev=4,e.next=7,this.tokenService.handleVerification(r,this.config.appId,this.config.issuer);case 7:return this.handleToken(r,"access"),n&&this.handleToken(n,"refresh"),e.next=11,Promise.resolve(!0);case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(4),this.resetAuthValues(),e.next=19,Promise.reject();case 19:return e.abrupt("return",e.sent);case 20:return e.prev=20,window.location.hash="",e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[4,14,20,23]])})))}},{key:"getTokenFromUrl",value:function(){var e=new URLSearchParams(window.location.search),t={access:"",refresh:""},r=e.get("token"),n=e.get("refresh_token");return n&&_e.test(n)&&(t.refresh=n),r&&_e.test(r)&&(t.access=r),t}},{key:"getToken",value:function(){return ze(this,null,x.a.mark((function e(){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.tokenService.getToken(),r=this.tokenService.getToken("refresh"),!t){e.next=18;break}if(!this.tokenService.isJWTExpired(t.payload)||!r){e.next=17;break}return e.prev=5,e.next=8,this.renewSession();case 8:return e.next=10,Promise.resolve(this.token);case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(5),this.resetAuthValues(),new Error("No token");case 17:return e.abrupt("return",Promise.resolve(t));case 18:return e.abrupt("return",Promise.resolve(null));case 19:case"end":return e.stop()}}),e,this,[[5,13]])})))}},{key:"renewSession",value:function(){return ze(this,null,x.a.mark((function e(){var t,r,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.renewSessionWithToken();case 3:return t=e.sent,r=t.access,n=t.refresh,this.handleToken(r,"access"),this.handleToken(n,"refresh"),e.next=10,Promise.resolve(r);case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject());case 16:case"end":return e.stop()}}),e,this,[[0,13]])})))}},{key:"renewSessionWithToken",value:function(){return ze(this,null,x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.renewToken().then((function(e){return{access:e.access_token||"",refresh:e.refresh_token||""}}));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}}]),e}(),Me=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,We=function(e){Object(O.a)(r,e);var t=Object(T.a)(r);function r(){var e;return Object(_.a)(this,r),(e=t.call(this)).__registerHost(),Object(he.b)(Object(le.a)(e)),e.complete=Object(he.c)(Object(le.a)(e),"complete",7),e.error=Object(he.c)(Object(le.a)(e),"error",7),e.route="login",e.theme="light",e.scopes="",e.afterLoginRedirect=function(t){if(e.phone=t.user.phone||"",e.email=t.user.email||"",e.lastResponse=t,t.require_2fa){if(!t.enabled_2fa)return"tfa/setup";if(t.enabled_2fa)return"tfa/verify"}return t.access_token&&t.refresh_token||t.access_token&&!t.refresh_token?"callback":void 0},e.loginCatchRedirect=function(e){if(e.id===ne.PleaseEnableTFA)return"tfa/setup";throw e},e}return Object(y.a)(r,[{key:"processError",value:function(e){this.lastError=e,this.error.emit(e)}},{key:"signIn",value:function(){var e=Object(se.a)(x.a.mark((function e(){var t=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.api.login(this.email,this.password,"",this.scopes.split(",")).then(this.afterLoginRedirect).catch(this.loginCatchRedirect).then((function(e){return t.openRoute(e)})).catch((function(e){return t.processError(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loginWith",value:function(){var e=Object(se.a)(x.a.mark((function e(t){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route="loading",r=this.federatedRedirectUrl||window.location.origin+window.location.pathname,this.auth.api.federatedLogin(t,this.scopes.split(","),r,this.callbackUrl);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signUp",value:function(){var e=Object(se.a)(x.a.mark((function e(){var t=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateEmail(this.email)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.auth.api.register(this.email,this.password,this.scopes.split(",")).then(this.afterLoginRedirect).catch(this.loginCatchRedirect).then((function(e){return t.openRoute(e)})).catch((function(e){return t.processError(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"verifyTFA",value:function(){var e=Object(se.a)(x.a.mark((function e(){var t=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.auth.api.verifyTFA(this.tfaCode,[]).then((function(){return t.openRoute("callback")})).catch((function(e){return t.processError(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupTFA",value:function(){var e=Object(se.a)(x.a.mark((function e(){var t=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tfaType!=oe.TFATypeSMS){e.next=10;break}return e.prev=1,e.next=4,this.auth.api.updateUser({new_phone:this.phone});case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),this.processError(e.t0),e.abrupt("return");case 10:return e.next=12,this.auth.api.enableTFA().then((function(e){e.provisioning_uri||t.openRoute("tfa/verify"),e.provisioning_uri&&(t.provisioningURI=e.provisioning_uri,t.provisioningQR=e.provisioning_qr,t.openRoute("tfa/verify"))}));case 12:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"restorePassword",value:function(){var e=this;this.auth.api.requestResetPassword(this.email).then((function(){e.success=!0,e.openRoute("password/forgot/success")})).catch((function(t){return e.processError(t)}))}},{key:"setNewPassword",value:function(){var e=this;this.token&&this.auth.tokenService.saveToken(this.token,"access"),this.auth.api.resetPassword(this.password).then((function(){e.success=!0,e.openRoute("login"),e.password=""})).catch((function(t){return e.processError(t)}))}},{key:"openRoute",value:function(e){this.lastError=void 0,this.route=e}},{key:"usernameChange",value:function(e){this.username=e.target.value}},{key:"passwordChange",value:function(e){this.password=e.target.value}},{key:"emailChange",value:function(e){this.email=e.target.value}},{key:"phoneChange",value:function(e){this.phone=e.target.value}},{key:"tfaCodeChange",value:function(e){this.tfaCode=e.target.value}},{key:"validateEmail",value:function(e){return!!Me.test(e)||(this.processError({detailedMessage:"Email address is not valid",name:"Validation error",message:"Email address is not valid"}),!1)}},{key:"renderRoute",value:function(e){var t,r,n,o,i,s,a=this;switch(e){case"login":return Object(he.e)("div",{class:"login-form"},Object(he.e)("p",{class:"login-form__register-text"},"Don't have an account?",Object(he.e)("a",{onClick:function(){return a.openRoute("register")},class:"login-form__register-link"}," ","Sign Up")),Object(he.e)("input",{type:"text",class:"form-control ".concat(this.lastError&&"form-control-danger"),id:"floatingInput",value:this.email,placeholder:"Email",onInput:function(e){return a.emailChange(e)},onKeyPress:function(e){return!("Enter"!==e.key||!a.email||!a.password)&&a.signIn()}}),Object(he.e)("input",{type:"password",class:"form-control ".concat(this.lastError&&"form-control-danger"),id:"floatingPassword",value:this.password,placeholder:"Password",onInput:function(e){return a.passwordChange(e)},onKeyPress:function(e){return!("Enter"!==e.key||!a.email||!a.password)&&a.signIn()}}),!!this.lastError&&Object(he.e)("div",{class:"error",role:"alert"},null===(t=this.lastError)||void 0===t?void 0:t.detailedMessage),Object(he.e)("div",{class:"login-form__buttons ".concat(this.lastError?"login-form__buttons_mt-32":"")},Object(he.e)("button",{onClick:function(){return a.signIn()},class:"primary-button",disabled:!this.email||!this.password},"Login"),Object(he.e)("a",{onClick:function(){return a.openRoute("password/forgot")},class:"login-form__forgot-pass"},"Forgot password")),this.federatedProviders.length>0&&Object(he.e)("div",{class:"social-buttons"},Object(he.e)("p",{class:"social-buttons__text"},"or continue with"),Object(he.e)("div",{class:"social-buttons__social-medias"},this.federatedProviders.indexOf("apple")>-1&&Object(he.e)("div",{class:"social-buttons__media",onClick:function(){return a.loginWith("apple")}},Object(he.e)("img",{src:Object(he.d)("assets/images/".concat("apple.svg")),class:"social-buttons__image",alt:"login via apple"})),this.federatedProviders.indexOf("google")>-1&&Object(he.e)("div",{class:"social-buttons__media",onClick:function(){return a.loginWith("google")}},Object(he.e)("img",{src:Object(he.d)("assets/images/".concat("google.svg")),class:"social-buttons__image",alt:"login via google"})),this.federatedProviders.indexOf("facebook")>-1&&Object(he.e)("div",{class:"social-buttons__media",onClick:function(){return a.loginWith("facebook")}},Object(he.e)("img",{src:Object(he.d)("assets/images/".concat("fb.svg")),class:"social-buttons__image",alt:"login via facebook"})))));case"register":return Object(he.e)("div",{class:"register-form"},Object(he.e)("input",{type:"text",class:"form-control ".concat(this.lastError&&"form-control-danger"),id:"floatingInput",value:this.email,placeholder:"Email",onInput:function(e){return a.emailChange(e)},onKeyPress:function(e){return!("Enter"!==e.key||!a.password||!a.email)&&a.signUp()}}),Object(he.e)("input",{type:"password",class:"form-control ".concat(this.lastError&&"form-control-danger"),id:"floatingPassword",value:this.password,placeholder:"Password",onInput:function(e){return a.passwordChange(e)},onKeyPress:function(e){return!("Enter"!==e.key||!a.password||!a.email)&&a.signUp()}}),!!this.lastError&&Object(he.e)("div",{class:"error",role:"alert"},null===(r=this.lastError)||void 0===r?void 0:r.detailedMessage),Object(he.e)("div",{class:"register-form__buttons ".concat(this.lastError?"register-form__buttons_mt-32":"")},Object(he.e)("button",{onClick:function(){return a.signUp()},class:"primary-button",disabled:!this.email||!this.password},"Continue"),Object(he.e)("a",{onClick:function(){return a.openRoute("login")},class:"register-form__log-in"},"Go back to login")));case"otp/login":return Object(he.e)("div",{class:"otp-login"},Object(he.e)("p",{class:"otp-login__register-text"},"Don't have an account?",Object(he.e)("a",{onClick:function(){return a.openRoute("register")},class:"login-form__register-link"}," ","Sign Up")),Object(he.e)("input",{type:"phone",class:"form-control",id:"floatingInput",value:this.phone,placeholder:"Phone number",onInput:function(e){return a.phoneChange(e)}}),Object(he.e)("button",{onClick:function(){return a.openRoute("tfa/verify")},class:"primary-button",disabled:!this.phone},"Continue"),this.federatedProviders.length>0&&Object(he.e)("div",{class:"social-buttons"},Object(he.e)("p",{class:"social-buttons__text"},"or continue with"),Object(he.e)("div",{class:"social-buttons__social-medias"},this.federatedProviders.indexOf("apple")>-1&&Object(he.e)("div",{class:"social-buttons__media",onClick:function(){return a.loginWith("apple")}},Object(he.e)("img",{src:Object(he.d)("assets/images/".concat("apple.svg")),class:"social-buttons__image",alt:"login via apple"})),this.federatedProviders.indexOf("google")>-1&&Object(he.e)("div",{class:"social-buttons__media",onClick:function(){return a.loginWith("google")}},Object(he.e)("img",{src:Object(he.d)("assets/images/".concat("google.svg")),class:"social-buttons__image",alt:"login via google"})),this.federatedProviders.indexOf("facebook")>-1&&Object(he.e)("div",{class:"social-buttons__media",onClick:function(){return a.loginWith("facebook")}},Object(he.e)("img",{src:Object(he.d)("assets/images/".concat("fb.svg")),class:"social-buttons__image",alt:"login via facebook"})))));case"tfa/setup":return Object(he.e)("div",{class:"tfa-setup"},Object(he.e)("p",{class:"tfa-setup__text"},"Protect your account with 2-step verification"),this.tfaType===oe.TFATypeApp&&Object(he.e)("div",{class:"info-card"},Object(he.e)("div",{class:"info-card__controls"},Object(he.e)("p",{class:"info-card__title"},"Authenticator app"),Object(he.e)("button",{type:"button",class:"info-card__button",onClick:function(){return a.setupTFA()}},"Setup")),Object(he.e)("p",{class:"info-card__text"},"Use the Authenticator app to get free verification codes, even when your phone is offline. Available for Android and iPhone.")),this.tfaType===oe.TFATypeEmail&&Object(he.e)("div",{class:"info-card"},Object(he.e)("div",{class:"info-card__controls"},Object(he.e)("p",{class:"info-card__title"},"Email"),Object(he.e)("button",{type:"button",class:"info-card__button",onClick:function(){return a.setupTFA()}},"Setup")),Object(he.e)("p",{class:"info-card__subtitle"},this.email),Object(he.e)("p",{class:"info-card__text"}," Use email as 2fa, please check your email, we will send confirmation code to this email.")),this.tfaType===oe.TFATypeSMS&&Object(he.e)("div",{class:"tfa-setup__form"},Object(he.e)("p",{class:"tfa-setup__subtitle"}," Use phone as 2fa, please check your phone bellow, we will send confirmation code to this phone"),Object(he.e)("input",{type:"phone",class:"form-control ".concat(this.lastError&&"form-control-danger"),id:"floatingInput",value:this.phone,placeholder:"Phone",onInput:function(e){return a.phoneChange(e)},onKeyPress:function(e){return!("Enter"!==e.key||!a.phone)&&a.setupTFA()}}),!!this.lastError&&Object(he.e)("div",{class:"error",role:"alert"},null===(n=this.lastError)||void 0===n?void 0:n.detailedMessage),Object(he.e)("button",{onClick:function(){return a.setupTFA()},class:"primary-button ".concat(this.lastError&&"primary-button-mt-32"),disabled:!this.phone},"Setup phone")));case"tfa/verify":return Object(he.e)("div",{class:"tfa-verify"},!(this.tfaType!==oe.TFATypeApp)&&Object(he.e)("div",{class:"tfa-verify__title-wrapper"},Object(he.e)("h2",{class:this.provisioningURI?"tfa-verify__title":"tfa-verify__title_mb-40"},this.provisioningURI?"Please scan QR-code with the app":"Use GoogleAuth as 2fa"),!!this.provisioningURI&&Object(he.e)("img",{src:"data:image/png;base64, ".concat(this.provisioningQR),alt:this.provisioningURI,class:"tfa-verify__qr-code"})),!(this.tfaType!==oe.TFATypeSMS)&&Object(he.e)("div",{class:"tfa-verify__title-wrapper"},Object(he.e)("h2",{class:"tfa-verify__title"},"Enter the code sent to your phone number"),Object(he.e)("p",{class:"tfa-verify__subtitle"},"The code has been sent to ",this.phone)),!(this.tfaType!==oe.TFATypeEmail)&&Object(he.e)("div",{class:"tfa-verify__title-wrapper"},Object(he.e)("h2",{class:"tfa-verify__title"},"Enter the code sent to your email address"),Object(he.e)("p",{class:"tfa-verify__subtitle"},"The email has been sent to ",this.email)),Object(he.e)("input",{type:"text",class:"form-control ".concat(this.lastError&&"form-control-danger"),id:"floatingCode",value:this.tfaCode,placeholder:"Verify code",onInput:function(e){return a.tfaCodeChange(e)},onKeyPress:function(e){return!("Enter"!==e.key||!a.tfaCode)&&a.verifyTFA()}}),!!this.lastError&&Object(he.e)("div",{class:"error",role:"alert"},null===(o=this.lastError)||void 0===o?void 0:o.detailedMessage),Object(he.e)("button",{type:"button",class:"primary-button ".concat(this.lastError&&"primary-button-mt-32"),disabled:!this.tfaCode,onClick:function(){return a.verifyTFA()}},"Confirm"));case"password/forgot":return Object(he.e)("div",{class:"forgot-password"},Object(he.e)("h2",{class:"forgot-password__title"},"Enter the email you gave when you registered"),Object(he.e)("p",{class:"forgot-password__subtitle"},"We will send you a link to create a new password on email"),Object(he.e)("input",{type:"email",class:"form-control ".concat(this.lastError&&"form-control-danger"),id:"floatingEmail",value:this.email,placeholder:"Email",onInput:function(e){return a.emailChange(e)},onKeyPress:function(e){return!("Enter"!==e.key||!a.email)&&a.restorePassword()}}),!!this.lastError&&Object(he.e)("div",{class:"error",role:"alert"},null===(i=this.lastError)||void 0===i?void 0:i.detailedMessage),Object(he.e)("button",{type:"button",class:"primary-button ".concat(this.lastError&&"primary-button-mt-32"),disabled:!this.email,onClick:function(){return a.restorePassword()}},"Send the link"));case"password/forgot/success":return Object(he.e)("div",{class:"forgot-password-success"},"dark"===this.theme&&Object(he.e)("img",{src:Object(he.d)("./assets/images/".concat("email-dark.svg")),alt:"email",class:"forgot-password-success__image"}),"light"===this.theme&&Object(he.e)("img",{src:Object(he.d)("./assets/images/".concat("email.svg")),alt:"email",class:"forgot-password-success__image"}),Object(he.e)("p",{class:"forgot-password-success__text"},"We sent you an email with a link to create a new password"));case"password/reset":return Object(he.e)("div",{class:"reset-password"},Object(he.e)("h2",{class:"reset-password__title"},"Set up a new password to log in to the website"),Object(he.e)("p",{class:"reset-password__subtitle"},"Memorize your password and do not give it to anyone."),Object(he.e)("input",{type:"password",class:"form-control ".concat(this.lastError&&"form-control-danger"),id:"floatingPassword",value:this.password,placeholder:"Password",onInput:function(e){return a.passwordChange(e)},onKeyPress:function(e){return!("Enter"!==e.key||!a.password)&&a.setNewPassword()}}),!!this.lastError&&Object(he.e)("div",{class:"error",role:"alert"},null===(s=this.lastError)||void 0===s?void 0:s.detailedMessage),Object(he.e)("button",{type:"button",class:"primary-button ".concat(this.lastError&&"primary-button-mt-32"),disabled:!this.password,onClick:function(){return a.setNewPassword()}},"Save password"));case"error":return Object(he.e)("div",{class:"error-view"},Object(he.e)("div",{class:"error-view__message"},this.lastError.message),Object(he.e)("div",{class:"error-view__details"},this.lastError.detailedMessage));case"callback":return Object(he.e)("div",{class:"error-view"},Object(he.e)("div",null,"Success"),this.debug&&Object(he.e)("div",null,Object(he.e)("div",null,"Access token: ",this.lastResponse.access_token),Object(he.e)("div",null,"Refresh token: ",this.lastResponse.refresh_token),Object(he.e)("div",null,"User: ",JSON.stringify(this.lastResponse.user))));case"loading":return Object(he.e)("div",{class:"error-view"},Object(he.e)("div",null,"Loading ..."))}}},{key:"componentWillLoad",value:function(){var e=Object(se.a)(x.a.mark((function e(){var t,r,n,o,i,s=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.auth=new Le({appId:this.appId,url:this.url}),e.prev=1,e.next=4,this.auth.api.getAppSettings();case 4:t=e.sent,this.registrationForbidden=t.registrationForbidden,this.tfaType=t.tfaType,this.federatedProviders=t.federatedProviders,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),this.route="error",this.lastError=e.t0;case 14:(r=new URL(window.location.href)).searchParams.get("provider")&&r.searchParams.get("state")&&(n=new URL(window.location.href),o=new URLSearchParams,i=r.searchParams.get("appId"),o.set("appId",i),window.history.replaceState({},document.title,"".concat(n.pathname,"?").concat(o.toString())),this.route="loading",this.auth.api.federatedLoginComplete(n.searchParams).then(this.afterLoginRedirect).catch(this.loginCatchRedirect).then((function(e){return s.openRoute(e)})).catch((function(e){return s.processError(e)})));case 16:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillRender",value:function(){var e=this;if("callback"===this.route){var t=new URL(window.location.href);t.searchParams.set("callbackUrl",this.lastResponse.callbackUrl),window.history.replaceState({},document.title,"".concat(t.pathname,"?").concat(t.searchParams.toString())),this.complete.emit(this.lastResponse)}"logout"===this.route&&this.auth.api.logout().then((function(){return e.complete.emit()})),"logout"===this.route&&this.auth.api.logout().then((function(){return e.complete.emit()}))}},{key:"render",value:function(){return Object(he.e)(he.a,null,Object(he.e)("div",{class:{wrapper:"light"===this.theme,"wrapper-dark":"dark"===this.theme}},this.renderRoute(this.route)),Object(he.e)("div",{class:"error-view"},this.debug&&Object(he.e)("div",null,Object(he.e)("br",null),this.appId)))}}],[{key:"assetsDirs",get:function(){return["assets"]}},{key:"style",get:function(){return'.wrapper,.wrapper-dark{--content-width:416px}.wrapper{--main-background:#f7f7f7;--blue-text:#6163f6;--field-background:#fff;--gray-line:#e0e0e0;--social-button:#1b1b1b;--text:#1b1b1b;--upload-photo:#e0e0e0;--content-width:416px}.wrapper-dark{--main-background:#1b1b1b;--blue-text:#8b8dfa;--field-background:#423f3f;--gray-line:#423f3f;--social-button:#423f3f;--text:#fff;--upload-photo:#423f3f;--content-width:416px}*{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;font-family:inherit}.wrapper,.wrapper-dark{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.social-buttons{width:100%;position:relative}.social-buttons__text{font-size:14px;line-height:21px;color:#828282;padding:4px 8px;margin-bottom:39px;text-align:center;position:static}.social-buttons__text::before{content:"";position:absolute;height:1px;width:36%;left:0;top:14px;background-color:var(--gray-line)}.social-buttons__text::after{content:"";position:absolute;height:1px;width:36%;right:0;top:14px;background-color:var(--gray-line)}.social-buttons__social-medias{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.social-buttons__media{width:56px;height:56px;border-radius:50%;background-color:var(--social-button);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.social-buttons__media:not(:last-of-type){margin-right:24px}@media (max-width: 599px){.social-buttons__media{width:44px;height:44px}.social-buttons__text{margin-bottom:36px}.social-buttons__text::before{width:26%}.social-buttons__text::after{width:26%}.social-buttons__image{width:16px;height:16px}}.primary-button{background-color:#6163f6;border:none;outline:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:192px;height:64px;border-radius:8px;cursor:pointer;color:#fff;font-size:18px;line-height:26px;-webkit-transition:all 0.4s;transition:all 0.4s}.primary-button:active{-webkit-transform:translateY(-4px);transform:translateY(-4px)}.primary-button:hover{opacity:0.8}.primary-button:disabled{cursor:initial;opacity:0.3}@media (max-width: 599px){.primary-button{width:100%}}.info-card{border:1px solid var(--gray-line);border-radius:8px;padding:24px}.info-card__controls{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.info-card__title{color:var(--text);font-size:18px;line-height:26px;font-weight:700}.info-card__button{color:var(--blue-text);background:none;border:none;cursor:pointer;font-size:18px;line-height:26px}.info-card__text{color:#828282;font-size:16px;line-height:24px;margin-top:8px}.info-card__subtitle{color:var(--text);font-size:16px;line-height:24px;margin:4px 0 12px}@media (max-width: 599px){.info-card__text{font-size:14px;line-height:21px}}.form-control{width:100%;max-width:var(--content-width);height:72px;background-color:var(--field-background);-webkit-box-shadow:0px 11px 15px rgba(0, 0, 0, 0.04);box-shadow:0px 11px 15px rgba(0, 0, 0, 0.04);border-radius:8px;border:none;outline:none;font-size:18px;line-height:26px;color:var(--text);padding:23px 24px}.form-control::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.form-control::-webkit-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::-moz-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control:-ms-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::-ms-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::placeholder{font-size:18px;line-height:26px;color:#828282}.form-control-danger{border:1px solid #F66161}@media (max-width: 599px){.form-control{height:64px}}.upload-photo{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;margin-bottom:48px}.upload-photo__field{display:none}.upload-photo__label{cursor:pointer;color:var(--blue-text);font-size:16px;line-height:24px}.upload-photo__label:first-of-type{margin-right:16px}.upload-photo__avatar{height:64px;width:64px;border-radius:50%;background-color:var(--upload-photo)}@media (max-width: 599px){.upload-photo{margin-bottom:32px}}.error{min-height:21px;width:100%;font-size:14px;line-height:21px;color:#FF5160}.login-form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:var(--content-width)}.login-form__register-text{margin-bottom:32px;font-weight:400;font-size:14px;line-height:24px;color:#828282}.login-form__register-link{color:var(--blue-text);cursor:pointer}.login-form .form-control:first-of-type{margin-bottom:32px}.login-form__buttons{margin-top:48px;display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;margin-bottom:36px}.login-form__buttons_mt-32{margin-top:32px}.login-form__forgot-pass{color:var(--blue-text);font-size:16px;line-height:24px;cursor:pointer}.login-form .primary-button{margin-right:32px}.login-form .error{margin-top:12px}@media (max-width: 599px){.login-form{width:100%;max-width:var(--content-width);padding:0 24px}.login-form__register-text{font-size:16px}.login-form .form-control:first-of-type{margin-bottom:24px}.login-form__buttons{margin-top:32px;-ms-flex-direction:column;flex-direction:column}.login-form .primary-button{margin-right:0;margin-bottom:36px}}.register-form{width:var(--content-width);padding:64px 0 44px}.register-form .form-control:not(:last-of-type){margin-bottom:32px}.register-form__buttons{display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;margin-top:48px}.register-form__buttons_mt-32{margin-top:32px}.register-form__log-in{color:var(--blue-text);font-size:16px;line-height:24px;cursor:pointer}.register-form .primary-button{margin-right:32px}.register-form .error{margin-top:12px}@media (max-width: 599px){.register-form{width:100%;max-width:var(--content-width);padding:48px 24px 32px}.register-form .form-control{margin-bottom:24px}.register-form .primary-button{margin-right:0;margin-bottom:36px}.register-form__buttons{-ms-flex-direction:column;flex-direction:column;margin-top:32px}}.tfa-setup{padding:48px 0 80px;width:var(--content-width);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-setup__text{font-size:24px;line-height:32px;color:var(--text);text-align:center;max-width:260px;width:100%}.tfa-setup .error{margin-top:12px}.tfa-setup__form{width:100%}.tfa-setup__form .primary-button{margin:48px auto 0}.tfa-setup__form .primary-button-mt-32{margin-top:32px}.tfa-setup__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:270px;text-align:center;margin:16px auto 48px}.tfa-setup .info-card{margin-top:48px}@media (max-width: 599px){.tfa-setup{width:100%;max-width:var(--content-width);padding:38px 24px 36px}}.tfa-verify{padding:48px 0 52px;width:var(--content-width);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-verify .error{margin-top:12px}.tfa-verify__title-wrapper{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-verify__title,.tfa-verify__title_mb-40{color:var(--text);font-size:24px;line-height:32px;max-width:280px;text-align:center;font-weight:400;margin-bottom:16px}.tfa-verify__title_mb-40{margin-bottom:40px}.tfa-verify__app-button{font-size:18px;line-height:26px;background:none;border:none;color:var(--blue-text);margin-bottom:40px}.tfa-verify .primary-button{margin-top:48px}.tfa-verify .primary-button-mt-32{margin-top:32px}.tfa-verify__back{font-size:16px;line-height:24px;color:var(--blue-text)}.tfa-verify__subtitle{font-size:16px;line-height:24px;margin-bottom:48px;color:#828282;max-width:189px;text-align:center}.tfa-verify__qr-code{width:160px;height:160px;margin-bottom:64px}@media (max-width: 599px){.tfa-verify{padding:102px 24px 41px;width:100%;max-width:var(--content-width)}.tfa-verify .primary-button{margin-top:32px}.tfa-verify__qr-code{margin-bottom:48px}}.otp-login{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:44px 24px 102px;width:100%;max-width:var(--content-width)}.otp-login__register-text{margin-bottom:32px;font-weight:400;font-size:14px;line-height:24px;color:#828282}.otp-login .form-control{margin-bottom:48px}.otp-login .primary-button{margin-bottom:36px}.error-view{width:100%;max-width:var(--content-width);padding:0 24px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;word-break:break-all}.error-view__message{color:var(--text);font-size:24px;line-height:32px;text-align:center;margin-bottom:16px}.error-view__details{color:#828282;font-size:16px;line-height:24px;text-align:center}.error-view .primary-button{margin-top:64px}.forgot-password{width:var(--content-width)}.forgot-password__title{text-align:center;margin-bottom:16px;font-size:24px;line-height:32px;font-weight:400;color:var(--text)}.forgot-password__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:189px;text-align:center;margin:0 auto 48px}.forgot-password .error{margin-top:12px}.forgot-password .primary-button{margin:48px auto 0}.forgot-password .primary-button-mt-32{margin-top:32px}@media (max-width: 599px){.forgot-password{width:100%;max-width:var(--content-width);padding:0 24px}.forgot-password .primary-button{margin-top:32px}}.forgot-password-success{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;padding:0 16px}.forgot-password-success__text{width:100%;max-width:367px;font-size:24px;line-height:32px;text-align:center;color:var(--text)}.forgot-password-success__image{margin-bottom:56px}.reset-password{width:var(--content-width)}.reset-password__title{text-align:center;font-size:24px;line-height:32px;font-weight:400;color:var(--text);max-width:270px;margin:0 auto 16px}.reset-password__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:189px;text-align:center;margin:0 auto 48px}.reset-password .error{margin-top:12px}.reset-password .primary-button{margin:48px auto 0}.reset-password .primary-button-mt-32{margin-top:32px}@media (max-width: 599px){.reset-password{width:100%;max-width:var(--content-width);padding:0 24px}.reset-password .primary-button{margin-top:32px}}'}}]),r}(Object(S.a)(HTMLElement)),Je=Object(he.f)(We,[1,"identifo-form",{route:[1537],token:[1],appId:[513,"app-id"],url:[513],theme:[1],scopes:[1],callbackUrl:[1,"callback-url"],federatedRedirectUrl:[1,"federated-redirect-url"],debug:[4],auth:[32],username:[32],password:[32],phone:[32],email:[32],registrationForbidden:[32],tfaCode:[32],tfaType:[32],federatedProviders:[32],tfaMandatory:[32],provisioningURI:[32],provisioningQR:[32],success:[32],lastError:[32],lastResponse:[32]}]);Object(he.g)(window.location.href+"/public/"),pe=window,"undefined"!==typeof customElements&&[Je].forEach((function(e){customElements.get(e.is)||customElements.define(e.is,e,pe)})),l.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(h.a,{children:Object(d.jsx)(m,{children:Object(d.jsx)(ce,{})})})}),document.getElementById("root")),ue()}},[[51,1,2]]]);
//# sourceMappingURL=main.7f9b6d13.chunk.js.map