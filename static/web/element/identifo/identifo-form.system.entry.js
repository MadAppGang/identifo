var __extends=this&&this.__extends||function(){var t=function(e,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]};return t(e,r)};return function(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function o(){this.constructor=e}e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();var __awaiter=this&&this.__awaiter||function(t,e,r,o){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,n){function s(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o["throw"](t))}catch(t){n(t)}}function l(t){t.done?r(t.value):i(t.value).then(s,a)}l((o=o.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,i,n,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return l([t,e])}}function l(s){if(o)throw new TypeError("Generator is already executing.");while(r)try{if(o=1,i&&(n=s[0]&2?i["return"]:s[0]?i["throw"]||((n=i["return"])&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;if(i=0,n)s=[s[0]&2,n.value];switch(s[0]){case 0:case 1:n=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(n=r.trys,n=n.length>0&&n[n.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!n||s[1]>n[0]&&s[1]<n[3])){r.label=s[1];break}if(s[0]===6&&r.label<n[1]){r.label=n[1];n=s;break}if(n&&r.label<n[2]){r.label=n[2];r.ops.push(s);break}if(n[2])r.ops.pop();r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t];i=0}finally{o=n=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./index-3cbc1a4b.system.js"],(function(t){"use strict";var e,r,o,i,n;return{setters:[function(t){e=t.r;r=t.c;o=t.h;i=t.g;n=t.H}],execute:function(){var s;(function(t){t["PleaseEnableTFA"]="error.api.request.2fa.please_enable";t["InvalidCallbackURL"]="error.api.request.callbackurl.invalid";t["NetworkError"]="error.network"})(s||(s={}));var a;(function(t){t["TFATypeApp"]="app";t["TFATypeSMS"]="sms";t["TFATypeEmail"]="email"})(a||(a={}));var l;(function(t){t["DISABLED"]="disabled";t["OPTIONAL"]="optional";t["MANDATORY"]="mandatory"})(l||(l={}));var c=function(t){__extends(e,t);function e(e){var r=t.call(this,(e==null?void 0:e.message)||"Unknown API error")||this;r.detailedMessage=e==null?void 0:e.detailed_message;r.id=e==null?void 0:e.id;r.status=e==null?void 0:e.status;return r}return e}(Error);var u=Object.defineProperty;var p=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty;var f=Object.prototype.propertyIsEnumerable;var d=function(t,e,r){return e in t?u(t,e,{enumerable:true,configurable:true,writable:true,value:r}):t[e]=r};var g=function(t,e){for(var r in e||(e={}))if(h.call(e,r))d(t,r,e[r]);if(p)for(var o=0,i=p(e);o<i.length;o++){var r=i[o];if(f.call(e,r))d(t,r,e[r])}return t};var m=function(t,e,r){return new Promise((function(o,i){var n=function(t){try{a(r.next(t))}catch(t){i(t)}};var s=function(t){try{a(r.throw(t))}catch(t){i(t)}};var a=function(t){return t.done?o(t.value):Promise.resolve(t.value).then(n,s)};a((r=r.apply(t,e)).next())}))};var v="X-Identifo-Clientid";var x="Authorization";var w=function(){function t(t,e){var r;var o=this;this.config=t;this.tokenService=e;this.defaultHeaders=(r={},r[v]="",r.Accept="application/json",r["Content-Type"]="application/json",r);this.catchNetworkErrorHandler=function(t){if(t.message==="Network Error"||t.message==="Failed to fetch"||t.message==="Preflight response is not successful"||t.message.indexOf("is not allowed by Access-Control-Allow-Origin")>-1){console.error(t.message);throw new c({id:s.NetworkError,status:0,message:"Configuration error",detailed_message:'Please check Identifo URL and add "'+window.location.protocol+"//"+window.location.host+'" to "REDIRECT URLS" in Identifo app settings.'})}throw t};this.checkStatusCodeAndGetJSON=function(t){return m(o,null,(function(){var e;return __generator(this,(function(r){switch(r.label){case 0:if(!!t.ok)return[3,2];return[4,t.json()];case 1:e=r.sent();throw new c(e==null?void 0:e.error);case 2:return[2,t.json()]}}))}))};this.baseUrl=t.url.replace(/\/$/,"");this.defaultHeaders[v]=t.appId;this.appId=t.appId}t.prototype.get=function(t,e){return this.send(t,g({method:"GET"},e))};t.prototype.put=function(t,e,r){return this.send(t,g({method:"PUT",body:JSON.stringify(e)},r))};t.prototype.post=function(t,e,r){return this.send(t,g({method:"POST",body:JSON.stringify(e)},r))};t.prototype.send=function(t,e){var r=g({},e);r.credentials="include";r.headers=g(g({},r.headers),this.defaultHeaders);return fetch(""+this.baseUrl+t,r).catch(this.catchNetworkErrorHandler).then(this.checkStatusCodeAndGetJSON).then((function(t){return t}))};t.prototype.getUser=function(){return m(this,null,(function(){var t,e;var r;return __generator(this,(function(o){if(!((t=this.tokenService.getToken())==null?void 0:t.token)){throw new Error("No token in token service.")}return[2,this.get("/me",{headers:(r={},r[x]="Bearer "+((e=this.tokenService.getToken())==null?void 0:e.token),r)})]}))}))};t.prototype.renewToken=function(){return m(this,null,(function(){var t,e;var r;var o=this;return __generator(this,(function(i){if(!((t=this.tokenService.getToken("refresh"))==null?void 0:t.token)){throw new Error("No token in token service.")}return[2,this.post("/auth/token",{scopes:this.config.scopes},{headers:(r={},r[x]="Bearer "+((e=this.tokenService.getToken("refresh"))==null?void 0:e.token),r)}).then((function(t){return o.storeToken(t)}))]}))}))};t.prototype.updateUser=function(t){return m(this,null,(function(){var e,r;var o;return __generator(this,(function(i){if(!((e=this.tokenService.getToken())==null?void 0:e.token)){throw new Error("No token in token service.")}return[2,this.put("/me",t,{headers:(o={},o[x]="Bearer "+((r=this.tokenService.getToken("access"))==null?void 0:r.token),o)})]}))}))};t.prototype.login=function(t,e,r,o){return m(this,null,(function(){var i;var n=this;return __generator(this,(function(s){i={email:t,password:e,device_token:r,scopes:o};return[2,this.post("/auth/login",i).then((function(t){return n.storeToken(t)}))]}))}))};t.prototype.federatedLogin=function(t,e,r,o){return m(this,arguments,(function(t,e,r,o,i){var n,s,a,l,c;if(i===void 0){i={width:600,height:800,popUp:false}}return __generator(this,(function(u){n=document.createElement("form");n.style.display="none";if(i.popUp){n.target="TargetWindow"}n.method="POST";s=new URLSearchParams;s.set("appId",this.config.appId);s.set("provider",t);s.set("scopes",e.join(","));s.set("redirectUrl",r);if(o){s.set("callbackUrl",o)}n.action=this.baseUrl+"/auth/federated?"+s.toString();document.body.appendChild(n);if(i.popUp){a=window.screenX+window.outerWidth/2-(i.width||600)/2;l=window.screenY+window.outerHeight/2-(i.height||800)/2;c=window.open("","TargetWindow","status=0,title=0,height="+i.height+",width="+i.width+",top="+l+",left="+a+",scrollbars=1");if(c){n.submit()}}else{window.location.assign(this.baseUrl+"/auth/federated?"+s.toString())}return[2]}))}))};t.prototype.federatedLoginComplete=function(t){return m(this,null,(function(){var e=this;return __generator(this,(function(r){return[2,this.get("/auth/federated/complete?"+t.toString()).then((function(t){return e.storeToken(t)}))]}))}))};t.prototype.register=function(t,e,r){return m(this,null,(function(){var o;var i=this;return __generator(this,(function(n){o={email:t,password:e,scopes:r};return[2,this.post("/auth/register",o).then((function(t){return i.storeToken(t)}))]}))}))};t.prototype.requestResetPassword=function(t,e){return m(this,null,(function(){var r;return __generator(this,(function(o){r={email:t,tfa_code:e};return[2,this.post("/auth/request_reset_password",r)]}))}))};t.prototype.resetPassword=function(t){return m(this,null,(function(){var e,r,o;var i;return __generator(this,(function(n){if(!((e=this.tokenService.getToken())==null?void 0:e.token)){throw new Error("No token in token service.")}o={password:t};return[2,this.post("/auth/reset_password",o,{headers:(i={},i[x]="Bearer "+((r=this.tokenService.getToken())==null?void 0:r.token),i)})]}))}))};t.prototype.getAppSettings=function(t){return m(this,null,(function(){return __generator(this,(function(e){return[2,this.get("/auth/app_settings?"+new URLSearchParams({callbackUrl:t}).toString())]}))}))};t.prototype.enableTFA=function(){return m(this,null,(function(){var t,e;var r;var o=this;return __generator(this,(function(i){if(!((t=this.tokenService.getToken())==null?void 0:t.token)){throw new Error("No token in token service.")}return[2,this.put("/auth/tfa/enable",{},{headers:(r={},r[x]="BEARER "+((e=this.tokenService.getToken())==null?void 0:e.token),r)}).then((function(t){return o.storeToken(t)}))]}))}))};t.prototype.verifyTFA=function(t,e){return m(this,null,(function(){var r,o;var i;var n=this;return __generator(this,(function(s){if(!((r=this.tokenService.getToken())==null?void 0:r.token)){throw new Error("No token in token service.")}return[2,this.post("/auth/tfa/login",{tfa_code:t,scopes:e},{headers:(i={},i[x]="BEARER "+((o=this.tokenService.getToken())==null?void 0:o.token),i)}).then((function(t){return n.storeToken(t)}))]}))}))};t.prototype.logout=function(){return m(this,null,(function(){var t,e,r;var o;return __generator(this,(function(i){if(!((t=this.tokenService.getToken())==null?void 0:t.token)){throw new Error("No token in token service.")}return[2,this.post("/me/logout",{refresh_token:(e=this.tokenService.getToken("refresh"))==null?void 0:e.token},{headers:(o={},o[x]="Bearer "+((r=this.tokenService.getToken())==null?void 0:r.token),o)})]}))}))};t.prototype.storeToken=function(t){if(t.access_token){this.tokenService.saveToken(t.access_token,"access")}if(t.refresh_token){this.tokenService.saveToken(t.refresh_token,"refresh")}return t};return t}();var _=/^([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_\-=]*$)/;var b="Empty or invalid token";var y="token";var k="refresh_token";var T=function(){function t(t,e,r){this.preffix="identifo_";this.storageType="localStorage";this.access=this.preffix+"access_token";this.refresh=this.preffix+"refresh_token";this.isAccessible=true;this.access=e?this.preffix+e:this.access;this.refresh=r?this.preffix+r:this.refresh;this.storageType=t}t.prototype.saveToken=function(t,e){if(t){window[this.storageType].setItem(this[e],t);return true}return false};t.prototype.getToken=function(t){var e;return(e=window[this.storageType].getItem(this[t]))!=null?e:""};t.prototype.deleteToken=function(t){window[this.storageType].removeItem(this[t])};return t}();var E=function(t){__extends(e,t);function e(e,r){return t.call(this,"localStorage",e,r)||this}return e}(T);var S=function(t,e,r){return new Promise((function(o,i){var n=function(t){try{a(r.next(t))}catch(t){i(t)}};var s=function(t){try{a(r.throw(t))}catch(t){i(t)}};var a=function(t){return t.done?o(t.value):Promise.resolve(t.value).then(n,s)};a((r=r.apply(t,e)).next())}))};var P=function(){function t(t){this.tokenManager=t||new E}t.prototype.handleVerification=function(t,e,r){return S(this,null,(function(){var o;return __generator(this,(function(i){switch(i.label){case 0:if(!this.tokenManager.isAccessible)return[2,true];i.label=1;case 1:i.trys.push([1,3,,4]);return[4,this.validateToken(t,e,r)];case 2:i.sent();this.saveToken(t);return[2,true];case 3:o=i.sent();this.removeToken();return[2,Promise.reject(o)];case 4:return[2]}}))}))};t.prototype.validateToken=function(t,e,r){return S(this,null,(function(){var o,i,n;return __generator(this,(function(s){if(!t)throw new Error(b);i=this.parseJWT(t);n=this.isJWTExpired(i);if(((o=i.aud)==null?void 0:o.includes(e))&&(!r||i.iss===r)&&!n){return[2,Promise.resolve(true)]}throw new Error(b)}))}))};t.prototype.parseJWT=function(t){var e=t.split(".")[1];if(!e)return{aud:[],iss:"",exp:10};var r=e.replace(/-/g,"+").replace(/_/g,"/");var o=decodeURIComponent(atob(r).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(o)};t.prototype.isJWTExpired=function(t){var e=(new Date).getTime()/1e3;if(t.exp&&e>t.exp){return true}return false};t.prototype.isAuthenticated=function(t,e){if(!this.tokenManager.isAccessible)return Promise.resolve(true);var r=this.tokenManager.getToken("access");return this.validateToken(r,t,e)};t.prototype.saveToken=function(t,e){if(e===void 0){e="access"}return this.tokenManager.saveToken(t,e)};t.prototype.removeToken=function(t){if(t===void 0){t="access"}this.tokenManager.deleteToken(t)};t.prototype.getToken=function(t){if(t===void 0){t="access"}var e=this.tokenManager.getToken(t);if(!e)return null;var r=this.parseJWT(e);return{token:e,payload:r}};return t}();var A=function(){function t(t){this.config=t}t.prototype.getUrl=function(t){var e,r;var o=((e=this.config.scopes)==null?void 0:e.join())||"";var i=encodeURIComponent((r=this.config.redirectUri)!=null?r:window.location.href);var n="appId="+this.config.appId+"&scopes="+o;var s=n+"&callbackUrl="+i;var a=this.config.postLogoutRedirectUri?"&callbackUrl="+encodeURIComponent(this.config.postLogoutRedirectUri):"&callbackUrl="+i+"&redirectUri="+this.config.url+"/web/login?"+encodeURIComponent(n);var l={signup:this.config.url+"/web/register?"+s,signin:this.config.url+"/web/login?"+s,logout:this.config.url+"/web/logout?"+n+a,renew:this.config.url+"/web/token/renew?"+n+"&redirectUri="+i,default:"default"};return l[t]||l.default};t.prototype.createSignupUrl=function(){return this.getUrl("signup")};t.prototype.createSigninUrl=function(){return this.getUrl("signin")};t.prototype.createLogoutUrl=function(){return this.getUrl("logout")};t.prototype.createRenewSessionUrl=function(){return this.getUrl("renew")};return t}();var C=Object.defineProperty;var R=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty;var F=Object.prototype.propertyIsEnumerable;var z=function(t,e,r){return e in t?C(t,e,{enumerable:true,configurable:true,writable:true,value:r}):t[e]=r};var L=function(t,e){for(var r in e||(e={}))if(O.call(e,r))z(t,r,e[r]);if(I)for(var o=0,i=I(e);o<i.length;o++){var r=i[o];if(F.call(e,r))z(t,r,e[r])}return t};var j=function(t,e){return R(t,U(e))};var M=function(t,e,r){return new Promise((function(o,i){var n=function(t){try{a(r.next(t))}catch(t){i(t)}};var s=function(t){try{a(r.throw(t))}catch(t){i(t)}};var a=function(t){return t.done?o(t.value):Promise.resolve(t.value).then(n,s)};a((r=r.apply(t,e)).next())}))};var N=function(){function t(t){this.token=null;this.isAuth=false;var e,r;this.config=j(L({},t),{autoRenew:(e=t.autoRenew)!=null?e:true});this.tokenService=new P(t.tokenManager);this.urlBuilder=new A(this.config);this.api=new w(t,this.tokenService);this.handleToken(((r=this.tokenService.getToken())==null?void 0:r.token)||"","access")}t.prototype.handleToken=function(t,e){if(t){if(e==="access"){var r=this.tokenService.parseJWT(t);this.token={token:t,payload:r};this.isAuth=true;this.tokenService.saveToken(t)}else{this.tokenService.saveToken(t,"refresh")}}};t.prototype.resetAuthValues=function(){this.token=null;this.isAuth=false;this.tokenService.removeToken();this.tokenService.removeToken("refresh")};t.prototype.signup=function(){window.location.href=this.urlBuilder.createSignupUrl()};t.prototype.signin=function(){window.location.href=this.urlBuilder.createSigninUrl()};t.prototype.logout=function(){this.resetAuthValues();window.location.href=this.urlBuilder.createLogoutUrl()};t.prototype.handleAuthentication=function(){return M(this,null,(function(){var t,e,r,o;return __generator(this,(function(i){switch(i.label){case 0:t=this.getTokenFromUrl(),e=t.access,r=t.refresh;if(!e){this.resetAuthValues();return[2,Promise.reject()]}i.label=1;case 1:i.trys.push([1,4,6,7]);return[4,this.tokenService.handleVerification(e,this.config.appId,this.config.issuer)];case 2:i.sent();this.handleToken(e,"access");if(r){this.handleToken(r,"refresh")}return[4,Promise.resolve(true)];case 3:return[2,i.sent()];case 4:o=i.sent();this.resetAuthValues();return[4,Promise.reject()];case 5:return[2,i.sent()];case 6:window.history.pushState({},document.title,window.location.pathname);return[7];case 7:return[2]}}))}))};t.prototype.getTokenFromUrl=function(){var t=new URLSearchParams(window.location.search);var e={access:"",refresh:""};var r=t.get(y);var o=t.get(k);if(o&&_.test(o)){e.refresh=o}if(r&&_.test(r)){e.access=r}return e};t.prototype.getToken=function(){return M(this,null,(function(){var t,e,r,o;return __generator(this,(function(i){switch(i.label){case 0:t=this.tokenService.getToken();e=this.tokenService.getToken("refresh");if(!t)return[3,6];r=this.tokenService.isJWTExpired(t.payload);if(!(r&&e))return[3,5];i.label=1;case 1:i.trys.push([1,4,,5]);return[4,this.renewSession()];case 2:i.sent();return[4,Promise.resolve(this.token)];case 3:return[2,i.sent()];case 4:o=i.sent();this.resetAuthValues();throw new Error("No token");case 5:return[2,Promise.resolve(t)];case 6:return[2,Promise.resolve(null)]}}))}))};t.prototype.renewSession=function(){return M(this,null,(function(){var t,e,r,o;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,3,,4]);return[4,this.renewSessionWithToken()];case 1:t=i.sent(),e=t.access,r=t.refresh;this.handleToken(e,"access");this.handleToken(r,"refresh");return[4,Promise.resolve(e)];case 2:return[2,i.sent()];case 3:o=i.sent();return[2,Promise.reject()];case 4:return[2]}}))}))};t.prototype.renewSessionWithToken=function(){return M(this,null,(function(){var t,e;return __generator(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);return[4,this.api.renewToken().then((function(t){return{access:t.access_token||"",refresh:t.refresh_token||""}}))];case 1:t=r.sent();return[2,t];case 2:e=r.sent();return[2,Promise.reject(e)];case 3:return[2]}}))}))};return t}();var W='.wrapper,.wrapper-dark{--content-width:416px}.wrapper{--main-background:#f7f7f7;--blue-text:#6163f6;--field-background:#fff;--gray-line:#e0e0e0;--social-button:#1b1b1b;--text:#1b1b1b;--upload-photo:#e0e0e0;--content-width:416px}.wrapper-dark{--main-background:#1b1b1b;--blue-text:#8b8dfa;--field-background:#423f3f;--gray-line:#423f3f;--social-button:#423f3f;--text:#fff;--upload-photo:#423f3f;--content-width:416px}*{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;font-family:inherit}.wrapper,.wrapper-dark{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.social-buttons{width:100%;position:relative}.social-buttons__text{font-size:14px;line-height:21px;color:#828282;padding:4px 8px;margin-bottom:39px;text-align:center;position:static}.social-buttons__text::before{content:"";position:absolute;height:1px;width:36%;left:0;top:14px;background-color:var(--gray-line)}.social-buttons__text::after{content:"";position:absolute;height:1px;width:36%;right:0;top:14px;background-color:var(--gray-line)}.social-buttons__social-medias{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.social-buttons__media{width:56px;height:56px;border-radius:50%;background-color:var(--social-button);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.social-buttons__media:not(:last-of-type){margin-right:24px}@media (max-width: 599px){.social-buttons__media{width:44px;height:44px}.social-buttons__text{margin-bottom:36px}.social-buttons__text::before{width:26%}.social-buttons__text::after{width:26%}.social-buttons__image{width:16px;height:16px}}.primary-button{background-color:#6163f6;border:none;outline:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:192px;height:64px;border-radius:8px;cursor:pointer;color:#fff;font-size:18px;line-height:26px;-webkit-transition:all 0.4s;transition:all 0.4s}.primary-button:active{-webkit-transform:translateY(-4px);transform:translateY(-4px)}.primary-button:hover{opacity:0.8}.primary-button:disabled{cursor:initial;opacity:0.3}@media (max-width: 599px){.primary-button{width:100%}}.info-card{border:1px solid var(--gray-line);border-radius:8px;padding:24px}.info-card__controls{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.info-card__title{color:var(--text);font-size:18px;line-height:26px;font-weight:700}.info-card__button{color:var(--blue-text);background:none;border:none;cursor:pointer;font-size:18px;line-height:26px}.info-card__text{color:#828282;font-size:16px;line-height:24px;margin-top:8px}.info-card__subtitle{color:var(--text);font-size:16px;line-height:24px;margin:4px 0 12px}@media (max-width: 599px){.info-card__text{font-size:14px;line-height:21px}}.form-control{width:100%;max-width:var(--content-width);height:72px;background-color:var(--field-background);-webkit-box-shadow:0px 11px 15px rgba(0, 0, 0, 0.04);box-shadow:0px 11px 15px rgba(0, 0, 0, 0.04);border-radius:8px;border:none;outline:none;font-size:18px;line-height:26px;color:var(--text);padding:23px 24px}.form-control::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.form-control::-webkit-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::-moz-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control:-ms-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::-ms-input-placeholder{font-size:18px;line-height:26px;color:#828282}.form-control::placeholder{font-size:18px;line-height:26px;color:#828282}.form-control-danger{border:1px solid #F66161}@media (max-width: 599px){.form-control{height:64px}}.upload-photo{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;margin-bottom:48px}.upload-photo__field{display:none}.upload-photo__label{cursor:pointer;color:var(--blue-text);font-size:16px;line-height:24px}.upload-photo__label:first-of-type{margin-right:16px}.upload-photo__avatar{height:64px;width:64px;border-radius:50%;background-color:var(--upload-photo)}@media (max-width: 599px){.upload-photo{margin-bottom:32px}}.error{min-height:21px;width:100%;font-size:14px;line-height:21px;color:#FF5160}.login-form{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:var(--content-width)}.login-form__register-text{margin-bottom:32px;font-weight:400;font-size:14px;line-height:24px;color:#828282}.login-form__register-link{color:var(--blue-text);cursor:pointer}.login-form .form-control:first-of-type{margin-bottom:32px}.login-form__buttons{margin-top:48px;display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;margin-bottom:36px}.login-form__buttons_mt-32{margin-top:32px}.login-form__forgot-pass{color:var(--blue-text);font-size:16px;line-height:24px;cursor:pointer}.login-form .primary-button{margin-right:32px}.login-form .error{margin-top:12px}@media (max-width: 599px){.login-form{width:100%;max-width:var(--content-width);padding:0 24px}.login-form__register-text{font-size:16px}.login-form .form-control:first-of-type{margin-bottom:24px}.login-form__buttons{margin-top:32px;-ms-flex-direction:column;flex-direction:column}.login-form .primary-button{margin-right:0;margin-bottom:36px}}.register-form{width:var(--content-width);padding:64px 0 44px}.register-form .form-control:not(:last-of-type){margin-bottom:32px}.register-form__buttons{display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;margin-top:48px}.register-form__buttons_mt-32{margin-top:32px}.register-form__login{color:var(--blue-text);font-size:16px;line-height:24px;cursor:pointer}.register-form .primary-button{margin-right:32px}.register-form .error{margin-top:12px}@media (max-width: 599px){.register-form{width:100%;max-width:var(--content-width);padding:48px 24px 32px}.register-form .form-control{margin-bottom:24px}.register-form .primary-button{margin-right:0;margin-bottom:36px}.register-form__buttons{-ms-flex-direction:column;flex-direction:column;margin-top:32px}}.tfa-setup{padding:48px 0 80px;width:var(--content-width);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-setup__text{font-size:24px;line-height:32px;color:var(--text);text-align:center;max-width:260px;width:100%}.tfa-setup .error{margin-top:12px}.tfa-setup__form{width:100%}.tfa-setup__form .primary-button{margin:48px auto 0}.tfa-setup__form .primary-button-mt-32{margin-top:32px}.tfa-setup__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:270px;text-align:center;margin:16px auto 48px}.tfa-setup .info-card{margin-top:48px}.tfa-setup__qr-wrapper{text-align:center}.tfa-setup__qr-code{width:200px;height:200px}@media (max-width: 599px){.tfa-setup{width:100%;max-width:var(--content-width);padding:38px 24px 36px}}.tfa-verify{padding:48px 0 52px;width:var(--content-width);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-verify .error{margin-top:12px}.tfa-verify__title-wrapper{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.tfa-verify__title,.tfa-verify__title_mb-40{color:var(--text);font-size:24px;line-height:32px;max-width:280px;text-align:center;font-weight:400;margin-bottom:16px}.tfa-verify__title_mb-40{margin-bottom:40px}.tfa-verify__app-button{font-size:18px;line-height:26px;background:none;border:none;color:var(--blue-text);margin-bottom:40px}.tfa-verify .primary-button{margin-top:48px}.tfa-verify .primary-button-mt-32{margin-top:32px}.tfa-verify__back{font-size:16px;line-height:24px;color:var(--blue-text)}.tfa-verify__subtitle{font-size:16px;line-height:24px;margin-bottom:48px;color:#828282;max-width:189px;text-align:center}.tfa-verify__qr-code{width:160px;height:160px;margin-bottom:64px}@media (max-width: 599px){.tfa-verify{padding:102px 24px 41px;width:100%;max-width:var(--content-width)}.tfa-verify .primary-button{margin-top:32px}.tfa-verify__qr-code{margin-bottom:48px}}.otp-login{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:44px 24px 102px;width:100%;max-width:var(--content-width)}.otp-login__register-text{margin-bottom:32px;font-weight:400;font-size:14px;line-height:24px;color:#828282}.otp-login .form-control{margin-bottom:48px}.otp-login .primary-button{margin-bottom:36px}.error-view{width:100%;max-width:var(--content-width);padding:0 24px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;word-break:break-all}.error-view__message{color:var(--text);font-size:24px;line-height:32px;text-align:center;margin-bottom:16px}.error-view__details{color:#828282;font-size:16px;line-height:24px;text-align:center}.error-view .primary-button{margin-top:64px}.forgot-password{width:var(--content-width)}.forgot-password__title{text-align:center;margin-bottom:16px;font-size:24px;line-height:32px;font-weight:400;color:var(--text)}.forgot-password__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:189px;text-align:center;margin:0 auto 48px}.forgot-password__login{text-align:center;display:block;margin-top:16px;color:var(--blue-text);font-size:16px;line-height:24px;cursor:pointer}.forgot-password .error{margin-top:12px}.forgot-password .primary-button{margin:48px auto 0}.forgot-password .primary-button-mt-32{margin-top:32px}@media (max-width: 599px){.forgot-password{width:100%;max-width:var(--content-width);padding:0 24px}.forgot-password .primary-button{margin-top:32px}}.forgot-password-success{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;padding:0 16px}.forgot-password-success__text{width:100%;max-width:367px;font-size:24px;line-height:32px;text-align:center;color:var(--text)}.forgot-password-success__image{margin-bottom:56px}.reset-password{width:var(--content-width)}.reset-password__title{text-align:center;font-size:24px;line-height:32px;font-weight:400;color:var(--text);max-width:270px;margin:0 auto 16px}.reset-password__subtitle{text-align:center;font-size:16px;line-height:24px;color:#828282;max-width:189px;text-align:center;margin:0 auto 48px}.reset-password .error{margin-top:12px}.reset-password .primary-button{margin:48px auto 0}.reset-password .primary-button-mt-32{margin-top:32px}@media (max-width: 599px){.reset-password{width:100%;max-width:var(--content-width);padding:0 24px}.reset-password .primary-button{margin-top:32px}}';var B=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var q=t("identifo_form",function(){function t(t){var o=this;e(this,t);this.complete=r(this,"complete",7);this.error=r(this,"error",7);this.route="login";this.theme="auto";this.scopes="";this.selectedTheme="light";this.federatedProviders=[];this.afterLoginRedirect=function(t){o.phone=t.user.phone||"";o.email=t.user.email||"";o.lastResponse=t;if(t.require_2fa){if(!t.enabled_2fa){return o.redirectTfa("tfa/setup")}if(t.enabled_2fa){return o.redirectTfa("tfa/verify")}}if(o.tfaStatus===l.OPTIONAL){return"tfa/setup/select"}if(t.access_token&&t.refresh_token){return"callback"}if(t.access_token&&!t.refresh_token){return"callback"}};this.loginCatchRedirect=function(t){if(t.id===s.PleaseEnableTFA){return o.redirectTfa("tfa/setup")}throw t}}t.prototype.processError=function(t){var e,r;t.detailedMessage=(e=t.detailedMessage)===null||e===void 0?void 0:e.trim();t.message=(r=t.message)===null||r===void 0?void 0:r.trim();this.lastError=t;this.error.emit(t)};t.prototype.redirectTfa=function(t){if(this.tfaTypes.length===1){return t+"/"+this.tfaTypes[0]}else{return t+"/select"}};t.prototype.signIn=function(){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(e){switch(e.label){case 0:if(!this.validateEmail(this.email)){return[2]}return[4,this.auth.api.login(this.email,this.password,"",this.scopes.split(",")).then(this.afterLoginRedirect).catch(this.loginCatchRedirect).then((function(e){return t.openRoute(e)})).catch((function(e){return t.processError(e)}))];case 1:e.sent();return[2]}}))}))};t.prototype.loginWith=function(t){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(r){this.route="loading";e=this.federatedRedirectUrl||window.location.origin+window.location.pathname;this.auth.api.federatedLogin(t,this.scopes.split(","),e,this.callbackUrl);return[2]}))}))};t.prototype.signUp=function(){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(e){switch(e.label){case 0:if(!this.validateEmail(this.email)){return[2]}return[4,this.auth.api.register(this.email,this.password,this.scopes.split(",")).then(this.afterLoginRedirect).catch(this.loginCatchRedirect).then((function(e){return t.openRoute(e)})).catch((function(e){return t.processError(e)}))];case 1:e.sent();return[2]}}))}))};t.prototype.verifyTFA=function(){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(e){if(this.route.indexOf("password/forgot/tfa")===0){this.auth.api.requestResetPassword(this.email,this.tfaCode).then((function(){t.success=true;t.openRoute("password/forgot/success")})).catch((function(e){return t.processError(e)}))}else{this.auth.api.verifyTFA(this.tfaCode,[]).then((function(){return t.openRoute("callback")})).catch((function(e){return t.processError(e)}))}return[2]}))}))};t.prototype.selectTFA=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.openRoute("tfa/setup/"+t);return[2]}))}))};t.prototype.setupTFA=function(t){return __awaiter(this,void 0,void 0,(function(){var e,r;return __generator(this,(function(o){switch(o.label){case 0:e=t;switch(e){case a.TFATypeApp:return[3,1];case a.TFATypeEmail:return[3,2];case a.TFATypeSMS:return[3,4]}return[3,9];case 1:return[3,9];case 2:return[4,this.auth.api.enableTFA()];case 3:o.sent();return[3,9];case 4:o.trys.push([4,6,,7]);return[4,this.auth.api.updateUser({new_phone:this.phone})];case 5:o.sent();return[3,7];case 6:r=o.sent();this.processError(r);return[2];case 7:return[4,this.auth.api.enableTFA()];case 8:o.sent();return[3,9];case 9:this.openRoute("tfa/verify/"+t);return[2]}}))}))};t.prototype.restorePassword=function(){var t=this;this.auth.api.requestResetPassword(this.email).then((function(e){if(e.result==="tfa-required"){t.openRoute(t.redirectTfa("password/forgot/tfa"))}if(e.result==="ok"){t.success=true;t.openRoute("password/forgot/success")}})).catch((function(e){return t.processError(e)}))};t.prototype.setNewPassword=function(){var t=this;if(this.token){this.auth.tokenService.saveToken(this.token,"access")}this.auth.api.resetPassword(this.password).then((function(){t.success=true;t.openRoute("login");t.password=""})).catch((function(e){return t.processError(e)}))};t.prototype.openRoute=function(t){this.lastError=undefined;this.route=t};t.prototype.usernameChange=function(t){this.username=t.target.value};t.prototype.passwordChange=function(t){this.password=t.target.value};t.prototype.emailChange=function(t){this.email=t.target.value};t.prototype.phoneChange=function(t){this.phone=t.target.value};t.prototype.tfaCodeChange=function(t){this.tfaCode=t.target.value};t.prototype.validateEmail=function(t){if(!B.test(t)){this.processError({detailedMessage:"Email address is not valid",name:"Validation error",message:"Email address is not valid"});return false}return true};t.prototype.renderBackToLogin=function(){var t=this;return o("a",{onClick:function(){return t.openRoute("login")},class:"forgot-password__login"},"Go back to login")};t.prototype.renderRoute=function(t){var e=this;var r,n,s,c,u,p,h,f,d,g,m,v,x,w;switch(t){case"login":return o("div",{class:"login-form"},!this.registrationForbidden&&o("p",{class:"login-form__register-text"},"Don't have an account? ",o("a",{onClick:function(){return e.openRoute("register")},class:"login-form__register-link"},"Sign Up")),o("input",{type:"text",class:"form-control "+(this.lastError&&"form-control-danger"),id:"login",value:this.email,placeholder:"Email",onInput:function(t){return e.emailChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.email&&e.password)&&e.signIn()}}),o("input",{type:"password",class:"form-control "+(this.lastError&&"form-control-danger"),id:"password",value:this.password,placeholder:"Password",onInput:function(t){return e.passwordChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.email&&e.password)&&e.signIn()}}),!!this.lastError&&o("div",{class:"error",role:"alert"},((r=this.lastError)===null||r===void 0?void 0:r.message)||((n=this.lastError)===null||n===void 0?void 0:n.detailedMessage)),o("div",{class:"login-form__buttons "+(!!this.lastError?"login-form__buttons_mt-32":"")},o("button",{onClick:function(){return e.signIn()},class:"primary-button",disabled:!this.email||!this.password},"Login"),o("a",{onClick:function(){return e.openRoute("password/forgot")},class:"login-form__forgot-pass"},"Forgot password")),this.federatedProviders.length>0&&o("div",{class:"social-buttons"},o("p",{class:"social-buttons__text"},"or continue with"),o("div",{class:"social-buttons__social-medias"},this.federatedProviders.indexOf("apple")>-1&&o("div",{class:"social-buttons__media social-buttons__apple",onClick:function(){return e.loginWith("apple")}},o("img",{src:i("assets/images/"+"apple.svg"),class:"social-buttons__image",alt:"login via apple"})),this.federatedProviders.indexOf("google")>-1&&o("div",{class:"social-buttons__media social-buttons__google",onClick:function(){return e.loginWith("google")}},o("img",{src:i("assets/images/"+"google.svg"),class:"social-buttons__image",alt:"login via google"})),this.federatedProviders.indexOf("facebook")>-1&&o("div",{class:"social-buttons__media social-buttons__facebook",onClick:function(){return e.loginWith("facebook")}},o("img",{src:i("assets/images/"+"fb.svg"),class:"social-buttons__image",alt:"login via facebook"})))));case"register":return o("div",{class:"register-form"},o("input",{type:"text",class:"form-control "+(this.lastError&&"form-control-danger"),id:"login",value:this.email,placeholder:"Email",onInput:function(t){return e.emailChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.password&&e.email)&&e.signUp()}}),o("input",{type:"password",class:"form-control "+(this.lastError&&"form-control-danger"),id:"password",value:this.password,placeholder:"Password",onInput:function(t){return e.passwordChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.password&&e.email)&&e.signUp()}}),!!this.lastError&&o("div",{class:"error",role:"alert"},((s=this.lastError)===null||s===void 0?void 0:s.detailedMessage)||((c=this.lastError)===null||c===void 0?void 0:c.message)),o("div",{class:"register-form__buttons "+(!!this.lastError?"register-form__buttons_mt-32":"")},o("button",{onClick:function(){return e.signUp()},class:"primary-button",disabled:!this.email||!this.password},"Continue"),this.renderBackToLogin()));case"otp/login":return o("div",{class:"otp-login"},!this.registrationForbidden&&o("p",{class:"otp-login__register-text"},"Don't have an account? ",o("a",{onClick:function(){return e.openRoute("register")},class:"login-form__register-link"},"Sign Up")),o("input",{type:"phone",class:"form-control",id:"login",value:this.phone,placeholder:"Phone number",onInput:function(t){return e.phoneChange(t)}}),o("button",{onClick:function(){return e.openRoute(e.redirectTfa("tfa/verify"))},class:"primary-button",disabled:!this.phone},"Continue"),this.federatedProviders.length>0&&o("div",{class:"social-buttons"},o("p",{class:"social-buttons__text"},"or continue with"),o("div",{class:"social-buttons__social-medias"},this.federatedProviders.indexOf("apple")>-1&&o("div",{class:"social-buttons__media social-buttons__apple",onClick:function(){return e.loginWith("apple")}},o("img",{src:i("assets/images/"+"apple.svg"),class:"social-buttons__image",alt:"login via apple"})),this.federatedProviders.indexOf("google")>-1&&o("div",{class:"social-buttons__media social-buttons__google",onClick:function(){return e.loginWith("google")}},o("img",{src:i("assets/images/"+"google.svg"),class:"social-buttons__image",alt:"login via google"})),this.federatedProviders.indexOf("facebook")>-1&&o("div",{class:"social-buttons__media social-buttons__facebook",onClick:function(){return e.loginWith("facebook")}},o("img",{src:i("assets/images/"+"fb.svg"),class:"social-buttons__image",alt:"login via facebook"})))));case"tfa/verify/select":case"tfa/setup/select":case"password/forgot/tfa/select":return o("div",{class:"tfa-setup"},this.route==="tfa/verify/select"&&o("p",{class:"tfa-setup__text"},"Select 2-step verification method"),this.route==="tfa/setup/select"&&o("p",{class:"tfa-setup__text"},"Protect your account with 2-step verification"),this.tfaTypes.includes(a.TFATypeApp)&&o("div",{class:"info-card info-card-app"},o("div",{class:"info-card__controls"},o("p",{class:"info-card__title"},"Authenticator app"),o("button",{type:"button",class:"info-card__button",onClick:function(){return e.selectTFA(a.TFATypeApp)}},"Setup")),o("p",{class:"info-card__text"},"Use the Authenticator app to get free verification codes, even when your phone is offline. Available for Android and iPhone.")),this.tfaTypes.includes(a.TFATypeEmail)&&o("div",{class:"info-card info-card-email"},o("div",{class:"info-card__controls"},o("p",{class:"info-card__title"},"Email"),o("button",{type:"button",class:"info-card__button",onClick:function(){return e.selectTFA(a.TFATypeEmail)}},"Setup")),o("p",{class:"info-card__subtitle"},this.email),o("p",{class:"info-card__text"}," Use email as 2fa, please check your email, we will send confirmation code to this email.")),this.tfaTypes.includes(a.TFATypeSMS)&&o("div",{class:"info-card info-card-sms"},o("div",{class:"info-card__controls"},o("p",{class:"info-card__title"},"SMS"),o("button",{type:"button",class:"info-card__button",onClick:function(){return e.selectTFA(a.TFATypeSMS)}},"Setup")),o("p",{class:"info-card__subtitle"},this.phone),o("p",{class:"info-card__text"}," Use phone as 2fa, please check your phone, we will send confirmation code to this phone")),this.route==="tfa/setup/select"&&this.tfaStatus===l.OPTIONAL&&o("a",{onClick:function(){return e.openRoute("callback")},class:"forgot-password__login"},"Setup next time"),this.tfaStatus!==l.OPTIONAL&&this.renderBackToLogin());case"tfa/setup/email":case"tfa/setup/sms":case"tfa/setup/app":return o("div",{class:"tfa-setup"},o("p",{class:"tfa-setup__text"},"Protect your account with 2-step verification"),this.route==="tfa/setup/app"&&o("div",{class:"tfa-setup__form"},o("p",{class:"tfa-setup__subtitle"},"Please scan QR-code with the app and click Continue"),o("div",{class:"tfa-setup__qr-wrapper"},!!this.provisioningURI&&o("img",{src:"data:image/png;base64, "+this.provisioningQR,alt:this.provisioningURI,class:"tfa-setup__qr-code"})),o("button",{onClick:function(){return e.setupTFA(a.TFATypeApp)},class:"primary-button "+(this.lastError&&"primary-button-mt-32")},"Continue")),this.route==="tfa/setup/email"&&o("div",{class:"tfa-setup__form"},o("p",{class:"tfa-setup__subtitle"}," Use email as 2fa, please check your enail bellow, we will send confirmation code to this email"),o("input",{type:"email",class:"form-control "+(this.lastError&&"form-control-danger"),id:"email",value:this.email,placeholder:"Email",onInput:function(t){return e.emailChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.email)&&e.setupTFA(a.TFATypeEmail)}}),!!this.lastError&&o("div",{class:"error",role:"alert"},((u=this.lastError)===null||u===void 0?void 0:u.detailedMessage)||((p=this.lastError)===null||p===void 0?void 0:p.message)),o("button",{onClick:function(){return e.setupTFA(a.TFATypeEmail)},class:"primary-button "+(this.lastError&&"primary-button-mt-32"),disabled:!this.email},"Setup email")),this.route==="tfa/setup/sms"&&o("div",{class:"tfa-setup__form"},o("p",{class:"tfa-setup__subtitle"}," Use phone as 2fa, please check your phone bellow, we will send confirmation code to this phone"),o("input",{type:"phone",class:"form-control "+(this.lastError&&"form-control-danger"),id:"phone",value:this.phone,placeholder:"Phone",onInput:function(t){return e.phoneChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.phone)&&e.setupTFA(a.TFATypeSMS)}}),!!this.lastError&&o("div",{class:"error",role:"alert"},((h=this.lastError)===null||h===void 0?void 0:h.detailedMessage)||((f=this.lastError)===null||f===void 0?void 0:f.message)),o("button",{onClick:function(){return e.setupTFA(a.TFATypeSMS)},class:"primary-button "+(this.lastError&&"primary-button-mt-32"),disabled:!this.phone},"Setup phone")),this.renderBackToLogin());case"tfa/verify/app":case"tfa/verify/email":case"tfa/verify/sms":case"password/forgot/tfa/app":case"password/forgot/tfa/email":case"password/forgot/tfa/sms":return o("div",{class:"tfa-verify"},this.route.indexOf("app")>0&&o("div",{class:"tfa-verify__title-wrapper"},o("h2",{class:"tfa-verify__title"},"Enter the code from authenticator app"),o("p",{class:"tfa-verify__subtitle"},"Code will be generated by app")),this.route.indexOf("sms")>0&&o("div",{class:"tfa-verify__title-wrapper"},o("h2",{class:"tfa-verify__title"},"Enter the code sent to your phone number"),o("p",{class:"tfa-verify__subtitle"},"The code has been sent to ",this.phone)),this.route.indexOf("email")>0&&o("div",{class:"tfa-verify__title-wrapper"},o("h2",{class:"tfa-verify__title"},"Enter the code sent to your email address"),o("p",{class:"tfa-verify__subtitle"},"The email has been sent to ",this.email)),o("input",{type:"text",class:"form-control "+(this.lastError&&"form-control-danger"),id:"tfaCode",value:this.tfaCode,placeholder:"Verify code",onInput:function(t){return e.tfaCodeChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.tfaCode)&&e.verifyTFA()}}),!!this.lastError&&o("div",{class:"error",role:"alert"},((d=this.lastError)===null||d===void 0?void 0:d.detailedMessage)||((g=this.lastError)===null||g===void 0?void 0:g.message)),o("button",{type:"button",class:"primary-button "+(this.lastError&&"primary-button-mt-32"),disabled:!this.tfaCode,onClick:function(){return e.verifyTFA()}},"Confirm"),this.renderBackToLogin());case"password/forgot":return o("div",{class:"forgot-password"},o("h2",{class:"forgot-password__title"},"Enter the email you gave when you registered"),o("p",{class:"forgot-password__subtitle"},"We will send you a link to create a new password on email"),o("input",{type:"email",class:"form-control "+(this.lastError&&"form-control-danger"),id:"email",value:this.email,placeholder:"Email",onInput:function(t){return e.emailChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.email)&&e.restorePassword()}}),!!this.lastError&&o("div",{class:"error",role:"alert"},((m=this.lastError)===null||m===void 0?void 0:m.detailedMessage)||((v=this.lastError)===null||v===void 0?void 0:v.message)),o("button",{type:"button",class:"primary-button "+(this.lastError&&"primary-button-mt-32"),disabled:!this.email,onClick:function(){return e.restorePassword()}},"Send the link"),this.renderBackToLogin());case"password/forgot/success":return o("div",{class:"forgot-password-success"},this.selectedTheme==="dark"&&o("img",{src:i("./assets/images/"+"email-dark.svg"),alt:"email",class:"forgot-password-success__image"}),this.selectedTheme==="light"&&o("img",{src:i("./assets/images/"+"email.svg"),alt:"email",class:"forgot-password-success__image"}),o("p",{class:"forgot-password-success__text"},"We sent you an email with a link to create a new password"),this.renderBackToLogin());case"password/reset":return o("div",{class:"reset-password"},o("h2",{class:"reset-password__title"},"Set up a new password to log in to the website"),o("p",{class:"reset-password__subtitle"},"Memorize your password and do not give it to anyone."),o("input",{type:"password",class:"form-control "+(this.lastError&&"form-control-danger"),id:"password",value:this.password,placeholder:"Password",onInput:function(t){return e.passwordChange(t)},onKeyPress:function(t){return!!(t.key==="Enter"&&e.password)&&e.setNewPassword()}}),!!this.lastError&&o("div",{class:"error",role:"alert"},((x=this.lastError)===null||x===void 0?void 0:x.detailedMessage)||((w=this.lastError)===null||w===void 0?void 0:w.message)),o("button",{type:"button",class:"primary-button "+(this.lastError&&"primary-button-mt-32"),disabled:!this.password,onClick:function(){return e.setNewPassword()}},"Save password"));case"error":return o("div",{class:"error-view"},o("div",{class:"error-view__message"},this.lastError.message),o("div",{class:"error-view__details"},this.lastError.detailedMessage));case"callback":return o("div",{class:"error-view"},o("div",null,"Success"),this.debug&&o("div",null,o("div",null,"Access token: ",this.lastResponse.access_token),o("div",null,"Refresh token: ",this.lastResponse.refresh_token),o("div",null,"User: ",JSON.stringify(this.lastResponse.user))));case"loading":return o("div",{class:"error-view"},o("div",null,"Loading ..."))}};t.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,(function(){var t,e,r,o,i,n,s;var a=this;return __generator(this,(function(l){switch(l.label){case 0:this.token=new URLSearchParams(window.location.search).get("token");t=this.postLogoutRedirectUri||window.location.origin+window.location.pathname;if(!this.appId){this.lastError={message:"app-id param is empty",name:"app-id empty"};this.error.emit(this.lastError);this.route="error";return[2]}if(!this.url){this.lastError={message:"url param is empty",name:"url empty"};this.error.emit(this.lastError);this.route="error";return[2]}l.label=1;case 1:l.trys.push([1,3,,4]);this.auth=new N({appId:this.appId,url:this.url,postLogoutRedirectUri:t});return[4,this.auth.api.getAppSettings(this.callbackUrl)];case 2:e=l.sent();this.registrationForbidden=e.registrationForbidden;this.tfaTypes=Array.isArray(e.tfaType)?e.tfaType:[e.tfaType];this.tfaStatus=e.tfaStatus;this.federatedProviders=e.federatedProviders;return[3,4];case 3:r=l.sent();this.route="error";this.lastError=r;return[3,4];case 4:o=new URL(window.location.href);if(!!o.searchParams.get("provider")&&!!o.searchParams.get("state")){i=new URL(window.location.href);n=new URLSearchParams;s=o.searchParams.get("appId");n.set("appId",s);window.history.replaceState({},document.title,i.pathname+"?"+n.toString());this.route="loading";this.auth.api.federatedLoginComplete(i.searchParams).then(this.afterLoginRedirect).catch(this.loginCatchRedirect).then((function(t){return a.openRoute(t)})).catch((function(t){return a.processError(t)}))}this.selectedTheme="light";if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches){if(this.theme==="auto"){this.selectedTheme="dark"}}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){if(a.theme==="auto"){a.selectedTheme=t.matches?"dark":"light"}}));return[2]}}))}))};t.prototype.componentWillRender=function(){var t=this;if(this.route==="callback"){var e=new URL(window.location.href);e.searchParams.set("callbackUrl",this.lastResponse.callbackUrl);window.history.replaceState({},document.title,e.pathname+"?"+e.searchParams.toString());this.complete.emit(this.lastResponse)}if(this.route==="logout"){this.complete.emit()}if(this.route==="tfa/setup/app"){this.auth.api.enableTFA().then((function(e){if(e.provisioning_uri){t.provisioningURI=e.provisioning_uri;t.provisioningQR=e.provisioning_qr}}))}};t.prototype.render=function(){return o(n,null,o("div",{class:{wrapper:this.selectedTheme==="light","wrapper-dark":this.selectedTheme==="dark"}},this.renderRoute(this.route)),o("div",{class:"error-view"},this.debug&&o("div",null,o("br",null),this.appId)))};Object.defineProperty(t,"assetsDirs",{get:function(){return["assets"]},enumerable:false,configurable:true});return t}());q.style=W}}}));