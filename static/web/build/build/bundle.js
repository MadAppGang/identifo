var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function s(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function c(t,e,n,r,o,i,a){const c=function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(e,r,o,i);if(c){const o=s(e,n,r,a);t.p(o,c)}}function u(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function d(){return h(" ")}function m(){return h("")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e){t.value=null==e?"":e}let b;function x(t){b=t}function k(){const t=function(){if(!b)throw new Error("Function called outside component initialization");return b}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}const _=[],$=[],T=[],S=[],A=Promise.resolve();let E=!1;function U(t){T.push(t)}let P=!1;const R=new Set;function C(){if(!P){P=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];x(e),O(e.$$)}for(x(null),_.length=0;$.length;)$.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];R.has(e)||(R.add(e),e())}T.length=0}while(_.length);for(;S.length;)S.pop()();E=!1,P=!1,R.clear()}}function O(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const L=new Set;let j;function I(t,e){t&&t.i&&(L.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(L.has(t))return;L.add(t),j.c.push((()=>{L.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const N="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function B(t){t&&t.c()}function M(t,n,i,a){const{fragment:s,on_mount:c,on_destroy:u,after_update:l}=t.$$;s&&s.m(n,i),a||U((()=>{const n=c.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(U)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(_.push(t),E||(E=!0,A.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,o,i,a,s,c,u=[-1]){const l=b;x(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:o.context||[]),callbacks:n(),dirty:u,skip_bound:!1};let h=!1;if(p.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&s(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),h&&H(e,t)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();o.intro&&I(e.$$.fragment),M(e,o.target,o.anchor,o.customElement),C()}x(l)}class z{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function J(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function V(t){var e={exports:{}};return t(e,e.exports),e.exports}var W=V((function(t,e){t.exports=(()=>{var t={669:(t,e,n)=>{t.exports=n(609)},448:(t,e,n)=>{var r=n(867),o=n(26),i=n(372),a=n(327),s=n(97),c=n(109),u=n(985),l=n(61);t.exports=function(t){return new Promise((function(e,n){var f=t.data,p=t.headers;r.isFormData(f)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";p.Authorization="Basic "+btoa(d+":"+m)}var g=s(t.baseURL,t.url);if(h.open(t.method.toUpperCase(),a(g,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:t,request:h};o(e,n,i),h=null}},h.onabort=function(){h&&(n(l("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(l("Network Error",t,null,h)),h=null},h.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(l(e,t,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var v=(t.withCredentials||u(g))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;v&&(p[t.xsrfHeaderName]=v)}if("setRequestHeader"in h&&r.forEach(p,(function(t,e){void 0===f&&"content-type"===e.toLowerCase()?delete p[e]:h.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),n(t),h=null)})),f||(f=null),h.send(f)}))}},609:(t,e,n)=>{var r=n(867),o=n(849),i=n(321),a=n(185);function s(t){var e=new i(t),n=o(i.prototype.request,e);return r.extend(n,i.prototype,e),r.extend(n,e),n}var c=s(n(655));c.Axios=i,c.create=function(t){return s(a(c.defaults,t))},c.Cancel=n(263),c.CancelToken=n(972),c.isCancel=n(502),c.all=function(t){return Promise.all(t)},c.spread=n(713),c.isAxiosError=n(268),t.exports=c,t.exports.default=c},263:t=>{function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},972:(t,e,n)=>{var r=n(263);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o((function(e){t=e})),cancel:t}},t.exports=o},502:t=>{t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,n)=>{var r=n(867),o=n(327),i=n(782),a=n(572),s=n(185);function c(t){this.defaults=t,this.interceptors={request:new i,response:new i}}c.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},c.prototype.getUri=function(t){return t=s(this.defaults,t),o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){c.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){c.prototype[t]=function(e,n,r){return this.request(s(r||{},{method:t,url:e,data:n}))}})),t.exports=c},782:(t,e,n)=>{var r=n(867);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=o},97:(t,e,n)=>{var r=n(793),o=n(303);t.exports=function(t,e){return t&&!r(e)?o(t,e):e}},61:(t,e,n)=>{var r=n(481);t.exports=function(t,e,n,o,i){var a=new Error(t);return r(a,e,n,o,i)}},572:(t,e,n)=>{var r=n(867),o=n(527),i=n(502),a=n(655);function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return s(t),e.data=o(e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(s(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{t.exports=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},185:(t,e,n)=>{var r=n(867);t.exports=function(t,e){e=e||{};var n={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function u(o){r.isUndefined(e[o])?r.isUndefined(t[o])||(n[o]=c(void 0,t[o])):n[o]=c(t[o],e[o])}r.forEach(o,(function(t){r.isUndefined(e[t])||(n[t]=c(void 0,e[t]))})),r.forEach(i,u),r.forEach(a,(function(o){r.isUndefined(e[o])?r.isUndefined(t[o])||(n[o]=c(void 0,t[o])):n[o]=c(void 0,e[o])})),r.forEach(s,(function(r){r in e?n[r]=c(t[r],e[r]):r in t&&(n[r]=c(void 0,t[r]))}));var l=o.concat(i).concat(a).concat(s),f=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===l.indexOf(t)}));return r.forEach(f,u),n}},26:(t,e,n)=>{var r=n(61);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},527:(t,e,n)=>{var r=n(867);t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},655:(t,e,n)=>{var r=n(867),o=n(16),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=n(448)),s),transformRequest:[function(t,e){return o(e,"Accept"),o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){c.headers[t]=r.merge(i)})),t.exports=c},849:t=>{t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},327:(t,e,n)=>{var r=n(867);function o(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(r.isURLSearchParams(e))i=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))})))})),i=a.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},303:t=>{t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},372:(t,e,n)=>{var r=n(867);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:t=>{t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},268:t=>{t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},985:(t,e,n)=>{var r=n(867);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=o(window.location.href),function(e){var n=r.isString(e)?o(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},16:(t,e,n)=>{var r=n(867);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},109:(t,e,n)=>{var r=n(867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,a={};return t?(r.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},713:t=>{t.exports=function(t){return function(e){return t.apply(null,e)}}},867:(t,e,n)=>{var r=n(849),o=Object.prototype.toString;function i(t){return"[object Array]"===o.call(t)}function a(t){return void 0===t}function s(t){return null!==t&&"object"==typeof t}function c(t){if("[object Object]"!==o.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),i(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:i,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function n(n,r){c(e[r])&&c(n)?e[r]=t(e[r],n):c(n)?e[r]=t({},n):i(n)?e[r]=n.slice():e[r]=n}for(var r=0,o=arguments.length;r<o;r++)l(arguments[r],n);return e},extend:function(t,e,n){return l(e,(function(e,o){t[o]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{APIErrorCodes:()=>e,ApiError:()=>c,CookieStorageManager:()=>v,LocalStorageManager:()=>b,SessionStorageManager:()=>k,TFAType:()=>o,default:()=>P});var t,e,o,i=n(669),a=n.n(i),s=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});!function(t){t.PleaseEnableTFA="error.api.request.2fa.please_enable"}(e||(e={})),function(t){t.TFATypeApp="app",t.TFATypeSMS="sms",t.TFATypeEmail="email"}(o||(o={}));var c=function(t){function e(e){var n=t.call(this,(null==e?void 0:e.message)||"Unknown API error")||this;return n.detailedMessage=null==e?void 0:e.detailed_message,n.id=null==e?void 0:e.id,n.status=null==e?void 0:e.status,n}return s(e,t),e}(Error),u=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},l=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},f=function(){function t(t){var e;this.authInstance=a().create(),this.catchHandler=function(t){var e;throw new c(null===(e=t.response)||void 0===e?void 0:e.data.error)},this.authInstance=a().create({baseURL:""+t.url,headers:(e={},e["X-Identifo-Clientid"]=t.appId,e)})}return t.prototype.getUser=function(t){return u(this,void 0,void 0,(function(){var e;return l(this,(function(n){return[2,this.authInstance.get("/me",{headers:(e={},e.Authorization="Bearer "+t,e)}).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.renewToken=function(t){return u(this,void 0,void 0,(function(){var e;return l(this,(function(n){return[2,this.authInstance.get("/auth/renew",{headers:(e={},e.Authorization="Bearer "+t,e)}).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.updateUser=function(t,e){return u(this,void 0,void 0,(function(){var n;return l(this,(function(r){return[2,this.authInstance.put("/me",t,{headers:(n={},n.Authorization="Bearer "+e,n)}).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.login=function(t,e,n,r){return u(this,void 0,void 0,(function(){var o;return l(this,(function(i){return o={username:t,password:e,device_token:n,scopes:r},[2,this.authInstance.post("/auth/login",o).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.register=function(t,e,n,r){return u(this,void 0,void 0,(function(){var o;return l(this,(function(i){return o={username:t,password:e,email:n,phone:r},[2,this.authInstance.post("/auth/register",o).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.requestResetPassword=function(t){return u(this,void 0,void 0,(function(){var e;return l(this,(function(n){return e={email:t},[2,this.authInstance.post("/auth/request_reset_password",e).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.resetPassword=function(t,e){return u(this,void 0,void 0,(function(){var n,r;return l(this,(function(o){return n={password:t},[2,this.authInstance.post("/auth/reset_password",n,{headers:(r={},r.Authorization="Bearer "+e,r)}).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.getAppSettings=function(){return u(this,void 0,void 0,(function(){return l(this,(function(t){return[2,this.authInstance.get("/auth/app_settings").then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.enableTFA=function(t){return u(this,void 0,void 0,(function(){var e;return l(this,(function(n){return[2,this.authInstance.put("/auth/tfa/enable",{},{headers:(e={},e.Authorization="BEARER "+t,e)}).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t.prototype.verifyTFA=function(t,e,n){return u(this,void 0,void 0,(function(){var r;return l(this,(function(o){return[2,this.authInstance.post("/auth/tfa/login",{tfa_code:t,scopes:e},{headers:(r={},r.Authorization="BEARER "+n,r)}).then((function(t){return t.data})).catch(this.catchHandler)]}))}))},t}(),p=/^([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_=]+)\.([a-zA-Z0-9_\-=]*$)/,h="Empty or invalid token";const d=function(){var t=document.createElement("iframe");return t.style.display="none",document.body.appendChild(t),t},m=function(t){setTimeout((function(){document.body.contains(t)&&document.body.removeChild(t)}),0)},g=function(t,e){return new Promise((function(n,r){var o=function(t){t.data.error&&r(t.data.error),n(t.data.accessToken),window.removeEventListener("message",o)};window.addEventListener("message",o,!1),t.src=e}))},v=function(){function t(){this.isAccessible=!1}return t.prototype.saveToken=function(){return!0},t.prototype.getToken=function(){throw new Error("Can not get token from HttpOnly")},t.prototype.deleteToken=function(){},t}(),y=function(){function t(t,e,n){this.preffix="identifo_",this.storageType="localStorage",this.access=this.preffix+"access_token",this.refresh=this.preffix+"refresh_token",this.isAccessible=!0,this.access=e?this.preffix+e:this.access,this.refresh=n?this.preffix+n:this.refresh,this.storageType=t}return t.prototype.saveToken=function(t,e){return!!t&&(window[this.storageType].setItem(this[e],t),!0)},t.prototype.getToken=function(t){var e;return null!==(e=window[this.storageType].getItem(this[t]))&&void 0!==e?e:""},t.prototype.deleteToken=function(t){window[this.storageType].removeItem(this[t])},t}();var w=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const b=function(t){function e(e,n){return t.call(this,"localStorage",e,n)||this}return w(e,t),e}(y);var x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const k=function(t){function e(e,n){return t.call(this,"sessionStorage",e,n)||this}return x(e,t),e}(y);var _=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},$=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const T=function(){function t(t){this.tokenManager=t||new b}return t.prototype.handleVerification=function(t,e,n){return _(this,void 0,void 0,(function(){var r;return $(this,(function(o){switch(o.label){case 0:if(!this.tokenManager.isAccessible)return[2,!0];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.validateToken(t,e,n)];case 2:return o.sent(),this.saveToken(t),[2,!0];case 3:return r=o.sent(),this.removeToken(),[2,Promise.reject(r)];case 4:return[2]}}))}))},t.prototype.validateToken=function(t,e,n){var r;return _(this,void 0,void 0,(function(){var o,i;return $(this,(function(a){if(!t)throw new Error(h);if(o=this.parseJWT(t),i=this.isJWTExpired(o),(null===(r=o.aud)||void 0===r?void 0:r.includes(e))&&(!n||o.iss===n)&&!i)return[2,Promise.resolve(!0)];throw new Error(h)}))}))},t.prototype.parseJWT=function(t){var e=t.split(".")[1];if(!e)return{aud:[],iss:"",exp:10};var n=e.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(r)},t.prototype.isJWTExpired=function(t){var e=(new Date).getTime()/1e3;return!!(t.exp&&e>t.exp)},t.prototype.isAuthenticated=function(t,e){if(!this.tokenManager.isAccessible)return Promise.resolve(!0);var n=this.tokenManager.getToken("access");return this.validateToken(n,t,e)},t.prototype.saveToken=function(t){return this.tokenManager.saveToken(t,"access")},t.prototype.removeToken=function(){this.tokenManager.deleteToken("access")},t.prototype.getToken=function(){var t=this.tokenManager.getToken("access");return t?{token:t,payload:this.parseJWT(t)}:null},t}();var S=function(){function t(t){this.config=t}return t.prototype.getUrl=function(t){var e,n,r=JSON.stringify(null!==(e=this.config.scopes)&&void 0!==e?e:[]),o=encodeURIComponent(null!==(n=this.config.redirectUri)&&void 0!==n?n:window.location.href),i="appId="+this.config.appId+"&scopes="+r,a=i+"&callbackUrl="+o,s=this.config.postLogoutRedirectUri?"&callbackUrl="+encodeURIComponent(this.config.postLogoutRedirectUri):"&callbackUrl="+o+"&redirectUri="+this.config.url+"/web/login?"+encodeURIComponent(i),c={signup:this.config.url+"/web/register?"+a,signin:this.config.url+"/web/login?"+a,logout:this.config.url+"/web/logout?"+i+s,renew:this.config.url+"/web/token/renew?"+i+"&redirectUri="+o,default:"default"};return c[t]||c.default},t.prototype.createSignupUrl=function(){return this.getUrl("signup")},t.prototype.createSigninUrl=function(){return this.getUrl("signin")},t.prototype.createLogoutUrl=function(){return this.getUrl("logout")},t.prototype.createRenewSessionUrl=function(){return this.getUrl("renew")},t}(),A=function(){return(A=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},E=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},U=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const P=function(){function t(t){var e;this.token=null,this.refreshToken=null,this.isAuth=!1,this.api=new f(t),this.config=A(A({},t),{autoRenew:null===(e=t.autoRenew)||void 0===e||e}),this.tokenService=new T(t.tokenManager),this.urlBuilder=new S(this.config)}return t.prototype.init=function(){var t=this,e=this.tokenService.getToken();e&&(this.tokenService.isJWTExpired(e.payload)?this.renewSession().then((function(e){return t.handleToken(e)})).catch((function(){return t.resetAuthValues()})):this.handleToken(e.token))},t.prototype.handleToken=function(t){var e=this,n=this.tokenService.parseJWT(t);this.token={token:t,payload:n},this.isAuth=!0,this.tokenService.saveToken(t),this.renewSessionId&&window.clearTimeout(this.renewSessionId),n.exp&&(this.renewSessionId=window.setTimeout((function(){e.config.autoRenew?e.renewSession().then((function(t){return e.handleToken(t)})).catch((function(){return e.resetAuthValues()})):e.resetAuthValues()}),n.exp-(new Date).getTime()/1e3-6e4))},t.prototype.resetAuthValues=function(){this.token=null,this.isAuth=!1,this.tokenService.removeToken()},t.prototype.signup=function(){window.location.href=this.urlBuilder.createSignupUrl()},t.prototype.signin=function(){window.location.href=this.urlBuilder.createSigninUrl()},t.prototype.logout=function(){this.tokenService.removeToken(),window.location.href=this.urlBuilder.createLogoutUrl()},t.prototype.handleAuthentication=function(){return E(this,void 0,void 0,(function(){var t;return U(this,(function(e){switch(e.label){case 0:if(!(t=this.getTokenFromUrl().access))return[2,Promise.reject()];e.label=1;case 1:return e.trys.push([1,4,6,7]),[4,this.tokenService.handleVerification(t,this.config.appId,this.config.issuer)];case 2:return e.sent(),this.handleToken(t),[4,Promise.resolve(!0)];case 3:return[2,e.sent()];case 4:return e.sent(),[4,Promise.reject()];case 5:return[2,e.sent()];case 6:return window.location.hash="",[7];case 7:return[2]}}))}))},t.prototype.getTokenFromUrl=function(){var t=new URLSearchParams(window.location.search),e={access:"",refresh:""},n=t.get("token"),r=t.get("refresh_token");return r&&p.test(r)&&(e.refresh=r),n&&p.test(n)&&(e.access=n),e},t.prototype.getToken=function(){return this.token?this.token:{token:"",payload:{}}},t.prototype.renewSession=function(){return E(this,void 0,void 0,(function(){var t;return U(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,this.renewSessionWithIframe()];case 1:return t=e.sent(),this.handleToken(t),[4,Promise.resolve(t)];case 2:return[2,e.sent()];case 3:return e.sent(),[2,Promise.reject()];case 4:return[2]}}))}))},t.prototype.renewSessionWithToken=function(){return E(this,void 0,void 0,(function(){return U(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.api.renewToken(this.refreshToken||"").then((function(t){return t.access_token||""}))];case 1:return[2,t.sent()];case 2:return t.sent(),[2,Promise.resolve("")];case 3:return[2]}}))}))},t.prototype.renewSessionWithIframe=function(){return E(this,void 0,void 0,(function(){var t,e,n,r;return U(this,(function(o){switch(o.label){case 0:t=d(),e=setTimeout((function(){throw m(t),new Error("Timeout expired")}),3e4),o.label=1;case 1:return o.trys.push([1,4,5,6]),[4,g(t,this.urlBuilder.createRenewSessionUrl())];case 2:return n=o.sent(),[4,this.tokenService.handleVerification(n,this.config.appId,this.config.issuer)];case 3:return o.sent(),[2,n];case 4:return r=o.sent(),[2,Promise.reject(r)];case 5:return clearTimeout(e),m(t),[7];case 6:return[2]}}))}))},t}()})(),r})()})),G=J(W);const X=[];const Z=function(e,n=t){let r;const o=[];function a(t){if(i(e,t)&&(e=t,r)){const t=!X.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),X.push(n,e)}if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(i,s=t){const c=[i,s];return o.push(c),1===o.length&&(r=n(a)||t),i(e),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}(null);var K=V((function(t,e){t.exports=function(){var t=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},e=y,n=s,r=c,o=u,i=v,a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(t){for(var e,n=[],r=0,o=0,i="";null!=(e=a.exec(t));){var s=e[0],c=e[1],u=e.index;if(i+=t.slice(o,u),o=u+s.length,c)i+=c[1];else{i&&(n.push(i),i="");var l=e[2],p=e[3],h=e[4],d=e[5],m=e[6],g=e[7],v="+"===m||"*"===m,y="?"===m||"*"===m,w=l||"/",b=h||d||(g?".*":"[^"+w+"]+?");n.push({name:p||r++,prefix:l||"",delimiter:w,optional:y,repeat:v,pattern:f(b)})}}return o<t.length&&(i+=t.substr(o)),i&&n.push(i),n}function c(t){return u(s(t))}function u(e){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(n[r]=new RegExp("^"+e[r].pattern+"$"));return function(r){for(var o="",i=r||{},a=0;a<e.length;a++){var s=e[a];if("string"!=typeof s){var c,u=i[s.name];if(null==u){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to be defined')}if(t(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received "'+u+'"');if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var l=0;l<u.length;l++){if(c=encodeURIComponent(u[l]),!n[a].test(c))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received "'+c+'"');o+=(0===l?s.prefix:s.delimiter)+c}}else{if(c=encodeURIComponent(u),!n[a].test(c))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+c+'"');o+=s.prefix+c}}else o+=s}return o}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function f(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function p(t,e){return t.keys=e,t}function h(t){return t.sensitive?"":"i"}function d(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return p(t,e)}function m(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(y(t[o],e,n).source);return p(new RegExp("(?:"+r.join("|")+")",h(n)),e)}function g(t,e,n){for(var r=s(t),o=v(r,n),i=0;i<r.length;i++)"string"!=typeof r[i]&&e.push(r[i]);return p(o,e)}function v(t,e){for(var n=(e=e||{}).strict,r=!1!==e.end,o="",i=t[t.length-1],a="string"==typeof i&&/\/$/.test(i),s=0;s<t.length;s++){var c=t[s];if("string"==typeof c)o+=l(c);else{var u=l(c.prefix),f=c.pattern;c.repeat&&(f+="(?:"+u+f+")*"),o+=f=c.optional?u?"(?:"+u+"("+f+"))?":"("+f+")?":u+"("+f+")"}}return n||(o=(a?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=r?"$":n&&a?"":"(?=\\/|$)",new RegExp("^"+o,h(e))}function y(e,n,r){return t(n=n||[])?r||(r={}):(r=n,n=[]),e instanceof RegExp?d(e,n):t(e)?m(e,n,r):g(e,n,r)}e.parse=n,e.compile=r,e.tokensToFunction=o,e.tokensToRegExp=i;var w,b="undefined"!=typeof document,x="undefined"!=typeof window,k="undefined"!=typeof history,_="undefined"!=typeof process,$=b&&document.ontouchstart?"touchstart":"click",T=x&&!(!window.history.location&&!window.location);function S(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function A(){var t=new S;function e(){return E.apply(t,arguments)}return e.callbacks=t.callbacks,e.exits=t.exits,e.base=t.base.bind(t),e.strict=t.strict.bind(t),e.start=t.start.bind(t),e.stop=t.stop.bind(t),e.show=t.show.bind(t),e.back=t.back.bind(t),e.redirect=t.redirect.bind(t),e.replace=t.replace.bind(t),e.dispatch=t.dispatch.bind(t),e.exit=t.exit.bind(t),e.configure=t.configure.bind(t),e.sameOrigin=t.sameOrigin.bind(t),e.clickHandler=t.clickHandler.bind(t),e.create=A,Object.defineProperty(e,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(e,"current",{get:function(){return t.current},set:function(e){t.current=e}}),e.Context=R,e.Route=C,e}function E(t,e){if("function"==typeof t)return E.call(this,"*",t);if("function"==typeof e)for(var n=new C(t,null,this),r=1;r<arguments.length;++r)this.callbacks.push(n.middleware(arguments[r]));else"string"==typeof t?this["string"==typeof e?"redirect":"show"](t,e):this.start(t)}function U(t){if(!t.handled){var e=this,n=e._window;(e._hashbang?T&&this._getBase()+n.location.hash.replace("#!",""):T&&n.location.pathname+n.location.search)!==t.canonicalPath&&(e.stop(),t.handled=!1,T&&(n.location.href=t.canonicalPath))}}function P(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function R(t,e,n){var r=this.page=n||E,o=r._window,i=r._hashbang,a=r._getBase();"/"===t[0]&&0!==t.indexOf(a)&&(t=a+(i?"#!":"")+t);var s=t.indexOf("?");this.canonicalPath=t;var c=new RegExp("^"+P(a));if(this.path=t.replace(c,"")||"/",i&&(this.path=this.path.replace("#!","")||"/"),this.title=b&&o.document.title,this.state=e||{},this.state.path=t,this.querystring=~s?r._decodeURLEncodedURIComponent(t.slice(s+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~s?t.slice(0,s):t),this.params={},this.hash="",!i){if(!~this.path.indexOf("#"))return;var u=this.path.split("#");this.path=this.pathname=u[0],this.hash=r._decodeURLEncodedURIComponent(u[1])||"",this.querystring=this.querystring.split("#")[0]}}function C(t,n,r){var o=this.page=r||O,i=n||{};i.strict=i.strict||o._strict,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=e(this.path,this.keys=[],i)}S.prototype.configure=function(t){var e=t||{};this._window=e.window||x&&window,this._decodeURLComponents=!1!==e.decodeURLComponents,this._popstate=!1!==e.popstate&&x,this._click=!1!==e.click&&b,this._hashbang=!!e.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):x&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener($,this.clickHandler,!1):b&&n.document.removeEventListener($,this.clickHandler,!1),this._hashbang&&x&&!k?n.addEventListener("hashchange",this._onpopstate,!1):x&&n.removeEventListener("hashchange",this._onpopstate,!1)},S.prototype.base=function(t){if(0===arguments.length)return this._base;this._base=t},S.prototype._getBase=function(){var t=this._base;if(t)return t;var e=x&&this._window&&this._window.location;return x&&this._hashbang&&e&&"file:"===e.protocol&&(t=e.pathname),t},S.prototype.strict=function(t){if(0===arguments.length)return this._strict;this._strict=t},S.prototype.start=function(t){var e=t||{};if(this.configure(e),!1!==e.dispatch){var n;if(this._running=!0,T){var r=this._window.location;n=this._hashbang&&~r.hash.indexOf("#!")?r.hash.substr(2)+r.search:this._hashbang?r.search+r.hash:r.pathname+r.search+r.hash}this.replace(n,null,!0,e.dispatch)}},S.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var t=this._window;this._click&&t.document.removeEventListener($,this.clickHandler,!1),x&&t.removeEventListener("popstate",this._onpopstate,!1),x&&t.removeEventListener("hashchange",this._onpopstate,!1)}},S.prototype.show=function(t,e,n,r){var o=new R(t,e,this),i=this.prevContext;return this.prevContext=o,this.current=o.path,!1!==n&&this.dispatch(o,i),!1!==o.handled&&!1!==r&&o.pushState(),o},S.prototype.back=function(t,e){var n=this;if(this.len>0){var r=this._window;k&&r.history.back(),this.len--}else t?setTimeout((function(){n.show(t,e)})):setTimeout((function(){n.show(n._getBase(),e)}))},S.prototype.redirect=function(t,e){var n=this;"string"==typeof t&&"string"==typeof e&&E.call(this,t,(function(t){setTimeout((function(){n.replace(e)}),0)})),"string"==typeof t&&void 0===e&&setTimeout((function(){n.replace(t)}),0)},S.prototype.replace=function(t,e,n,r){var o=new R(t,e,this),i=this.prevContext;return this.prevContext=o,this.current=o.path,o.init=n,o.save(),!1!==r&&this.dispatch(o,i),o},S.prototype.dispatch=function(t,e){var n=0,r=0,o=this;function i(){var t=o.exits[r++];if(!t)return a();t(e,i)}function a(){var e=o.callbacks[n++];if(t.path===o.current)return e?void e(t,a):U.call(o,t);t.handled=!1}e?i():a()},S.prototype.exit=function(t,e){if("function"==typeof t)return this.exit("*",t);for(var n=new C(t,null,this),r=1;r<arguments.length;++r)this.exits.push(n.middleware(arguments[r]))},S.prototype.clickHandler=function(t){if(1===this._which(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,n=t.path||(t.composedPath?t.composedPath():null);if(n)for(var r=0;r<n.length;r++)if(n[r].nodeName&&"A"===n[r].nodeName.toUpperCase()&&n[r].href){e=n[r];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var o="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var i=e.getAttribute("href");if((this._hashbang||!this._samePath(e)||!e.hash&&"#"!==i)&&!(i&&i.indexOf("mailto:")>-1)&&!(o?e.target.baseVal:e.target)&&(o||this.sameOrigin(e.href))){var a=o?e.href.baseVal:e.pathname+e.search+(e.hash||"");a="/"!==a[0]?"/"+a:a,_&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var s=a,c=this._getBase();0===a.indexOf(c)&&(a=a.substr(c.length)),this._hashbang&&(a=a.replace("#!","")),(!c||s!==a||T&&"file:"===this._window.location.protocol)&&(t.preventDefault(),this.show(s))}}}}},S.prototype._onpopstate=(w=!1,x?(b&&"complete"===document.readyState?w=!0:window.addEventListener("load",(function(){setTimeout((function(){w=!0}),0)})),function(t){if(w){var e=this;if(t.state){var n=t.state.path;e.replace(n,t.state)}else if(T){var r=e._window.location;e.show(r.pathname+r.search+r.hash,void 0,void 0,!1)}}}):function(){}),S.prototype._which=function(t){return null==(t=t||x&&this._window.event).which?t.button:t.which},S.prototype._toURL=function(t){var e=this._window;if("function"==typeof URL&&T)return new URL(t,e.location.toString());if(b){var n=e.document.createElement("a");return n.href=t,n}},S.prototype.sameOrigin=function(t){if(!t||!T)return!1;var e=this._toURL(t),n=this._window.location;return n.protocol===e.protocol&&n.hostname===e.hostname&&(n.port===e.port||""===n.port&&(80==e.port||443==e.port))},S.prototype._samePath=function(t){if(!T)return!1;var e=this._window.location;return t.pathname===e.pathname&&t.search===e.search},S.prototype._decodeURLEncodedURIComponent=function(t){return"string"!=typeof t?t:this._decodeURLComponents?decodeURIComponent(t.replace(/\+/g," ")):t},R.prototype.pushState=function(){var t=this.page,e=t._window,n=t._hashbang;t.len++,k&&e.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},R.prototype.save=function(){var t=this.page;k&&t._window.history.replaceState(this.state,this.title,t._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},C.prototype.middleware=function(t){var e=this;return function(n,r){if(e.match(n.path,n.params))return n.routePath=e.path,t(n,r);r()}},C.prototype.match=function(t,e){var n=this.keys,r=t.indexOf("?"),o=~r?t.slice(0,r):t,i=this.regexp.exec(decodeURIComponent(o));if(!i)return!1;delete e[0];for(var a=1,s=i.length;a<s;++a){var c=n[a-1],u=this.page._decodeURLEncodedURIComponent(i[a]);void 0===u&&hasOwnProperty.call(e,c.name)||(e[c.name]=u)}return!0};var O=A(),L=O,j=O;return L.default=j,L}()}));function Q(t){let e,n,r,o,i,a,m,w,b,x,k,_,$;const T=t[3].default,S=function(t,e,n,r){if(t){const o=s(t,e,n,r);return t[0](o)}}(T,t,t[2],null);return{c(){e=p("main"),n=p("form"),r=p("img"),i=d(),a=p("h1"),m=h(t[0]),w=d(),S&&S.c(),b=d(),x=p("p"),x.textContent="© 2017â2021",v(r,"class","mb-4"),r.src!==(o="../assets/brand/bootstrap-logo.svg")&&v(r,"src","../assets/brand/bootstrap-logo.svg"),v(r,"alt",""),v(r,"width","72"),v(r,"height","57"),v(a,"class","h3 mb-3 fw-normal"),v(x,"class","mt-5 mb-3 text-muted"),v(e,"class","form-signin")},m(o,s){l(o,e,s),u(e,n),u(n,r),u(n,i),u(n,a),u(a,m),u(n,w),S&&S.m(n,null),u(n,b),u(n,x),k=!0,_||($=g(n,"submit",t[1]),_=!0)},p(t,[e]){(!k||1&e)&&y(m,t[0]),S&&S.p&&(!k||4&e)&&c(S,T,t,t[2],e,null,null)},i(t){k||(I(S,t),k=!0)},o(t){F(S,t),k=!1},d(t){t&&f(e),S&&S.d(t),_=!1,$()}}}function Y(t,e,n){let{$$slots:r={},$$scope:o}=e,{title:i}=e;const a=k();return t.$$set=t=>{"title"in t&&n(0,i=t.title),"$$scope"in t&&n(2,o=t.$$scope)},[i,function(t){a("submit"),t.preventDefault()},o,r]}class tt extends z{constructor(t){super(),D(this,t,Y,Q,i,{title:0})}}function et(e){let n,r,o,i,a,s,c,m,g,y,w;return{c(){n=p("a"),n.textContent="Login",r=d(),o=p("div"),i=p("div"),i.textContent="Access token:",a=d(),s=h(e[0]),c=d(),m=p("div"),g=p("div"),g.textContent="Refresh token:",y=d(),w=h(e[1]),v(n,"href","login?callback_uri=/"),v(i,"class",""),v(o,"class",""),v(g,"class","")},m(t,e){l(t,n,e),l(t,r,e),l(t,o,e),u(o,i),u(o,a),u(o,s),l(t,c,e),l(t,m,e),u(m,g),u(m,y),u(m,w)},p:t,d(t){t&&f(n),t&&f(r),t&&f(o),t&&f(c),t&&f(m)}}}function nt(t){let e,n;return e=new tt({props:{title:"Login",$$slots:{default:[et]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,[n]){const r={};8&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function rt(t){var e=new URLSearchParams(window.location.search);return[e.get("access_token"),e.get("refresh_token")]}function ot(t){const e=(r=new URLSearchParams(window.location.search)).get("callback_uri"),n=r.get("app_id");if(t.require_2fa){if(!t.enabled_2fa){var r=new URLSearchParams({mandatory:"true",token:t.access_token,callback_uri:e,app_id:n});return void(window.location.href=`tfa/setup?${r.toString()}`)}if(t.enabled_2fa){r=new URLSearchParams({token:t.access_token,callback_uri:e,app_id:n});return void(window.location.href=`tfa/verify?${r.toString()}`)}}if(e&&t.access_token&&t.refresh_token){r=new URLSearchParams({access_token:t.access_token,refresh_token:t.refresh_token,app_id:n});window.location.href=`${e}?${r.toString()}`}else if(e&&t.access_token&&!t.refresh_token){r=new URLSearchParams({access_token:t.access_token,app_id:n});window.location.href=`${e}?${r.toString()}`}else;}function it(t){let e,n,r=t[3]?.detailedMessage+"";return{c(){e=p("div"),n=h(r),v(e,"class","alert alert-danger"),v(e,"role","alert")},m(t,r){l(t,e,r),u(e,n)},p(t,e){8&e&&r!==(r=t[3]?.detailedMessage+"")&&y(n,r)},d(t){t&&f(e)}}}function at(e){let n,r;return{c(){n=p("a"),r=h("Register new account"),v(n,"href","register?"+e[4].toString())},m(t,e){l(t,n,e),u(n,r)},p:t,d(t){t&&f(n)}}}function st(e){let n,o,i,a,s,c,m,y,b,x,k,_,$,T,S,A,E,U,P,R,C,O,L,j,I=!!e[3]&&it(e),F=e[2]&&at(e),N=!!e[5]&&function(e){let n,r,o;return{c(){n=p("a"),n.textContent="Cancel/exit"},m(t,i){l(t,n,i),r||(o=g(n,"click",e[7]),r=!0)},p:t,d(t){t&&f(n),r=!1,o()}}}(e);return{c(){n=p("div"),o=p("input"),i=d(),a=p("label"),a.textContent="Username",s=d(),c=p("div"),m=p("input"),y=d(),b=p("label"),b.textContent="Password",x=d(),I&&I.c(),k=d(),_=p("button"),_.textContent="Sign in",$=d(),T=p("div"),S=p("a"),A=h("Forgot password"),E=d(),F&&F.c(),U=d(),N&&N.c(),P=d(),R=p("a"),R.textContent="User agreement",C=d(),O=p("a"),O.textContent="Privacy policy",v(o,"type","text"),v(o,"class","form-control"),v(o,"id","floatingInput"),v(o,"placeholder","username"),v(a,"for","floatingInput"),v(n,"class","form-floating"),v(m,"type","password"),v(m,"class","form-control"),v(m,"id","floatingPassword"),v(m,"placeholder","Password"),v(b,"for","floatingPassword"),v(c,"class","form-floating"),v(_,"class","w-100 btn btn-lg btn-primary my-3"),v(S,"href","password/forgot?"+e[4].toString()),v(R,"href","user-agreement"),v(O,"href","privacy-policy"),v(T,"class","d-flex flex-column")},m(t,r){l(t,n,r),u(n,o),w(o,e[0]),u(n,i),u(n,a),l(t,s,r),l(t,c,r),u(c,m),w(m,e[1]),u(c,y),u(c,b),l(t,x,r),I&&I.m(t,r),l(t,k,r),l(t,_,r),l(t,$,r),l(t,T,r),u(T,S),u(S,A),u(T,E),F&&F.m(T,null),u(T,U),N&&N.m(T,null),u(T,P),u(T,R),u(T,C),u(T,O),L||(j=[g(o,"input",e[8]),g(m,"input",e[9])],L=!0)},p(t,e){1&e&&o.value!==t[0]&&w(o,t[0]),2&e&&m.value!==t[1]&&w(m,t[1]),t[3]?I?I.p(t,e):(I=it(t),I.c(),I.m(k.parentNode,k)):I&&(I.d(1),I=null),t[2]?F?F.p(t,e):(F=at(t),F.c(),F.m(T,U)):F&&(F.d(1),F=null),t[5]&&N.p(t,e)},d(t){t&&f(n),t&&f(s),t&&f(c),t&&f(x),I&&I.d(t),t&&f(k),t&&f(_),t&&f($),t&&f(T),F&&F.d(),N&&N.d(),L=!1,r(j)}}}function ct(t){let e,n;return e=new tt({props:{title:"Login",$$slots:{default:[st]},$$scope:{ctx:t}}}),e.$on("submit",t[6]),{c(){B(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,[n]){const r={};4111&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ut(t,e,n){let r;a(t,Z,(t=>n(10,r=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};let i="testuser",s="Password",c=!1,u=null;var l=new URLSearchParams(window.location.search);const f=l.get("callback_uri");return r.api.getAppSettings().then((t=>{n(2,c=!t.registrationForbidden)})),[i,s,c,u,l,f,function(){return o(this,void 0,void 0,(function*(){n(3,u=null),r.api.login(i,s,"",[""]).then(ot).catch((t=>{!function(t){const e=(r=new URLSearchParams(window.location.search)).get("callback_uri"),n=r.get("app_id");if(t.id===W.APIErrorCodes.PleaseEnableTFA){var r=new URLSearchParams({mandatory:"true",app_id:n,callback_uri:e});window.location.href=`tfa/setup?${r.toString()}`}}(t),n(3,u=t)}))}))},function(){window.location.href=`${f}`},function(){i=this.value,n(0,i)},function(){s=this.value,n(1,s)}]}function lt(t){let e,n,r=t[2]?.detailedMessage+"";return{c(){e=p("div"),n=h(r),v(e,"class","alert alert-danger"),v(e,"role","alert")},m(t,r){l(t,e,r),u(e,n)},p(t,e){4&e&&r!==(r=t[2]?.detailedMessage+"")&&y(n,r)},d(t){t&&f(e)}}}function ft(t){let e,n,o,i,a,s,c,m,y,b,x,k,_,$,T,S,A,E,U,P,R=!!t[2]&&lt(t);return{c(){e=p("div"),n=p("input"),o=d(),i=p("label"),i.textContent="Username",a=d(),s=p("div"),c=p("input"),m=d(),y=p("label"),y.textContent="Password",b=d(),R&&R.c(),x=d(),k=p("button"),k.textContent="Sign up",_=d(),$=p("div"),T=p("a"),T.textContent="By clicking register I accept user agreement",S=d(),A=p("a"),E=h("Go back to login"),v(n,"type","text"),v(n,"class","form-control"),v(n,"id","floatingUsername"),v(n,"placeholder","username"),v(i,"for","floatingUsername"),v(e,"class","form-floating"),v(c,"type","password"),v(c,"class","form-control"),v(c,"id","floatingPassword"),v(c,"placeholder","Password"),v(y,"for","floatingPassword"),v(s,"class","form-floating"),v(k,"class","w-100 btn btn-lg btn-primary my-3"),v(T,"href","user-agreement"),v(A,"href","login?"+t[3].toString()),v($,"class","d-flex flex-column")},m(r,f){l(r,e,f),u(e,n),w(n,t[0]),u(e,o),u(e,i),l(r,a,f),l(r,s,f),u(s,c),w(c,t[1]),u(s,m),u(s,y),l(r,b,f),R&&R.m(r,f),l(r,x,f),l(r,k,f),l(r,_,f),l(r,$,f),u($,T),u($,S),u($,A),u(A,E),U||(P=[g(n,"input",t[5]),g(c,"input",t[6])],U=!0)},p(t,e){1&e&&n.value!==t[0]&&w(n,t[0]),2&e&&c.value!==t[1]&&w(c,t[1]),t[2]?R?R.p(t,e):(R=lt(t),R.c(),R.m(x.parentNode,x)):R&&(R.d(1),R=null)},d(t){t&&f(e),t&&f(a),t&&f(s),t&&f(b),R&&R.d(t),t&&f(x),t&&f(k),t&&f(_),t&&f($),U=!1,r(P)}}}function pt(t){let e,n;return e=new tt({props:{title:"Register",$$slots:{default:[ft]},$$scope:{ctx:t}}}),e.$on("submit",t[4]),{c(){B(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,[n]){const r={};4103&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ht(t,e,n){let r;a(t,Z,(t=>n(7,r=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};let i=`sokolov.stas+${Math.round(1e4*Math.random())}@gmail.com`,s=`TestUser${Math.round(1e4*Math.random())}@test.com`,c="Password",u=`+${Math.round(1e11*Math.random())}`;var l=new URLSearchParams(window.location.search);l.get("callback_uri");let f=null;return[i,c,f,l,function(){return o(this,void 0,void 0,(function*(){n(2,f=null),r.api.register(i,c,s,u).then(ot).catch((t=>{n(2,f=t)}))}))},function(){i=this.value,n(0,i)},function(){c=this.value,n(1,c)}]}function dt(t){let e;return{c(){e=h("Please use google authenticator app and enter code")},m(t,n){l(t,e,n)},d(t){t&&f(e)}}}function mt(t){let e,n,r;return{c(){e=h("Please check your phone number "),n=h(t[0]),r=h(" for the code")},m(t,o){l(t,e,o),l(t,n,o),l(t,r,o)},p(t,e){1&e&&y(n,t[0])},d(t){t&&f(e),t&&f(n),t&&f(r)}}}function gt(t){let e,n;return{c(){e=h("Check your email "),n=h(t[1])},m(t,r){l(t,e,r),l(t,n,r)},p(t,e){2&e&&y(n,t[1])},d(t){t&&f(e),t&&f(n)}}}function vt(t){let e,n,o,i,a,s,c,m,y,b,x,k,_,$,T,S,A=t[2]==W.TFAType.TFATypeApp&&dt(),E=t[2]==W.TFAType.TFATypeSMS&&mt(t),U=t[2]==W.TFAType.TFATypeEmail&&gt(t);return{c(){e=p("div"),A&&A.c(),n=d(),E&&E.c(),o=d(),U&&U.c(),i=h("\n\n  Please enter code"),a=p("br"),s=d(),c=p("div"),m=p("input"),y=d(),b=p("label"),b.textContent="Verify code",x=d(),k=p("button"),k.textContent="Ok",_=d(),$=p("div"),$.innerHTML='<a href="">Go back</a> \n    <a href="">I am not reciving code</a>',v(m,"type","text"),v(m,"class","form-control"),v(m,"id","floatingUsername"),v(m,"placeholder","XXXX"),v(b,"for","floatingInput"),v(c,"class","form-floating"),v(k,"class","w-100 btn btn-lg btn-primary my-3"),v($,"class","d-flex flex-column")},m(r,f){l(r,e,f),A&&A.m(e,null),u(e,n),E&&E.m(e,null),u(e,o),U&&U.m(e,null),l(r,i,f),l(r,a,f),l(r,s,f),l(r,c,f),u(c,m),w(m,t[3]),u(c,y),u(c,b),l(r,x,f),l(r,k,f),l(r,_,f),l(r,$,f),T||(S=[g(m,"input",t[5]),g(k,"click",t[4])],T=!0)},p(t,r){t[2]==W.TFAType.TFATypeApp?A||(A=dt(),A.c(),A.m(e,n)):A&&(A.d(1),A=null),t[2]==W.TFAType.TFATypeSMS?E?E.p(t,r):(E=mt(t),E.c(),E.m(e,o)):E&&(E.d(1),E=null),t[2]==W.TFAType.TFATypeEmail?U?U.p(t,r):(U=gt(t),U.c(),U.m(e,null)):U&&(U.d(1),U=null),8&r&&m.value!==t[3]&&w(m,t[3])},d(t){t&&f(e),A&&A.d(),E&&E.d(),U&&U.d(),t&&f(i),t&&f(a),t&&f(s),t&&f(c),t&&f(x),t&&f(k),t&&f(_),t&&f($),T=!1,r(S)}}}function yt(t){let e,n;return e=new tt({props:{title:"Confirm 2FA",$$slots:{default:[vt]},$$scope:{ctx:t}}}),e.$on("submit",t[4]),{c(){B(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,[n]){const r={};1039&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function wt(t,e,n){let r;a(t,Z,(t=>n(6,r=t)));var o=new URLSearchParams(window.location.search);const i=o.get("callback_uri");o.get("app_id");let s,c="",u="",l="";return r.api.getAppSettings().then((t=>{n(2,s=t.tfaType)})),r.api.getUser(o.get("token")).then((t=>{n(0,c=t.phone||""),n(1,u=t.email||"")})),[c,u,s,l,function(){r.api.verifyTFA(l,[],o.get("token")).then((t=>{console.log(t),i&&t.access_token&&t.refresh_token?window.location.href=`${i}?access_token=${t.access_token}&refresh_token=${t.refresh_token}`:i&&t.access_token&&!t.refresh_token&&(window.location.href=`${i}?access_token=${t.access_token}`)}))},function(){l=this.value,n(3,l)}]}function bt(t){let e,n,r,o=t[3]&&xt(t),i=!t[3]&&kt(t);return{c(){e=p("div"),n=h("Use GoogleAuth as 2fa\n      "),o&&o.c(),r=d(),i&&i.c()},m(t,a){l(t,e,a),u(e,n),o&&o.m(e,null),u(e,r),i&&i.m(e,null)},p(t,n){t[3]?o?o.p(t,n):(o=xt(t),o.c(),o.m(e,r)):o&&(o.d(1),o=null),t[3]?i&&(i.d(1),i=null):i?i.p(t,n):(i=kt(t),i.c(),i.m(e,null))},d(t){t&&f(e),o&&o.d(),i&&i.d()}}}function xt(t){let e,n,r,o,i,a,s,c,m;return{c(){e=p("img"),r=d(),o=p("div"),i=h(t[3]),a=d(),s=p("button"),s.textContent="Next",e.src!==(n="data:image/png;base64, "+t[4])&&v(e,"src",n),v(e,"alt","provisioningURI"),v(s,"class","w-100 btn btn-lg btn-primary my-3")},m(n,f){l(n,e,f),l(n,r,f),l(n,o,f),u(o,i),l(n,a,f),l(n,s,f),c||(m=g(s,"click",t[7]),c=!0)},p(t,r){16&r&&e.src!==(n="data:image/png;base64, "+t[4])&&v(e,"src",n),8&r&&y(i,t[3])},d(t){t&&f(e),t&&f(r),t&&f(o),t&&f(a),t&&f(s),c=!1,m()}}}function kt(e){let n,r,o;return{c(){n=p("button"),n.textContent="Setup",v(n,"class","w-100 btn btn-lg btn-primary my-3")},m(t,i){l(t,n,i),r||(o=g(n,"click",e[6]),r=!0)},p:t,d(t){t&&f(n),r=!1,o()}}}function _t(t){let e,n,o,i,a,s,c,m,y,b;return{c(){e=p("div"),n=h("Use phone as 2fa, please check your phone bellow, we will send\n      confirmation code to this phone\n      "),o=p("div"),i=p("input"),a=d(),s=p("label"),s.textContent="Phone number",c=d(),m=p("button"),m.textContent="Setup email",v(i,"type","email"),v(i,"class","form-control"),v(i,"id","floatingInput"),v(i,"placeholder","+1 234 567 89 00"),v(s,"for","floatingInput"),v(o,"class","form-floating"),v(m,"class","w-100 btn btn-lg btn-primary my-3")},m(r,f){l(r,e,f),u(e,n),u(e,o),u(o,i),w(i,t[1]),u(o,a),u(o,s),u(e,c),u(e,m),y||(b=[g(i,"input",t[8]),g(m,"click",t[6])],y=!0)},p(t,e){2&e&&i.value!==t[1]&&w(i,t[1])},d(t){t&&f(e),y=!1,r(b)}}}function $t(t){let e,n,o,i,a,s,c,m,y,b;return{c(){e=p("div"),n=h("Use email as 2fa, please check your email bellow, we will send\n      confirmation code to this email\n      "),o=p("div"),i=p("input"),a=d(),s=p("label"),s.textContent="Email",c=d(),m=p("button"),m.textContent="Setup phone",v(i,"type","email"),v(i,"class","form-control"),v(i,"id","floatingInput"),v(i,"placeholder","user@domain.com"),v(s,"for","floatingInput"),v(o,"class","form-floating"),v(m,"class","w-100 btn btn-lg btn-primary my-3")},m(r,f){l(r,e,f),u(e,n),u(e,o),u(o,i),w(i,t[2]),u(o,a),u(o,s),u(e,c),u(e,m),y||(b=[g(i,"input",t[9]),g(m,"click",t[6])],y=!0)},p(t,e){4&e&&i.value!==t[2]&&w(i,t[2])},d(t){t&&f(e),y=!1,r(b)}}}function Tt(t){let e,n,r,o,i=t[0]==W.TFAType.TFATypeApp&&bt(t),a=t[0]==W.TFAType.TFATypeSMS&&_t(t),s=t[0]==W.TFAType.TFATypeEmail&&$t(t),c=!t[5]&&function(t){let e;return{c(){e=p("button"),e.textContent="Continue"},m(t,n){l(t,e,n)},d(t){t&&f(e)}}}();return{c(){i&&i.c(),e=d(),a&&a.c(),n=d(),s&&s.c(),r=d(),c&&c.c(),o=m()},m(t,u){i&&i.m(t,u),l(t,e,u),a&&a.m(t,u),l(t,n,u),s&&s.m(t,u),l(t,r,u),c&&c.m(t,u),l(t,o,u)},p(t,o){t[0]==W.TFAType.TFATypeApp?i?i.p(t,o):(i=bt(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),t[0]==W.TFAType.TFATypeSMS?a?a.p(t,o):(a=_t(t),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),t[0]==W.TFAType.TFATypeEmail?s?s.p(t,o):(s=$t(t),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(t){i&&i.d(t),t&&f(e),a&&a.d(t),t&&f(n),s&&s.d(t),t&&f(r),c&&c.d(t),t&&f(o)}}}function St(t){let e,n;return e=new tt({props:{title:"Setup 2FA",$$slots:{default:[Tt]},$$scope:{ctx:t}}}),e.$on("submit",t[6]),{c(){B(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,[n]){const r={};131103&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function At(t,e,n){let r;a(t,Z,(t=>n(12,r=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=new URLSearchParams(window.location.search);const s=i.get("callback_uri"),c=i.get("app_id"),u="true"===i.get("mandatory");let l,f="",p="",h="",d="",m="";function g(){var t=new URLSearchParams({token:m,callback_uri:s,app_id:c});window.location.href=`tfa/verify?${t.toString()}`}return r.api.getAppSettings().then((t=>{n(0,l=t.tfaType)})),r.api.getUser(i.get("token")).then((t=>{n(1,f=t.phone||""),n(2,p=t.email||"")})),[l,f,p,h,d,u,function(){return o(this,void 0,void 0,(function*(){l==W.TFAType.TFATypeSMS&&(yield r.api.updateUser({new_phone:f},i.get("token"))),l==W.TFAType.TFATypeEmail&&(yield r.api.updateUser({new_email:p},i.get("token"))),yield r.api.enableTFA(i.get("token")).then((t=>{m=t.access_token,t.provisioning_uri||g(),t.provisioning_uri&&(n(3,h=t.provisioning_uri),n(4,d=t.provisioning_qr))}))}))},g,function(){f=this.value,n(1,f)},function(){p=this.value,n(2,p)}]}function Et(t){let e,n,r=t[1]?.detailedMessage+"";return{c(){e=p("div"),n=h(r),v(e,"class","alert alert-danger"),v(e,"role","alert")},m(t,r){l(t,e,r),u(e,n)},p(t,e){2&e&&r!==(r=t[1]?.detailedMessage+"")&&y(n,r)},d(t){t&&f(e)}}}function Ut(t){let e;return{c(){e=p("button"),e.textContent="Restore password",v(e,"class","w-100 btn btn-lg btn-primary my-3")},m(t,n){l(t,e,n)},d(t){t&&f(e)}}}function Pt(t){let e;return{c(){e=p("div"),e.textContent="Reset password link sended to email",v(e,"class","alert alert-success my-3"),v(e,"role","alert")},m(t,n){l(t,e,n)},d(t){t&&f(e)}}}function Rt(t){let e,n,r,o,i,a,s,c,m,y,b,x,k,_=!!t[1]&&Et(t),$=!t[2]&&Ut(),T=t[2]&&Pt();return{c(){e=p("div"),n=p("input"),r=d(),o=p("label"),o.textContent="Username",i=d(),_&&_.c(),a=d(),$&&$.c(),s=d(),T&&T.c(),c=d(),m=p("div"),y=p("a"),b=h("Back to login"),v(n,"type","username"),v(n,"class","form-control"),v(n,"id","floatingUsername"),v(n,"placeholder","username"),v(o,"for","floatingUsername"),v(e,"class","form-floating"),v(y,"href","login?"+t[3].toString()),v(m,"class","d-flex flex-column")},m(f,p){l(f,e,p),u(e,n),w(n,t[0]),u(e,r),u(e,o),l(f,i,p),_&&_.m(f,p),l(f,a,p),$&&$.m(f,p),l(f,s,p),T&&T.m(f,p),l(f,c,p),l(f,m,p),u(m,y),u(y,b),x||(k=g(n,"input",t[5]),x=!0)},p(t,e){1&e&&w(n,t[0]),t[1]?_?_.p(t,e):(_=Et(t),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null),t[2]?$&&($.d(1),$=null):$||($=Ut(),$.c(),$.m(s.parentNode,s)),t[2]?T||(T=Pt(),T.c(),T.m(c.parentNode,c)):T&&(T.d(1),T=null)},d(t){t&&f(e),t&&f(i),_&&_.d(t),t&&f(a),$&&$.d(t),t&&f(s),T&&T.d(t),t&&f(c),t&&f(m),x=!1,k()}}}function Ct(t){let e,n;return e=new tt({props:{title:"Restore password",$$slots:{default:[Rt]},$$scope:{ctx:t}}}),e.$on("submit",t[4]),{c(){B(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,[n]){const r={};263&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Ot(t,e,n){let r;a(t,Z,(t=>n(6,r=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};let i=new URLSearchParams(window.location.search),s="",c=null,u=!1;return[s,c,u,i,function(){return o(this,void 0,void 0,(function*(){return n(1,c=null),r.api.requestResetPassword(s).then((t=>{n(2,u=!0)})).catch((t=>{console.log(t),n(1,c=t)}))}))},function(){s=this.value,n(0,s)}]}function Lt(t){let e,n,r=t[1]?.detailedMessage+"";return{c(){e=p("div"),n=h(r),v(e,"class","alert alert-danger"),v(e,"role","alert")},m(t,r){l(t,e,r),u(e,n)},p(t,e){2&e&&r!==(r=t[1]?.detailedMessage+"")&&y(n,r)},d(t){t&&f(e)}}}function jt(t){let e;return{c(){e=p("button"),e.textContent="Ok",v(e,"class","w-100 btn btn-lg btn-primary my-3")},m(t,n){l(t,e,n)},d(t){t&&f(e)}}}function It(e){let n,r,o;return{c(){n=p("div"),r=h("New password has been set. Return to login "),o=p("a"),v(o,"href","login?"+e[3].toString()),v(n,"class","alert alert-success my-3"),v(n,"role","alert")},m(t,e){l(t,n,e),u(n,r),u(n,o)},p:t,d(t){t&&f(n)}}}function Ft(t){let e,n,r,o,i,a,s,c,m,y,b,x,k,_=!!t[1]&&Lt(t),$=!t[2]&&jt(),T=t[2]&&It(t);return{c(){e=p("div"),n=p("input"),r=d(),o=p("label"),o.textContent="Password",i=d(),_&&_.c(),a=d(),$&&$.c(),s=d(),T&&T.c(),c=d(),m=p("div"),y=p("a"),b=h("Back to login"),v(n,"type","password"),v(n,"class","form-control"),v(n,"id","floatingPassword"),v(n,"placeholder","Password"),v(o,"for","floatingPassword"),v(e,"class","form-floating"),v(y,"href","login?"+t[3].toString()),v(m,"class","d-flex flex-column")},m(f,p){l(f,e,p),u(e,n),w(n,t[0]),u(e,r),u(e,o),l(f,i,p),_&&_.m(f,p),l(f,a,p),$&&$.m(f,p),l(f,s,p),T&&T.m(f,p),l(f,c,p),l(f,m,p),u(m,y),u(y,b),x||(k=g(n,"input",t[5]),x=!0)},p(t,e){1&e&&n.value!==t[0]&&w(n,t[0]),t[1]?_?_.p(t,e):(_=Lt(t),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null),t[2]?$&&($.d(1),$=null):$||($=jt(),$.c(),$.m(s.parentNode,s)),t[2]?T?T.p(t,e):(T=It(t),T.c(),T.m(c.parentNode,c)):T&&(T.d(1),T=null)},d(t){t&&f(e),t&&f(i),_&&_.d(t),t&&f(a),$&&$.d(t),t&&f(s),T&&T.d(t),t&&f(c),t&&f(m),x=!1,k()}}}function Nt(t){let e,n;return e=new tt({props:{title:"Reset password",$$slots:{default:[Ft]},$$scope:{ctx:t}}}),e.$on("submit",t[4]),{c(){B(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,[n]){const r={};1031&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function Bt(t,e,n){let r;a(t,Z,(t=>n(6,r=t)));var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};let i="Password",s=null,c=!1;var u=new URLSearchParams(window.location.search);return u.get("callback_uri"),[i,s,c,u,function(){return o(this,void 0,void 0,(function*(){const t=new URLSearchParams(window.location.search).get("token");n(1,s=null),r.api.resetPassword(i,t).then((t=>{n(2,c=!0),console.log(t)})).catch((t=>{n(1,s=t)}))}))},function(){i=this.value,n(0,i)}]}var Mt=[{path:"/",component:class extends z{constructor(t){super(),D(this,t,rt,nt,i,{})}}},{path:"/login",component:class extends z{constructor(t){super(),D(this,t,ut,ct,i,{})}}},{path:"/register",component:class extends z{constructor(t){super(),D(this,t,ht,pt,i,{})}}},{path:"/tfa/verify",component:class extends z{constructor(t){super(),D(this,t,wt,yt,i,{})}}},{path:"/tfa/setup",component:class extends z{constructor(t){super(),D(this,t,At,St,i,{})}}},{path:"/password/reset",component:class extends z{constructor(t){super(),D(this,t,Bt,Nt,i,{})}}},{path:"/password/forgot",component:class extends z{constructor(t){super(),D(this,t,Ot,Ct,i,{})}}}];const{document:qt}=N;function Ht(t){let e,n,o;var i=t[0];function a(t){return{props:{params:t[1]}}}return i&&(e=new i(a(t))),{c(){e&&B(e.$$.fragment),n=m()},m(t,r){e&&M(e,t,r),l(t,n,r),o=!0},p(t,o){const s={};if(2&o&&(s.params=t[1]),i!==(i=t[0])){if(e){j={r:0,c:[],p:j};const t=e;F(t.$$.fragment,1,0,(()=>{q(t,1)})),j.r||r(j.c),j=j.p}i?(e=new i(a(t)),B(e.$$.fragment),I(e.$$.fragment,1),M(e,n.parentNode,n)):e=null}else i&&e.$set(s)},i(t){o||(e&&I(e.$$.fragment,t),o=!0)},o(t){e&&F(e.$$.fragment,t),o=!1},d(t){t&&f(n),e&&q(e,t)}}}function Dt(e){let n;return{c(){n=h("app_id query param not set")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function zt(t){let e,n,r,o,i,a,s,c;const h=[Dt,Ht],m=[];return a=function(t,e){return t[2]?1:0}(t),s=m[a]=h[a](t),{c(){e=p("link"),n=p("script"),o=d(),i=p("div"),s.c(),v(e,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"),v(e,"rel","stylesheet"),v(e,"integrity","sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"),v(e,"crossorigin","anonymous"),n.src!==(r="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js")&&v(n,"src","https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"),v(n,"integrity","sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"),v(n,"crossorigin","anonymous"),v(i,"class","text-center w-100")},m(t,r){u(qt.head,e),u(qt.head,n),l(t,o,r),l(t,i,r),m[a].m(i,null),c=!0},p(t,[e]){s.p(t,e)},i(t){c||(I(s),c=!0)},o(t){F(s),c=!1},d(t){f(e),f(n),t&&f(o),t&&f(i),m[a].d()}}}function Jt(t,e,n){let r,o;const i=new URLSearchParams(window.location.search).get("app_id");if(Z.set(new G({url:"http://localhost:8081/",appId:i})),K.base(""),document.getElementsByTagName("base")[0]){const t=`${document.getElementsByTagName("base")[0].getAttribute("href").replace(/\/$/,"")}`;console.log(`set base ${t}`),K.base(t)}return Mt.forEach((t=>{K(t.path,((t,e)=>{n(1,o=t.params),e()}),(()=>{n(0,r=t.component)}))})),K.start(),[r,o,i]}return new class extends z{constructor(t){super(),D(this,t,Jt,zt,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
